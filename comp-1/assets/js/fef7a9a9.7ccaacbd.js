"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[9413],{1280:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"ubuntu/advanced/systemd","title":"systemd \uc644\ubcbd \uac00\uc774\ub4dc","description":"\ud604\ub300 Linux\uc758 \ud575\uc2ec\uc778 systemd\ub85c \uc11c\ube44\uc2a4\ub97c \uc644\ubcbd\ud558\uac8c \uad00\ub9ac\ud558\uc138\uc694.","source":"@site/docs/ubuntu/advanced/systemd.md","sourceDirName":"ubuntu/advanced","slug":"/ubuntu/advanced/systemd","permalink":"/docs/ubuntu/advanced/systemd","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ubuntu/advanced/systemd.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"ubuntuSidebar","previous":{"title":"Linux CLI \uace0\uae09","permalink":"/docs/ubuntu/advanced/intro"},"next":{"title":"\uc131\ub2a5 \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \ud29c\ub2dd","permalink":"/docs/ubuntu/advanced/performance-tuning"}}');var r=s(4848),i=s(8453);const l={sidebar_position:2},a="systemd \uc644\ubcbd \uac00\uc774\ub4dc",c={},d=[{value:"\ud83c\udfaf \ubaa9\ud45c",id:"-\ubaa9\ud45c",level:2},{value:"\ud83d\udcd6 systemd\ub780?",id:"-systemd\ub780",level:2},{value:"\uc8fc\uc694 \uae30\ub2a5",id:"\uc8fc\uc694-\uae30\ub2a5",level:3},{value:"\ud83d\udd27 systemctl - \uc11c\ube44\uc2a4 \uc81c\uc5b4",id:"-systemctl---\uc11c\ube44\uc2a4-\uc81c\uc5b4",level:2},{value:"\uae30\ubcf8 \uba85\ub839\uc5b4",id:"\uae30\ubcf8-\uba85\ub839\uc5b4",level:3},{value:"\uc11c\ube44\uc2a4 \uc815\ubcf4 \ud655\uc778",id:"\uc11c\ube44\uc2a4-\uc815\ubcf4-\ud655\uc778",level:3},{value:"\uc2dc\uc2a4\ud15c \uc81c\uc5b4",id:"\uc2dc\uc2a4\ud15c-\uc81c\uc5b4",level:3},{value:"\ud83d\udcdd Unit \ud30c\uc77c \uc791\uc131",id:"-unit-\ud30c\uc77c-\uc791\uc131",level:2},{value:"Unit \ud30c\uc77c \uc704\uce58",id:"unit-\ud30c\uc77c-\uc704\uce58",level:3},{value:"\uac04\ub2e8\ud55c \uc11c\ube44\uc2a4 \uc608\uc81c",id:"\uac04\ub2e8\ud55c-\uc11c\ube44\uc2a4-\uc608\uc81c",level:3},{value:"Node.js \uc571 \uc11c\ube44\uc2a4 \uc608\uc81c",id:"nodejs-\uc571-\uc11c\ube44\uc2a4-\uc608\uc81c",level:3},{value:"Python FastAPI \uc11c\ube44\uc2a4",id:"python-fastapi-\uc11c\ube44\uc2a4",level:3},{value:"Unit \ud30c\uc77c \uc139\uc158 \uc124\uba85",id:"unit-\ud30c\uc77c-\uc139\uc158-\uc124\uba85",level:3},{value:"[Unit] \uc139\uc158",id:"unit-\uc139\uc158",level:4},{value:"[Service] \uc139\uc158",id:"service-\uc139\uc158",level:4},{value:"[Install] \uc139\uc158",id:"install-\uc139\uc158",level:4},{value:"\u23f0 systemd \ud0c0\uc774\uba38 (Cron \ub300\uc548)",id:"-systemd-\ud0c0\uc774\uba38-cron-\ub300\uc548",level:2},{value:"\ud0c0\uc774\uba38 \uc0dd\uc131",id:"\ud0c0\uc774\uba38-\uc0dd\uc131",level:3},{value:"\ud0c0\uc774\uba38 \uc2a4\ucf00\uc904 \uc608\uc81c",id:"\ud0c0\uc774\uba38-\uc2a4\ucf00\uc904-\uc608\uc81c",level:3},{value:"\ud83d\udccb journald - \ub85c\uadf8 \uad00\ub9ac",id:"-journald---\ub85c\uadf8-\uad00\ub9ac",level:2},{value:"\ub85c\uadf8 \ud655\uc778",id:"\ub85c\uadf8-\ud655\uc778",level:3},{value:"journald \uc124\uc815",id:"journald-\uc124\uc815",level:3},{value:"\ud83c\udfaf \uc2e4\uc804 \uc608\uc81c",id:"-\uc2e4\uc804-\uc608\uc81c",level:2},{value:"1. Node.js \uc571 \uc790\ub3d9 \ubc30\ud3ec \uc11c\ube44\uc2a4",id:"1-nodejs-\uc571-\uc790\ub3d9-\ubc30\ud3ec-\uc11c\ube44\uc2a4",level:3},{value:"2. \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubc31\uc5c5 \ud0c0\uc774\uba38",id:"2-\ub370\uc774\ud130\ubca0\uc774\uc2a4-\ubc31\uc5c5-\ud0c0\uc774\uba38",level:3},{value:"3. \uc6f9 \uc11c\ubc84 \uc790\ub3d9 \uc7ac\uc2dc\uc791 (\uac10\uc2dc)",id:"3-\uc6f9-\uc11c\ubc84-\uc790\ub3d9-\uc7ac\uc2dc\uc791-\uac10\uc2dc",level:3},{value:"\ud83d\udca1 \ud504\ub85c \ud301",id:"-\ud504\ub85c-\ud301",level:2},{value:"1. \uc11c\ube44\uc2a4 \ub514\ubc84\uae45",id:"1-\uc11c\ube44\uc2a4-\ub514\ubc84\uae45",level:3},{value:"2. \ube60\ub978 \uc7ac\uc2dc\uc791",id:"2-\ube60\ub978-\uc7ac\uc2dc\uc791",level:3},{value:"3. \ud15c\ud50c\ub9bf \uc11c\ube44\uc2a4",id:"3-\ud15c\ud50c\ub9bf-\uc11c\ube44\uc2a4",level:3},{value:"\ud83d\udd17 \uad00\ub828 \ubb38\uc11c",id:"-\uad00\ub828-\ubb38\uc11c",level:2},{value:"\ud83c\udfaf \ub2e4\uc74c \ub2e8\uacc4",id:"-\ub2e4\uc74c-\ub2e8\uacc4",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"systemd-\uc644\ubcbd-\uac00\uc774\ub4dc",children:"systemd \uc644\ubcbd \uac00\uc774\ub4dc"})}),"\n",(0,r.jsx)(e.p,{children:"\ud604\ub300 Linux\uc758 \ud575\uc2ec\uc778 systemd\ub85c \uc11c\ube44\uc2a4\ub97c \uc644\ubcbd\ud558\uac8c \uad00\ub9ac\ud558\uc138\uc694."}),"\n",(0,r.jsx)(e.h2,{id:"-\ubaa9\ud45c",children:"\ud83c\udfaf \ubaa9\ud45c"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u2705 systemd \uc774\ud574"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 systemctl\ub85c \uc11c\ube44\uc2a4 \uad00\ub9ac"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 Unit \ud30c\uc77c \uc791\uc131"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \ud0c0\uc774\uba38\ub85c \uc791\uc5c5 \uc2a4\ucf00\uc904\ub9c1"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \ub85c\uadf8 \uad00\ub9ac (journald)"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"-systemd\ub780",children:"\ud83d\udcd6 systemd\ub780?"}),"\n",(0,r.jsxs)(e.p,{children:["systemd\ub294 Linux\uc758 ",(0,r.jsx)(e.strong,{children:"init \uc2dc\uc2a4\ud15c"}),"\uc774\uc790 ",(0,r.jsx)(e.strong,{children:"\uc11c\ube44\uc2a4 \ub9e4\ub2c8\uc800"}),"\uc785\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(e.h3,{id:"\uc8fc\uc694-\uae30\ub2a5",children:"\uc8fc\uc694 \uae30\ub2a5"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\ud83d\ude80 ",(0,r.jsx)(e.strong,{children:"\ube60\ub978 \ubd80\ud305"}),": \ubcd1\ub82c\ub85c \uc11c\ube44\uc2a4 \uc2dc\uc791"]}),"\n",(0,r.jsxs)(e.li,{children:["\ud83d\udd04 ",(0,r.jsx)(e.strong,{children:"\uc11c\ube44\uc2a4 \uad00\ub9ac"}),": \uc2dc\uc791, \uc911\uc9c0, \uc7ac\uc2dc\uc791"]}),"\n",(0,r.jsxs)(e.li,{children:["\ud83d\udcdd ",(0,r.jsx)(e.strong,{children:"\ub85c\uae45"}),": journald\ub85c \ud1b5\ud569 \ub85c\uadf8 \uad00\ub9ac"]}),"\n",(0,r.jsxs)(e.li,{children:["\u23f0 ",(0,r.jsx)(e.strong,{children:"\uc2a4\ucf00\uc904\ub9c1"}),": \ud0c0\uc774\uba38\ub85c cron \ub300\uccb4"]}),"\n",(0,r.jsxs)(e.li,{children:["\ud83d\udd17 ",(0,r.jsx)(e.strong,{children:"\uc758\uc874\uc131 \uad00\ub9ac"}),": \uc11c\ube44\uc2a4 \uac04 \uc758\uc874\uc131 \uc790\ub3d9 \ucc98\ub9ac"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"-systemctl---\uc11c\ube44\uc2a4-\uc81c\uc5b4",children:"\ud83d\udd27 systemctl - \uc11c\ube44\uc2a4 \uc81c\uc5b4"}),"\n",(0,r.jsx)(e.h3,{id:"\uae30\ubcf8-\uba85\ub839\uc5b4",children:"\uae30\ubcf8 \uba85\ub839\uc5b4"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \uc11c\ube44\uc2a4 \uc0c1\ud0dc \ud655\uc778\nsystemctl status nginx\n\n# \uc11c\ube44\uc2a4 \uc2dc\uc791\nsudo systemctl start nginx\n\n# \uc11c\ube44\uc2a4 \uc911\uc9c0\nsudo systemctl stop nginx\n\n# \uc11c\ube44\uc2a4 \uc7ac\uc2dc\uc791\nsudo systemctl restart nginx\n\n# \uc124\uc815 \ub9ac\ub85c\ub4dc (\uc7ac\uc2dc\uc791 \uc5c6\uc774)\nsudo systemctl reload nginx\n\n# \ubd80\ud305 \uc2dc \uc790\ub3d9 \uc2dc\uc791 \ud65c\uc131\ud654\nsudo systemctl enable nginx\n\n# \ubd80\ud305 \uc2dc \uc790\ub3d9 \uc2dc\uc791 \ube44\ud65c\uc131\ud654\nsudo systemctl disable nginx\n\n# \ud65c\uc131\ud654 + \uc2dc\uc791 (\ud55c \ubc88\uc5d0)\nsudo systemctl enable --now nginx\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc11c\ube44\uc2a4-\uc815\ubcf4-\ud655\uc778",children:"\uc11c\ube44\uc2a4 \uc815\ubcf4 \ud655\uc778"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \ubaa8\ub4e0 \uc11c\ube44\uc2a4 \ubaa9\ub85d\nsystemctl list-units --type=service\n\n# \uc2e4\ud589 \uc911\uc778 \uc11c\ube44\uc2a4\ub9cc\nsystemctl list-units --type=service --state=running\n\n# \uc2e4\ud328\ud55c \uc11c\ube44\uc2a4\nsystemctl list-units --type=service --state=failed\n\n# \ubd80\ud305 \uc2dc \ud65c\uc131\ud654\ub41c \uc11c\ube44\uc2a4\nsystemctl list-unit-files --type=service --state=enabled\n\n# \ud2b9\uc815 \uc11c\ube44\uc2a4 \uc758\uc874\uc131 \ud655\uc778\nsystemctl list-dependencies nginx\n\n# \uc11c\ube44\uc2a4 \uc124\uc815 \ud30c\uc77c \uc704\uce58 \ud655\uc778\nsystemctl cat nginx\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc2dc\uc2a4\ud15c-\uc81c\uc5b4",children:"\uc2dc\uc2a4\ud15c \uc81c\uc5b4"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \uc2dc\uc2a4\ud15c \uc7ac\ubd80\ud305\nsudo systemctl reboot\n\n# \uc2dc\uc2a4\ud15c \uc885\ub8cc\nsudo systemctl poweroff\n\n# \ub370\ubaac \ub9ac\ub85c\ub4dc (unit \ud30c\uc77c \ubcc0\uacbd \ud6c4)\nsudo systemctl daemon-reload\n\n# \uc2dc\uc2a4\ud15c \uc0c1\ud0dc \ud655\uc778\nsystemctl status\n\n# \ubd80\ud305 \uc2dc\uac04 \ubd84\uc11d\nsystemd-analyze\nsystemd-analyze blame\nsystemd-analyze critical-chain\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-unit-\ud30c\uc77c-\uc791\uc131",children:"\ud83d\udcdd Unit \ud30c\uc77c \uc791\uc131"}),"\n",(0,r.jsx)(e.h3,{id:"unit-\ud30c\uc77c-\uc704\uce58",children:"Unit \ud30c\uc77c \uc704\uce58"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \uc2dc\uc2a4\ud15c unit \ud30c\uc77c\n/etc/systemd/system/       # \uc0ac\uc6a9\uc790 \uc815\uc758 (\uc6b0\uc120\uc21c\uc704 \ub192\uc74c)\n/lib/systemd/system/       # \ud328\ud0a4\uc9c0\uac00 \uc124\uce58\ud55c \ud30c\uc77c\n/usr/lib/systemd/system/   # \ubc30\ud3ec\ud310 \uae30\ubcf8 \ud30c\uc77c\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uac04\ub2e8\ud55c-\uc11c\ube44\uc2a4-\uc608\uc81c",children:"\uac04\ub2e8\ud55c \uc11c\ube44\uc2a4 \uc608\uc81c"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/etc/systemd/system/myapp.service"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:"[Unit]\nDescription=My Application\nAfter=network.target\n\n[Service]\nType=simple\nUser=myuser\nWorkingDirectory=/home/myuser/myapp\nExecStart=/home/myuser/myapp/start.sh\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \uc11c\ube44\uc2a4 \ud65c\uc131\ud654 \ubc0f \uc2dc\uc791\nsudo systemctl daemon-reload\nsudo systemctl enable myapp\nsudo systemctl start myapp\n\n# \uc0c1\ud0dc \ud655\uc778\nsystemctl status myapp\n"})}),"\n",(0,r.jsx)(e.h3,{id:"nodejs-\uc571-\uc11c\ube44\uc2a4-\uc608\uc81c",children:"Node.js \uc571 \uc11c\ube44\uc2a4 \uc608\uc81c"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/etc/systemd/system/nodejs-app.service"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:'[Unit]\nDescription=Node.js Application\nAfter=network.target\n\n[Service]\nType=simple\nUser=www-data\nWorkingDirectory=/var/www/myapp\nEnvironment="NODE_ENV=production"\nEnvironment="PORT=3000"\nExecStart=/usr/bin/node /var/www/myapp/server.js\nRestart=on-failure\nRestartSec=10\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=nodejs-app\n\n[Install]\nWantedBy=multi-user.target\n'})}),"\n",(0,r.jsx)(e.h3,{id:"python-fastapi-\uc11c\ube44\uc2a4",children:"Python FastAPI \uc11c\ube44\uc2a4"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/etc/systemd/system/fastapi-app.service"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:'[Unit]\nDescription=FastAPI Application\nAfter=network.target\n\n[Service]\nType=simple\nUser=www-data\nGroup=www-data\nWorkingDirectory=/var/www/api\nEnvironment="PATH=/var/www/api/venv/bin"\nExecStart=/var/www/api/venv/bin/uvicorn app.main:app --host 0.0.0.0 --port 8000\nRestart=always\nRestartSec=3\n\n[Install]\nWantedBy=multi-user.target\n'})}),"\n",(0,r.jsx)(e.h3,{id:"unit-\ud30c\uc77c-\uc139\uc158-\uc124\uba85",children:"Unit \ud30c\uc77c \uc139\uc158 \uc124\uba85"}),"\n",(0,r.jsx)(e.h4,{id:"unit-\uc139\uc158",children:"[Unit] \uc139\uc158"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:"[Unit]\nDescription=\uc11c\ube44\uc2a4 \uc124\uba85\nDocumentation=https://example.com/docs\nAfter=network.target postgresql.service  # \uc774 \uc11c\ube44\uc2a4\ub4e4 \ub2e4\uc74c\uc5d0 \uc2dc\uc791\nBefore=nginx.service                     # \uc774 \uc11c\ube44\uc2a4 \uc804\uc5d0 \uc2dc\uc791\nRequires=postgresql.service              # \ud544\uc218 \uc758\uc874\uc131\nWants=redis.service                      # \uc120\ud0dd\uc801 \uc758\uc874\uc131\n"})}),"\n",(0,r.jsx)(e.h4,{id:"service-\uc139\uc158",children:"[Service] \uc139\uc158"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:'[Service]\nType=simple              # \uac00\uc7a5 \uc77c\ubc18\uc801\n# Type=forking          # \ub370\ubaac \ud504\ub85c\uc138\uc2a4\n# Type=oneshot          # \ud55c \ubc88 \uc2e4\ud589 \ud6c4 \uc885\ub8cc\n# Type=notify           # \uc900\ube44 \uc644\ub8cc \uc2dc systemd\uc5d0 \uc54c\ub9bc\n\nUser=username\nGroup=groupname\nWorkingDirectory=/path/to/app\n\nExecStart=/path/to/binary         # \uc2dc\uc791 \uba85\ub839\uc5b4\nExecReload=/bin/kill -HUP $MAINPID  # \ub9ac\ub85c\ub4dc \uba85\ub839\uc5b4\nExecStop=/path/to/stop-script     # \uc911\uc9c0 \uba85\ub839\uc5b4\n\n# \uc7ac\uc2dc\uc791 \uc815\ucc45\nRestart=always          # \ud56d\uc0c1 \uc7ac\uc2dc\uc791\n# Restart=on-failure   # \uc2e4\ud328 \uc2dc\ub9cc\n# Restart=on-abnormal  # \ube44\uc815\uc0c1 \uc885\ub8cc \uc2dc\ub9cc\nRestartSec=10          # \uc7ac\uc2dc\uc791 \ub300\uae30 \uc2dc\uac04\n\n# \ud658\uacbd \ubcc0\uc218\nEnvironment="VAR1=value1"\nEnvironment="VAR2=value2"\nEnvironmentFile=/etc/myapp/env\n\n# \ub9ac\uc18c\uc2a4 \uc81c\ud55c\nMemoryLimit=512M\nCPUQuota=50%\n'})}),"\n",(0,r.jsx)(e.h4,{id:"install-\uc139\uc158",children:"[Install] \uc139\uc158"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:"[Install]\nWantedBy=multi-user.target  # \uc77c\ubc18\uc801\uc778 \ub300\uc0c1\n# WantedBy=graphical.target  # GUI \ud658\uacbd\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-systemd-\ud0c0\uc774\uba38-cron-\ub300\uc548",children:"\u23f0 systemd \ud0c0\uc774\uba38 (Cron \ub300\uc548)"}),"\n",(0,r.jsx)(e.h3,{id:"\ud0c0\uc774\uba38-\uc0dd\uc131",children:"\ud0c0\uc774\uba38 \uc0dd\uc131"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/etc/systemd/system/backup.service"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:"[Unit]\nDescription=Backup Service\n\n[Service]\nType=oneshot\nExecStart=/usr/local/bin/backup.sh\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/etc/systemd/system/backup.timer"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:"[Unit]\nDescription=Daily Backup Timer\n\n[Timer]\nOnCalendar=daily\nOnCalendar=*-*-* 02:00:00  # \ub9e4\uc77c 02:00\nPersistent=true  # \ub193\uce5c \uc2e4\ud589\ub3c4 \uc218\ud589\n\n[Install]\nWantedBy=timers.target\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \ud0c0\uc774\uba38 \ud65c\uc131\ud654 \ubc0f \uc2dc\uc791\nsudo systemctl enable backup.timer\nsudo systemctl start backup.timer\n\n# \ud0c0\uc774\uba38 \ubaa9\ub85d \ud655\uc778\nsystemctl list-timers\n\n# \ud0c0\uc774\uba38 \uc0c1\ud0dc \ud655\uc778\nsystemctl status backup.timer\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\ud0c0\uc774\uba38-\uc2a4\ucf00\uc904-\uc608\uc81c",children:"\ud0c0\uc774\uba38 \uc2a4\ucf00\uc904 \uc608\uc81c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:"# \ub9e4 \uc2dc\uac04\nOnCalendar=hourly\n\n# \ub9e4\uc77c \uc790\uc815\nOnCalendar=daily\n\n# \ub9e4\uc8fc \uc6d4\uc694\uc77c\nOnCalendar=weekly\nOnCalendar=Mon *-*-* 00:00:00\n\n# \ub9e4\uc6d4 1\uc77c\nOnCalendar=monthly\nOnCalendar=*-*-01 00:00:00\n\n# \ud2b9\uc815 \uc2dc\uac04\nOnCalendar=*-*-* 14:30:00\n\n# \uc5ec\ub7ec \uc2dc\uac04\nOnCalendar=Mon,Tue,Wed 10:00:00\n\n# \ubd80\ud305 \ud6c4 15\ubd84\nOnBootSec=15min\n\n# \ub9c8\uc9c0\ub9c9 \uc2e4\ud589 \ud6c4 1\uc2dc\uac04\nOnUnitActiveSec=1h\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-journald---\ub85c\uadf8-\uad00\ub9ac",children:"\ud83d\udccb journald - \ub85c\uadf8 \uad00\ub9ac"}),"\n",(0,r.jsx)(e.h3,{id:"\ub85c\uadf8-\ud655\uc778",children:"\ub85c\uadf8 \ud655\uc778"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# \ubaa8\ub4e0 \ub85c\uadf8\njournalctl\n\n# \ucd5c\uadfc \ub85c\uadf8 (\ud398\uc774\uc9c0 \ub2e8\uc704)\njournalctl -e\n\n# \uc2e4\uc2dc\uac04 \ub85c\uadf8 (tail -f\ucc98\ub7fc)\njournalctl -f\n\n# \ud2b9\uc815 \uc11c\ube44\uc2a4 \ub85c\uadf8\njournalctl -u nginx\n\n# \ud2b9\uc815 \uc11c\ube44\uc2a4 \uc2e4\uc2dc\uac04 \ub85c\uadf8\njournalctl -u nginx -f\n\n# \ud2b9\uc815 \uae30\uac04\njournalctl --since "2024-01-15"\njournalctl --since "1 hour ago"\njournalctl --since "2024-01-15 10:00" --until "2024-01-15 11:00"\n\n# \uc6b0\uc120\uc21c\uc704\ubcc4\njournalctl -p err         # \uc5d0\ub7ec \uc774\uc0c1\njournalctl -p warning     # \uacbd\uace0 \uc774\uc0c1\n\n# \ubd80\ud305\ubcc4 \ub85c\uadf8\njournalctl --list-boots   # \ubd80\ud305 \ubaa9\ub85d\njournalctl -b             # \ud604\uc7ac \ubd80\ud305\njournalctl -b -1          # \uc774\uc804 \ubd80\ud305\n\n# \ucee4\ub110 \uba54\uc2dc\uc9c0\ub9cc\njournalctl -k\n\n# JSON \ud615\uc2dd\njournalctl -o json\n\n# \ub514\uc2a4\ud06c \uc0ac\uc6a9\ub7c9\njournalctl --disk-usage\n\n# \ub85c\uadf8 \uc815\ub9ac (30\uc77c \uc774\uc804)\nsudo journalctl --vacuum-time=30d\n\n# \ud06c\uae30 \uc81c\ud55c (1GB)\nsudo journalctl --vacuum-size=1G\n'})}),"\n",(0,r.jsx)(e.h3,{id:"journald-\uc124\uc815",children:"journald \uc124\uc815"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/etc/systemd/journald.conf"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:"[Journal]\nStorage=persistent        # \ub514\uc2a4\ud06c\uc5d0 \uc800\uc7a5\nSystemMaxUse=500M        # \ucd5c\ub300 500MB \uc0ac\uc6a9\nSystemKeepFree=1G        # 1GB\ub294 \uc5ec\uc720 \uacf5\uac04\uc73c\ub85c\nMaxRetentionSec=1month   # 1\uac1c\uc6d4 \ubcf4\uad00\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \uc124\uc815 \uc801\uc6a9\nsudo systemctl restart systemd-journald\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-\uc2e4\uc804-\uc608\uc81c",children:"\ud83c\udfaf \uc2e4\uc804 \uc608\uc81c"}),"\n",(0,r.jsx)(e.h3,{id:"1-nodejs-\uc571-\uc790\ub3d9-\ubc30\ud3ec-\uc11c\ube44\uc2a4",children:"1. Node.js \uc571 \uc790\ub3d9 \ubc30\ud3ec \uc11c\ube44\uc2a4"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/etc/systemd/system/api-server.service"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:'[Unit]\nDescription=API Server\nAfter=network.target\n\n[Service]\nType=simple\nUser=api\nGroup=api\nWorkingDirectory=/opt/api-server\nEnvironment="NODE_ENV=production"\nEnvironment="PORT=3000"\nExecStartPre=/usr/bin/npm install\nExecStart=/usr/bin/node server.js\nRestart=always\nRestartSec=10\n\n# \uac74\uac15 \uccb4\ud06c\nExecStartPost=/bin/sleep 5\nExecStartPost=/usr/bin/curl -f http://localhost:3000/health || exit 1\n\n# \ub9ac\uc18c\uc2a4 \uc81c\ud55c\nMemoryLimit=512M\nCPUQuota=80%\n\n# \ub85c\uae45\nStandardOutput=journal\nStandardError=journal\nSyslogIdentifier=api-server\n\n[Install]\nWantedBy=multi-user.target\n'})}),"\n",(0,r.jsx)(e.h3,{id:"2-\ub370\uc774\ud130\ubca0\uc774\uc2a4-\ubc31\uc5c5-\ud0c0\uc774\uba38",children:"2. \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubc31\uc5c5 \ud0c0\uc774\uba38"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/etc/systemd/system/db-backup.service"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:"[Unit]\nDescription=PostgreSQL Backup\n\n[Service]\nType=oneshot\nUser=postgres\nExecStart=/usr/local/bin/pg-backup.sh\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/etc/systemd/system/db-backup.timer"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:"[Unit]\nDescription=Daily PostgreSQL Backup at 2 AM\n\n[Timer]\nOnCalendar=*-*-* 02:00:00\nPersistent=true\n\n[Install]\nWantedBy=timers.target\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/usr/local/bin/pg-backup.sh"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\nDATE=$(date +%Y%m%d_%H%M%S)\nBACKUP_DIR=/backups/postgresql\nmkdir -p $BACKUP_DIR\n\npg_dump mydb > $BACKUP_DIR/mydb_$DATE.sql\ngzip $BACKUP_DIR/mydb_$DATE.sql\n\n# 30\uc77c \uc774\uc0c1 \ub41c \ubc31\uc5c5 \uc0ad\uc81c\nfind $BACKUP_DIR -name "*.sql.gz" -mtime +30 -delete\n\necho "Backup completed: mydb_$DATE.sql.gz"\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"chmod +x /usr/local/bin/pg-backup.sh\nsudo systemctl enable db-backup.timer\nsudo systemctl start db-backup.timer\n"})}),"\n",(0,r.jsx)(e.h3,{id:"3-\uc6f9-\uc11c\ubc84-\uc790\ub3d9-\uc7ac\uc2dc\uc791-\uac10\uc2dc",children:"3. \uc6f9 \uc11c\ubc84 \uc790\ub3d9 \uc7ac\uc2dc\uc791 (\uac10\uc2dc)"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/etc/systemd/system/website-monitor.service"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:"[Unit]\nDescription=Website Monitor\n\n[Service]\nType=oneshot\nExecStart=/usr/local/bin/check-website.sh\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/etc/systemd/system/website-monitor.timer"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:"[Unit]\nDescription=Check Website Every 5 Minutes\n\n[Timer]\nOnBootSec=5min\nOnUnitActiveSec=5min\n\n[Install]\nWantedBy=timers.target\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/usr/local/bin/check-website.sh"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\nif ! curl -f http://localhost 2>/dev/null; then\n    systemctl restart nginx\n    echo "Nginx restarted at $(date)" >> /var/log/nginx-monitor.log\nfi\n'})}),"\n",(0,r.jsx)(e.h2,{id:"-\ud504\ub85c-\ud301",children:"\ud83d\udca1 \ud504\ub85c \ud301"}),"\n",(0,r.jsx)(e.h3,{id:"1-\uc11c\ube44\uc2a4-\ub514\ubc84\uae45",children:"1. \uc11c\ube44\uc2a4 \ub514\ubc84\uae45"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \uc0c1\uc138 \ub85c\uadf8\njournalctl -u myapp -xe\n\n# \ub9c8\uc9c0\ub9c9 \uc2e4\ud589\ubd80\ud130\njournalctl -u myapp -f\n\n# \uc124\uc815 \uac80\uc99d\nsystemd-analyze verify myapp.service\n"})}),"\n",(0,r.jsx)(e.h3,{id:"2-\ube60\ub978-\uc7ac\uc2dc\uc791",children:"2. \ube60\ub978 \uc7ac\uc2dc\uc791"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \uc124\uc815 \ubcc0\uacbd \uc2dc (daemon-reload + restart)\nsudo systemctl restart myapp\n\n# \ub610\ub294\nsudo systemctl daemon-reload && sudo systemctl restart myapp\n"})}),"\n",(0,r.jsx)(e.h3,{id:"3-\ud15c\ud50c\ub9bf-\uc11c\ube44\uc2a4",children:"3. \ud15c\ud50c\ub9bf \uc11c\ube44\uc2a4"}),"\n",(0,r.jsx)(e.p,{children:"\uc5ec\ub7ec \uc778\uc2a4\ud134\uc2a4 \uc2e4\ud589:"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"/etc/systemd/system/worker@.service"}),":"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:"[Unit]\nDescription=Worker %i\n\n[Service]\nType=simple\nExecStart=/usr/bin/worker --id %i\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \uc5ec\ub7ec \uc778\uc2a4\ud134\uc2a4 \uc2e4\ud589\nsudo systemctl start worker@1\nsudo systemctl start worker@2\nsudo systemctl start worker@3\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-\uad00\ub828-\ubb38\uc11c",children:"\ud83d\udd17 \uad00\ub828 \ubb38\uc11c"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"../intermediate/process-management",children:"\ud504\ub85c\uc138\uc2a4 \uad00\ub9ac"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"../real-world/scenario-automation",children:"\uc790\ub3d9\ud654 \uc2dc\ub098\ub9ac\uc624"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"./performance-tuning",children:"\uc131\ub2a5 \ud29c\ub2dd"})}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"-\ub2e4\uc74c-\ub2e8\uacc4",children:"\ud83c\udfaf \ub2e4\uc74c \ub2e8\uacc4"}),"\n",(0,r.jsx)(e.p,{children:"systemd\ub97c \ub9c8\uc2a4\ud130\ud588\ub2e4\uba74, \uc774\uc81c \uc131\ub2a5 \ucd5c\uc801\ud654\ub97c \ubc30\uc6cc\ubd05\uc2dc\ub2e4!"}),"\n",(0,r.jsxs)(e.p,{children:["\ud83d\udc49 ",(0,r.jsx)(e.a,{href:"./performance-tuning",children:"\uc131\ub2a5 \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \ud29c\ub2dd"})]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\ud83d\udca1 \ud301"}),": systemd\ub294 \ubc30\uc6b0\uae30 \uc5b4\ub824\uc6cc \ubcf4\uc774\uc9c0\ub9cc, \ud55c \ubc88 \uc775\ud788\uba74 \uc11c\ube44\uc2a4 \uad00\ub9ac\uac00 \ud6e8\uc52c \uc26c\uc6cc\uc9d1\ub2c8\ub2e4!"]})]})}function u(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>l,x:()=>a});var t=s(6540);const r={},i=t.createContext(r);function l(n){const e=t.useContext(i);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);