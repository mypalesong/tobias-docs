"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[3323],{730:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>a,default:()=>t,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"ubuntu/real-world/scenario-automation","title":"\uc2e4\uc804 \uc2dc\ub098\ub9ac\uc624: \uc790\ub3d9\ud654 \ubc0f Cron Job","description":"\ub9e4\uc77c \ubc18\ubcf5\ub418\ub294 \uc791\uc5c5\uc744 \uc790\ub3d9\ud654\ud558\uc5ec \uc2dc\uac04\uc744 \uc808\uc57d\ud558\uace0 \uc2e4\uc218\ub97c \ubc29\uc9c0\ud569\ub2c8\ub2e4.","source":"@site/docs/ubuntu/real-world/scenario-automation.md","sourceDirName":"ubuntu/real-world","slug":"/ubuntu/real-world/scenario-automation","permalink":"/tobias-docs/comp-1/docs/ubuntu/real-world/scenario-automation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ubuntu/real-world/scenario-automation.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"ubuntuSidebar","previous":{"title":"\uc2e4\uc804 \uc2dc\ub098\ub9ac\uc624: \ub85c\uadf8 \ubd84\uc11d \ubc0f \ubaa8\ub2c8\ud130\ub9c1","permalink":"/tobias-docs/comp-1/docs/ubuntu/real-world/scenario-log-analysis"},"next":{"title":"\uc2e4\uc804 \uc2dc\ub098\ub9ac\uc624 \uc18c\uac1c","permalink":"/tobias-docs/comp-1/docs/ubuntu/scenarios/intro"}}');var l=s(4848),i=s(8453);const c={sidebar_position:4},a="\uc2e4\uc804 \uc2dc\ub098\ub9ac\uc624: \uc790\ub3d9\ud654 \ubc0f Cron Job",o={},d=[{value:"\ud83d\udccc \uc0c1\ud669 \uc124\uba85",id:"-\uc0c1\ud669-\uc124\uba85",level:2},{value:"\ud83c\udfaf \ubaa9\ud45c",id:"-\ubaa9\ud45c",level:2},{value:"\u26a1 \uc2e4\uc2b5",id:"-\uc2e4\uc2b5",level:2},{value:"1\ub2e8\uacc4: \uac04\ub2e8\ud55c \ubc31\uc5c5 \uc2a4\ud06c\ub9bd\ud2b8",id:"1\ub2e8\uacc4-\uac04\ub2e8\ud55c-\ubc31\uc5c5-\uc2a4\ud06c\ub9bd\ud2b8",level:3},{value:"2\ub2e8\uacc4: \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubc31\uc5c5 \uc2a4\ud06c\ub9bd\ud2b8",id:"2\ub2e8\uacc4-\ub370\uc774\ud130\ubca0\uc774\uc2a4-\ubc31\uc5c5-\uc2a4\ud06c\ub9bd\ud2b8",level:3},{value:"3\ub2e8\uacc4: \ub85c\uadf8 \uc815\ub9ac \uc2a4\ud06c\ub9bd\ud2b8",id:"3\ub2e8\uacc4-\ub85c\uadf8-\uc815\ub9ac-\uc2a4\ud06c\ub9bd\ud2b8",level:3},{value:"4\ub2e8\uacc4: \uc2dc\uc2a4\ud15c \uc0c1\ud0dc \uccb4\ud06c \uc2a4\ud06c\ub9bd\ud2b8",id:"4\ub2e8\uacc4-\uc2dc\uc2a4\ud15c-\uc0c1\ud0dc-\uccb4\ud06c-\uc2a4\ud06c\ub9bd\ud2b8",level:3},{value:"5\ub2e8\uacc4: Cron Job \uc124\uc815",id:"5\ub2e8\uacc4-cron-job-\uc124\uc815",level:3},{value:"6\ub2e8\uacc4: Cron Job \uad00\ub9ac",id:"6\ub2e8\uacc4-cron-job-\uad00\ub9ac",level:3},{value:"7\ub2e8\uacc4: \uc2a4\ud06c\ub9bd\ud2b8\uc5d0 \uc5d0\ub7ec \ucc98\ub9ac \ucd94\uac00",id:"7\ub2e8\uacc4-\uc2a4\ud06c\ub9bd\ud2b8\uc5d0-\uc5d0\ub7ec-\ucc98\ub9ac-\ucd94\uac00",level:3},{value:"8\ub2e8\uacc4: \ubcd1\ub82c \uc2e4\ud589 \ubc0f \ucd5c\uc801\ud654",id:"8\ub2e8\uacc4-\ubcd1\ub82c-\uc2e4\ud589-\ubc0f-\ucd5c\uc801\ud654",level:3},{value:"9\ub2e8\uacc4: \ubaa8\ub2c8\ud130\ub9c1 \ub300\uc2dc\ubcf4\ub4dc",id:"9\ub2e8\uacc4-\ubaa8\ub2c8\ud130\ub9c1-\ub300\uc2dc\ubcf4\ub4dc",level:3},{value:"\u2705 \uac80\uc99d",id:"-\uac80\uc99d",level:2},{value:"\ud83d\udca1 \ud504\ub85c \ud301",id:"-\ud504\ub85c-\ud301",level:2},{value:"1. Cron \ud658\uacbd \ubcc0\uc218",id:"1-cron-\ud658\uacbd-\ubcc0\uc218",level:3},{value:"2. Cron \ucd9c\ub825 \ub85c\uadf8",id:"2-cron-\ucd9c\ub825-\ub85c\uadf8",level:3},{value:"3. \uc7a0\uae08 \ud30c\uc77c (\uc911\ubcf5 \uc2e4\ud589 \ubc29\uc9c0)",id:"3-\uc7a0\uae08-\ud30c\uc77c-\uc911\ubcf5-\uc2e4\ud589-\ubc29\uc9c0",level:3},{value:"4. systemd \ud0c0\uc774\uba38 (Cron \ub300\uc548)",id:"4-systemd-\ud0c0\uc774\uba38-cron-\ub300\uc548",level:3},{value:"\ud83c\udf93 \ubc30\uc6b4 \ub0b4\uc6a9",id:"-\ubc30\uc6b4-\ub0b4\uc6a9",level:2},{value:"Shell Script \uae30\ubcf8",id:"shell-script-\uae30\ubcf8",level:3},{value:"\uc790\ub3d9\ud654 \ub3c4\uad6c",id:"\uc790\ub3d9\ud654-\ub3c4\uad6c",level:3},{value:"\ubaa8\ubc94 \uc0ac\ub840",id:"\ubaa8\ubc94-\uc0ac\ub840",level:3},{value:"\ud83d\udd17 \uad00\ub828 \ubb38\uc11c",id:"-\uad00\ub828-\ubb38\uc11c",level:2},{value:"\ud83c\udfaf \ub2e4\uc74c \uc2dc\ub098\ub9ac\uc624",id:"-\ub2e4\uc74c-\uc2dc\ub098\ub9ac\uc624",level:2}];function h(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"\uc2e4\uc804-\uc2dc\ub098\ub9ac\uc624-\uc790\ub3d9\ud654-\ubc0f-cron-job",children:"\uc2e4\uc804 \uc2dc\ub098\ub9ac\uc624: \uc790\ub3d9\ud654 \ubc0f Cron Job"})}),"\n",(0,l.jsx)(e.p,{children:"\ub9e4\uc77c \ubc18\ubcf5\ub418\ub294 \uc791\uc5c5\uc744 \uc790\ub3d9\ud654\ud558\uc5ec \uc2dc\uac04\uc744 \uc808\uc57d\ud558\uace0 \uc2e4\uc218\ub97c \ubc29\uc9c0\ud569\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.h2,{id:"-\uc0c1\ud669-\uc124\uba85",children:"\ud83d\udccc \uc0c1\ud669 \uc124\uba85"}),"\n",(0,l.jsx)(e.p,{children:"DevOps \uc5d4\uc9c0\ub2c8\uc5b4 \uc218\uc9c4\uc740 \ub9e4\uc77c \uc544\uce68 \ub2e4\uc74c \uc791\uc5c5\uc744 \uc218\ub3d9\uc73c\ub85c \ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubc31\uc5c5"}),"\n",(0,l.jsx)(e.li,{children:"\ub85c\uadf8 \ud30c\uc77c \uc815\ub9ac"}),"\n",(0,l.jsx)(e.li,{children:"\uc2dc\uc2a4\ud15c \uc0c1\ud0dc \uccb4\ud06c"}),"\n",(0,l.jsx)(e.li,{children:"\ub514\uc2a4\ud06c \uacf5\uac04 \ud655\uc778"}),"\n",(0,l.jsx)(e.li,{children:"\ub9ac\ud3ec\ud2b8 \uc774\uba54\uc77c \ubc1c\uc1a1"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\uc218\uc9c4"}),': "\uc774\uac70 \uc790\ub3d9\ud654\ud560 \uc218 \uc788\uc9c0 \uc54a\uc744\uae4c? \ub9e4\uc77c \uac19\uc740 \uc77c\uc744 \ubc18\ubcf5\ud558\ub294 \uac74 \uc2dc\uac04 \ub0ad\ube44\uc57c!"']}),"\n",(0,l.jsx)(e.h2,{id:"-\ubaa9\ud45c",children:"\ud83c\udfaf \ubaa9\ud45c"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u2705 Shell \uc2a4\ud06c\ub9bd\ud2b8\ub85c \ubc18\ubcf5 \uc791\uc5c5 \uc790\ub3d9\ud654"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 Cron\uc73c\ub85c \uc2a4\ucf00\uc904\ub9c1"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \uc5d0\ub7ec \ucc98\ub9ac \ubc0f \ub85c\uae45"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \uc54c\ub9bc \ubc0f \ubaa8\ub2c8\ud130\ub9c1"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"-\uc2e4\uc2b5",children:"\u26a1 \uc2e4\uc2b5"}),"\n",(0,l.jsx)(e.h3,{id:"1\ub2e8\uacc4-\uac04\ub2e8\ud55c-\ubc31\uc5c5-\uc2a4\ud06c\ub9bd\ud2b8",children:"1\ub2e8\uacc4: \uac04\ub2e8\ud55c \ubc31\uc5c5 \uc2a4\ud06c\ub9bd\ud2b8"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsxs)(e.strong,{children:[(0,l.jsx)(e.code,{children:"backup.sh"}),":"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\n\n# \ubc31\uc5c5 \uc124\uc815\nBACKUP_DIR="/home/user/backups"\nSOURCE_DIR="/home/user/important_data"\nDATE=$(date +%Y%m%d_%H%M%S)\nBACKUP_FILE="backup_$DATE.tar.gz"\n\n# \ubc31\uc5c5 \ub514\ub809\ud1a0\ub9ac \uc0dd\uc131\nmkdir -p $BACKUP_DIR\n\n# \ubc31\uc5c5 \uc2e4\ud589\necho "\ubc31\uc5c5 \uc2dc\uc791: $(date)"\ntar -czf "$BACKUP_DIR/$BACKUP_FILE" "$SOURCE_DIR"\n\n# \uacb0\uacfc \ud655\uc778\nif [ $? -eq 0 ]; then\n    echo "\ubc31\uc5c5 \uc131\uacf5: $BACKUP_FILE"\nelse\n    echo "\ubc31\uc5c5 \uc2e4\ud328!"\n    exit 1\nfi\n\n# \uc624\ub798\ub41c \ubc31\uc5c5 \uc0ad\uc81c (7\uc77c \uc774\uc0c1)\nfind "$BACKUP_DIR" -name "backup_*.tar.gz" -mtime +7 -delete\necho "\ubc31\uc5c5 \uc644\ub8cc: $(date)"\n'})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \uc2e4\ud589 \uad8c\ud55c \ubd80\uc5ec\nchmod +x backup.sh\n\n# \ud14c\uc2a4\ud2b8 \uc2e4\ud589\n./backup.sh\n"})}),"\n",(0,l.jsx)(e.h3,{id:"2\ub2e8\uacc4-\ub370\uc774\ud130\ubca0\uc774\uc2a4-\ubc31\uc5c5-\uc2a4\ud06c\ub9bd\ud2b8",children:"2\ub2e8\uacc4: \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubc31\uc5c5 \uc2a4\ud06c\ub9bd\ud2b8"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsxs)(e.strong,{children:[(0,l.jsx)(e.code,{children:"db_backup.sh"}),":"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\n\n# \uc124\uc815\nDB_USER="postgres"\nDB_NAME="myapp"\nBACKUP_DIR="/var/backups/postgresql"\nDATE=$(date +%Y%m%d_%H%M%S)\nBACKUP_FILE="$BACKUP_DIR/${DB_NAME}_$DATE.sql"\nLOG_FILE="/var/log/db_backup.log"\n\n# \ub85c\uadf8 \ud568\uc218\nlog() {\n    echo "[$(date \'+%Y-%m-%d %H:%M:%S\')] $1" | tee -a $LOG_FILE\n}\n\n# \ubc31\uc5c5 \ub514\ub809\ud1a0\ub9ac \uc0dd\uc131\nmkdir -p $BACKUP_DIR\n\nlog "\ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubc31\uc5c5 \uc2dc\uc791"\n\n# PostgreSQL \ubc31\uc5c5\npg_dump -U $DB_USER $DB_NAME > $BACKUP_FILE\n\nif [ $? -eq 0 ]; then\n    # \uc555\ucd95\n    gzip $BACKUP_FILE\n    log "\ubc31\uc5c5 \uc131\uacf5: ${BACKUP_FILE}.gz"\n\n    # \ud30c\uc77c \ud06c\uae30 \ud655\uc778\n    SIZE=$(du -h "${BACKUP_FILE}.gz" | cut -f1)\n    log "\ubc31\uc5c5 \ud30c\uc77c \ud06c\uae30: $SIZE"\n\n    # 30\uc77c \uc774\uc0c1 \ub41c \ubc31\uc5c5 \uc0ad\uc81c\n    OLD_COUNT=$(find $BACKUP_DIR -name "*.sql.gz" -mtime +30 | wc -l)\n    find $BACKUP_DIR -name "*.sql.gz" -mtime +30 -delete\n    log "\uc624\ub798\ub41c \ubc31\uc5c5 $OLD_COUNT \uac1c \uc0ad\uc81c"\nelse\n    log "\u274c \ubc31\uc5c5 \uc2e4\ud328!"\n    exit 1\nfi\n\nlog "\ubc31\uc5c5 \uc644\ub8cc"\n'})}),"\n",(0,l.jsx)(e.h3,{id:"3\ub2e8\uacc4-\ub85c\uadf8-\uc815\ub9ac-\uc2a4\ud06c\ub9bd\ud2b8",children:"3\ub2e8\uacc4: \ub85c\uadf8 \uc815\ub9ac \uc2a4\ud06c\ub9bd\ud2b8"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsxs)(e.strong,{children:[(0,l.jsx)(e.code,{children:"cleanup_logs.sh"}),":"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\n\nLOG_DIR="/var/log/myapp"\nRETENTION_DAYS=30\n\necho "\ub85c\uadf8 \uc815\ub9ac \uc2dc\uc791: $(date)"\n\n# \uc624\ub798\ub41c \ub85c\uadf8 \ud30c\uc77c \ucc3e\uae30\nOLD_LOGS=$(find $LOG_DIR -name "*.log" -mtime +$RETENTION_DAYS)\n\nif [ -z "$OLD_LOGS" ]; then\n    echo "\uc815\ub9ac\ud560 \ub85c\uadf8 \uc5c6\uc74c"\nelse\n    echo "\uc815\ub9ac\ud560 \ub85c\uadf8:"\n    echo "$OLD_LOGS"\n\n    # \uc555\ucd95\ub418\uc9c0 \uc54a\uc740 \uc624\ub798\ub41c \ub85c\uadf8 \uc555\ucd95\n    find $LOG_DIR -name "*.log" -mtime +7 -mtime -$RETENTION_DAYS -exec gzip {} \\;\n\n    # \ub9e4\uc6b0 \uc624\ub798\ub41c \ub85c\uadf8 \uc0ad\uc81c\n    find $LOG_DIR -name "*.log.gz" -mtime +$RETENTION_DAYS -delete\n\n    echo "\ub85c\uadf8 \uc815\ub9ac \uc644\ub8cc"\nfi\n\n# \ub514\uc2a4\ud06c \uc0ac\uc6a9\ub7c9 \ud655\uc778\ndf -h $LOG_DIR\n'})}),"\n",(0,l.jsx)(e.h3,{id:"4\ub2e8\uacc4-\uc2dc\uc2a4\ud15c-\uc0c1\ud0dc-\uccb4\ud06c-\uc2a4\ud06c\ub9bd\ud2b8",children:"4\ub2e8\uacc4: \uc2dc\uc2a4\ud15c \uc0c1\ud0dc \uccb4\ud06c \uc2a4\ud06c\ub9bd\ud2b8"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsxs)(e.strong,{children:[(0,l.jsx)(e.code,{children:"health_check.sh"}),":"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\n\nALERT_EMAIL="admin@example.com"\nLOG_FILE="/var/log/health_check.log"\nALERT=false\n\nlog() {\n    echo "[$(date \'+%Y-%m-%d %H:%M:%S\')] $1" | tee -a $LOG_FILE\n}\n\nalert() {\n    ALERT=true\n    log "\u26a0\ufe0f  $1"\n}\n\nlog "=== \uc2dc\uc2a4\ud15c \uc0c1\ud0dc \uccb4\ud06c \uc2dc\uc791 ==="\n\n# 1. \ub514\uc2a4\ud06c \uc0ac\uc6a9\ub7c9 \uccb4\ud06c (80% \uc774\uc0c1 \uacbd\uace0)\nDISK_USAGE=$(df / | tail -1 | awk \'{print $5}\' | sed \'s/%//\')\nif [ $DISK_USAGE -gt 80 ]; then\n    alert "\ub514\uc2a4\ud06c \uc0ac\uc6a9\ub7c9 \ub192\uc74c: ${DISK_USAGE}%"\nelse\n    log "\u2713 \ub514\uc2a4\ud06c \uc0ac\uc6a9\ub7c9: ${DISK_USAGE}%"\nfi\n\n# 2. \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \uccb4\ud06c\nMEM_USAGE=$(free | grep Mem | awk \'{print int($3/$2 * 100)}\')\nif [ $MEM_USAGE -gt 90 ]; then\n    alert "\uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \ub192\uc74c: ${MEM_USAGE}%"\nelse\n    log "\u2713 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9: ${MEM_USAGE}%"\nfi\n\n# 3. CPU \ub85c\ub4dc \uccb4\ud06c\nCPU_LOAD=$(uptime | awk -F\'load average:\' \'{print $2}\' | awk \'{print $1}\' | sed \'s/,//\')\nCPU_CORES=$(nproc)\nif (( $(echo "$CPU_LOAD > $CPU_CORES" | bc -l) )); then\n    alert "CPU \ub85c\ub4dc \ub192\uc74c: $CPU_LOAD (\ucf54\uc5b4: $CPU_CORES)"\nelse\n    log "\u2713 CPU \ub85c\ub4dc: $CPU_LOAD"\nfi\n\n# 4. \uc8fc\uc694 \uc11c\ube44\uc2a4 \uccb4\ud06c\nSERVICES=("nginx" "postgresql" "redis-server")\nfor service in "${SERVICES[@]}"; do\n    if systemctl is-active --quiet $service; then\n        log "\u2713 $service \uc2e4\ud589 \uc911"\n    else\n        alert "$service \uc911\uc9c0\ub428!"\n    fi\ndone\n\n# 5. \ud3ec\ud2b8 \uccb4\ud06c\nPORTS=(80 443 3000 5432)\nfor port in "${PORTS[@]}"; do\n    if nc -z localhost $port 2>/dev/null; then\n        log "\u2713 \ud3ec\ud2b8 $port \uc5f4\ub9bc"\n    else\n        alert "\ud3ec\ud2b8 $port \ub2eb\ud798!"\n    fi\ndone\n\n# \uc54c\ub9bc \ubc1c\uc1a1\nif [ "$ALERT" = true ]; then\n    log "\u26a0\ufe0f  \uacbd\uace0 \ubc1c\uc0dd! \uc774\uba54\uc77c \ubc1c\uc1a1"\n    # \uc2e4\uc81c \ud658\uacbd\uc5d0\uc11c\ub294 mail \uba85\ub839\uc5b4 \uc0ac\uc6a9\n    # cat $LOG_FILE | mail -s "\uc2dc\uc2a4\ud15c \uacbd\uace0" $ALERT_EMAIL\nfi\n\nlog "=== \uc2dc\uc2a4\ud15c \uc0c1\ud0dc \uccb4\ud06c \uc644\ub8cc ==="\n'})}),"\n",(0,l.jsx)(e.h3,{id:"5\ub2e8\uacc4-cron-job-\uc124\uc815",children:"5\ub2e8\uacc4: Cron Job \uc124\uc815"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# crontab \ud3b8\uc9d1\ncrontab -e\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Cron \uc2a4\ucf00\uc904 \ucd94\uac00:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \ubd84 \uc2dc \uc77c \uc6d4 \uc694\uc77c \uba85\ub839\uc5b4\n# * * * * *\n\n# \ub9e4\uc77c \uc0c8\ubcbd 2\uc2dc\uc5d0 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubc31\uc5c5\n0 2 * * * /home/user/scripts/db_backup.sh\n\n# \ub9e4\uc77c \uc624\uc804 3\uc2dc\uc5d0 \ubc31\uc5c5\n0 3 * * * /home/user/scripts/backup.sh\n\n# \ub9e4\uc77c \uc624\uc804 4\uc2dc\uc5d0 \ub85c\uadf8 \uc815\ub9ac\n0 4 * * * /home/user/scripts/cleanup_logs.sh\n\n# \ub9e4 \uc2dc\uac04\ub9c8\ub2e4 \uc2dc\uc2a4\ud15c \uc0c1\ud0dc \uccb4\ud06c\n0 * * * * /home/user/scripts/health_check.sh\n\n# 5\ubd84\ub9c8\ub2e4 \ub514\uc2a4\ud06c \uc0ac\uc6a9\ub7c9 \uccb4\ud06c\n*/5 * * * * df -h / >> /var/log/disk_usage.log\n\n# \ub9e4\uc8fc \uc77c\uc694\uc77c \uc790\uc815\uc5d0 \uc804\uccb4 \uc2dc\uc2a4\ud15c \ubc31\uc5c5\n0 0 * * 0 /home/user/scripts/full_backup.sh\n\n# \ub9e4\uc6d4 1\uc77c\uc5d0 \uc6d4\uac04 \ub9ac\ud3ec\ud2b8 \uc0dd\uc131\n0 0 1 * * /home/user/scripts/monthly_report.sh\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Cron \uc2dc\uac04 \ud45c\ud604:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"* * * * *\n\u2502 \u2502 \u2502 \u2502 \u2502\n\u2502 \u2502 \u2502 \u2502 \u2514\u2500 \uc694\uc77c (0-7, 0\uacfc 7\uc740 \uc77c\uc694\uc77c)\n\u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500 \uc6d4 (1-12)\n\u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500 \uc77c (1-31)\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uc2dc (0-23)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \ubd84 (0-59)\n\n\uc608\uc2dc:\n30 2 * * *        # \ub9e4\uc77c 02:30\n0 */6 * * *       # 6\uc2dc\uac04\ub9c8\ub2e4\n0 0 * * 1         # \ub9e4\uc8fc \uc6d4\uc694\uc77c \uc790\uc815\n0 0 1,15 * *      # \ub9e4\uc6d4 1\uc77c\uacfc 15\uc77c\n*/10 * * * *      # 10\ubd84\ub9c8\ub2e4\n0 9-17 * * 1-5    # \ud3c9\uc77c 9\uc2dc-17\uc2dc \ub9e4 \uc2dc\uac04\n"})}),"\n",(0,l.jsx)(e.h3,{id:"6\ub2e8\uacc4-cron-job-\uad00\ub9ac",children:"6\ub2e8\uacc4: Cron Job \uad00\ub9ac"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \ud604\uc7ac Cron Job \ubaa9\ub85d\ncrontab -l\n\n# Cron Job \ud3b8\uc9d1\ncrontab -e\n\n# Cron Job \uc0ad\uc81c\ncrontab -r\n\n# \ud2b9\uc815 \uc0ac\uc6a9\uc790\uc758 Cron (root \ud544\uc694)\nsudo crontab -u username -l\n\n# Cron \ub85c\uadf8 \ud655\uc778\ngrep CRON /var/log/syslog\n\n# Cron \uc11c\ube44\uc2a4 \uc0c1\ud0dc\nsudo service cron status\n"})}),"\n",(0,l.jsx)(e.h3,{id:"7\ub2e8\uacc4-\uc2a4\ud06c\ub9bd\ud2b8\uc5d0-\uc5d0\ub7ec-\ucc98\ub9ac-\ucd94\uac00",children:"7\ub2e8\uacc4: \uc2a4\ud06c\ub9bd\ud2b8\uc5d0 \uc5d0\ub7ec \ucc98\ub9ac \ucd94\uac00"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsxs)(e.strong,{children:[(0,l.jsx)(e.code,{children:"robust_backup.sh"}),":"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\n\nset -euo pipefail  # \uc5d0\ub7ec \ubc1c\uc0dd \uc2dc \uc989\uc2dc \uc911\ub2e8\n\n# \uc124\uc815\nBACKUP_DIR="/home/user/backups"\nSOURCE_DIR="/home/user/data"\nLOG_FILE="/var/log/backup.log"\nMAX_BACKUPS=7\n\n# \uc5d0\ub7ec \ud578\ub4e4\ub7ec\nerror_exit() {\n    echo "\u274c \uc5d0\ub7ec: $1" | tee -a $LOG_FILE\n    # \uc54c\ub9bc \ubc1c\uc1a1\n    # echo "$1" | mail -s "\ubc31\uc5c5 \uc2e4\ud328" admin@example.com\n    exit 1\n}\n\n# \ub85c\uadf8 \ud568\uc218\nlog() {\n    echo "[$(date \'+%Y-%m-%d %H:%M:%S\')] $1" | tee -a $LOG_FILE\n}\n\n# \ub514\ub809\ud1a0\ub9ac \ud655\uc778\n[ -d "$SOURCE_DIR" ] || error_exit "\uc18c\uc2a4 \ub514\ub809\ud1a0\ub9ac \uc5c6\uc74c: $SOURCE_DIR"\nmkdir -p "$BACKUP_DIR" || error_exit "\ubc31\uc5c5 \ub514\ub809\ud1a0\ub9ac \uc0dd\uc131 \uc2e4\ud328"\n\n# \ub514\uc2a4\ud06c \uacf5\uac04 \ud655\uc778\nAVAILABLE_SPACE=$(df "$BACKUP_DIR" | tail -1 | awk \'{print $4}\')\nREQUIRED_SPACE=$(du -s "$SOURCE_DIR" | awk \'{print $1}\')\n\nif [ $AVAILABLE_SPACE -lt $REQUIRED_SPACE ]; then\n    error_exit "\ub514\uc2a4\ud06c \uacf5\uac04 \ubd80\uc871"\nfi\n\n# \ubc31\uc5c5 \uc2e4\ud589\nDATE=$(date +%Y%m%d_%H%M%S)\nBACKUP_FILE="$BACKUP_DIR/backup_$DATE.tar.gz"\n\nlog "\ubc31\uc5c5 \uc2dc\uc791"\ntar -czf "$BACKUP_FILE" "$SOURCE_DIR" 2>&1 | tee -a $LOG_FILE\n\nif [ ${PIPESTATUS[0]} -eq 0 ]; then\n    SIZE=$(du -h "$BACKUP_FILE" | cut -f1)\n    log "\u2713 \ubc31\uc5c5 \uc131\uacf5: $BACKUP_FILE ($SIZE)"\n\n    # \uc624\ub798\ub41c \ubc31\uc5c5 \uc0ad\uc81c\n    BACKUP_COUNT=$(ls -1 "$BACKUP_DIR"/backup_*.tar.gz 2>/dev/null | wc -l)\n    if [ $BACKUP_COUNT -gt $MAX_BACKUPS ]; then\n        ls -1t "$BACKUP_DIR"/backup_*.tar.gz | tail -n +$((MAX_BACKUPS+1)) | xargs rm -f\n        log "\uc624\ub798\ub41c \ubc31\uc5c5 \uc0ad\uc81c \uc644\ub8cc"\n    fi\nelse\n    error_exit "\ubc31\uc5c5 \uc2e4\ud328"\nfi\n\nlog "\ubc31\uc5c5 \ud504\ub85c\uc138\uc2a4 \uc644\ub8cc"\n'})}),"\n",(0,l.jsx)(e.h3,{id:"8\ub2e8\uacc4-\ubcd1\ub82c-\uc2e4\ud589-\ubc0f-\ucd5c\uc801\ud654",children:"8\ub2e8\uacc4: \ubcd1\ub82c \uc2e4\ud589 \ubc0f \ucd5c\uc801\ud654"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsxs)(e.strong,{children:[(0,l.jsx)(e.code,{children:"parallel_backup.sh"}),":"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\n\n# GNU parallel \uc124\uce58\n# sudo apt install parallel\n\n# \uc5ec\ub7ec \ub514\ub809\ud1a0\ub9ac \ubcd1\ub82c \ubc31\uc5c5\nDIRS=("dir1" "dir2" "dir3" "dir4")\n\nbackup_dir() {\n    local dir=$1\n    echo "\ubc31\uc5c5 \uc911: $dir"\n    tar -czf "backup_${dir}_$(date +%Y%m%d).tar.gz" "$dir"\n    echo "\uc644\ub8cc: $dir"\n}\n\nexport -f backup_dir\n\n# \ubcd1\ub82c\ub85c \uc2e4\ud589 (\ub3d9\uc2dc\uc5d0 4\uac1c)\nparallel -j 4 backup_dir ::: "${DIRS[@]}"\n\necho "\ubaa8\ub4e0 \ubc31\uc5c5 \uc644\ub8cc"\n'})}),"\n",(0,l.jsx)(e.h3,{id:"9\ub2e8\uacc4-\ubaa8\ub2c8\ud130\ub9c1-\ub300\uc2dc\ubcf4\ub4dc",children:"9\ub2e8\uacc4: \ubaa8\ub2c8\ud130\ub9c1 \ub300\uc2dc\ubcf4\ub4dc"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsxs)(e.strong,{children:[(0,l.jsx)(e.code,{children:"dashboard.sh"}),":"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\n\nwhile true; do\n    clear\n    echo "===================================="\n    echo "   \uc2dc\uc2a4\ud15c \ubaa8\ub2c8\ud130\ub9c1 \ub300\uc2dc\ubcf4\ub4dc"\n    echo "===================================="\n    echo "\uc2dc\uac04: $(date)"\n    echo ""\n\n    echo "\ud83d\udcca \uc2dc\uc2a4\ud15c \ub9ac\uc18c\uc2a4:"\n    echo "CPU: $(top -bn1 | grep "Cpu(s)" | awk \'{print $2}\')% \uc0ac\uc6a9"\n    echo "\uba54\ubaa8\ub9ac: $(free -h | grep Mem | awk \'{print $3 "/" $2}\')"\n    echo "\ub514\uc2a4\ud06c: $(df -h / | tail -1 | awk \'{print $5 " \uc0ac\uc6a9 (" $3 "/" $2 ")"}\')"\n    echo ""\n\n    echo "\ud83d\udd04 \uc8fc\uc694 \uc11c\ube44\uc2a4:"\n    for service in nginx postgresql redis-server; do\n        if systemctl is-active --quiet $service; then\n            echo "\u2713 $service"\n        else\n            echo "\u2717 $service (\uc911\uc9c0\ub428)"\n        fi\n    done\n    echo ""\n\n    echo "\ud83d\udcdd \ucd5c\uadfc \ub85c\uadf8 (\ucd5c\uadfc 5\uac1c):"\n    tail -5 /var/log/syslog\n    echo ""\n\n    echo "\ub2e4\uc74c \uc5c5\ub370\uc774\ud2b8: 10\ucd08 \ud6c4..."\n    sleep 10\ndone\n'})}),"\n",(0,l.jsx)(e.h2,{id:"-\uac80\uc99d",children:"\u2705 \uac80\uc99d"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# Cron Job \uc2e4\ud589 \ud655\uc778\ngrep CRON /var/log/syslog | tail -10\n\n# \ubc31\uc5c5 \ud30c\uc77c \ud655\uc778\nls -lh /home/user/backups/\n\n# \uc2a4\ud06c\ub9bd\ud2b8 \ud14c\uc2a4\ud2b8 (\uc2e4\uc81c \uc2e4\ud589\ud558\uc9c0 \uc54a\uace0)\nbash -n script.sh\n\n# \ub514\ubc84\uadf8 \ubaa8\ub4dc\ub85c \uc2e4\ud589\nbash -x script.sh\n"})}),"\n",(0,l.jsx)(e.h2,{id:"-\ud504\ub85c-\ud301",children:"\ud83d\udca1 \ud504\ub85c \ud301"}),"\n",(0,l.jsx)(e.h3,{id:"1-cron-\ud658\uacbd-\ubcc0\uc218",children:"1. Cron \ud658\uacbd \ubcc0\uc218"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# crontab \uc0c1\ub2e8\uc5d0 \ud658\uacbd \ubcc0\uc218 \uc124\uc815\nSHELL=/bin/bash\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\nMAILTO=admin@example.com\n\n# \uadf8 \ud6c4 Cron Job\n0 2 * * * /home/user/scripts/backup.sh\n"})}),"\n",(0,l.jsx)(e.h3,{id:"2-cron-\ucd9c\ub825-\ub85c\uadf8",children:"2. Cron \ucd9c\ub825 \ub85c\uadf8"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \ud45c\uc900 \ucd9c\ub825\uacfc \uc5d0\ub7ec\ub97c \ud30c\uc77c\ub85c\n0 2 * * * /home/user/scripts/backup.sh >> /var/log/backup.log 2>&1\n\n# \uc5d0\ub7ec\ub9cc \ub85c\uadf8\n0 2 * * * /home/user/scripts/backup.sh 2>> /var/log/backup_error.log\n\n# \ucd9c\ub825 \ubb34\uc2dc\n0 2 * * * /home/user/scripts/backup.sh > /dev/null 2>&1\n"})}),"\n",(0,l.jsx)(e.h3,{id:"3-\uc7a0\uae08-\ud30c\uc77c-\uc911\ubcf5-\uc2e4\ud589-\ubc29\uc9c0",children:"3. \uc7a0\uae08 \ud30c\uc77c (\uc911\ubcf5 \uc2e4\ud589 \ubc29\uc9c0)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\n\nLOCKFILE=/var/run/backup.lock\n\n# \uc7a0\uae08 \ud30c\uc77c \ud655\uc778\nif [ -f $LOCKFILE ]; then\n    echo "\uc774\ubbf8 \uc2e4\ud589 \uc911"\n    exit 1\nfi\n\n# \uc7a0\uae08 \ud30c\uc77c \uc0dd\uc131\ntouch $LOCKFILE\n\n# \uc791\uc5c5 \uc2e4\ud589\nperform_backup\n\n# \uc815\ub9ac\nrm -f $LOCKFILE\n'})}),"\n",(0,l.jsx)(e.h3,{id:"4-systemd-\ud0c0\uc774\uba38-cron-\ub300\uc548",children:"4. systemd \ud0c0\uc774\uba38 (Cron \ub300\uc548)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# /etc/systemd/system/backup.service\n[Unit]\nDescription=Daily Backup\n\n[Service]\nType=oneshot\nExecStart=/home/user/scripts/backup.sh\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# /etc/systemd/system/backup.timer\n[Unit]\nDescription=Daily Backup Timer\n\n[Timer]\nOnCalendar=daily\nPersistent=true\n\n[Install]\nWantedBy=timers.target\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \ud65c\uc131\ud654\nsudo systemctl enable backup.timer\nsudo systemctl start backup.timer\n\n# \ud0c0\uc774\uba38 \ud655\uc778\nsystemctl list-timers\n"})}),"\n",(0,l.jsx)(e.h2,{id:"-\ubc30\uc6b4-\ub0b4\uc6a9",children:"\ud83c\udf93 \ubc30\uc6b4 \ub0b4\uc6a9"}),"\n",(0,l.jsx)(e.h3,{id:"shell-script-\uae30\ubcf8",children:"Shell Script \uae30\ubcf8"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\ubcc0\uc218 \uc0ac\uc6a9"}),"\n",(0,l.jsxs)(e.li,{children:["\uc870\uac74\ubb38 (",(0,l.jsx)(e.code,{children:"if"}),")"]}),"\n",(0,l.jsxs)(e.li,{children:["\ubc18\ubcf5\ubb38 (",(0,l.jsx)(e.code,{children:"for"}),")"]}),"\n",(0,l.jsx)(e.li,{children:"\ud568\uc218 \uc815\uc758"}),"\n",(0,l.jsx)(e.li,{children:"\uc5d0\ub7ec \ucc98\ub9ac"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\uc790\ub3d9\ud654-\ub3c4\uad6c",children:"\uc790\ub3d9\ud654 \ub3c4\uad6c"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"cron"})," - \uc2a4\ucf00\uc904\ub9c1"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"systemd"})," - \uc11c\ube44\uc2a4 \uad00\ub9ac"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"at"})," - \uc77c\ud68c\uc131 \uc791\uc5c5"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"parallel"})," - \ubcd1\ub82c \uc2e4\ud589"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\ubaa8\ubc94-\uc0ac\ub840",children:"\ubaa8\ubc94 \uc0ac\ub840"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\ub85c\uae45 \ucd94\uac00"}),"\n",(0,l.jsx)(e.li,{children:"\uc5d0\ub7ec \ucc98\ub9ac"}),"\n",(0,l.jsx)(e.li,{children:"\uc54c\ub9bc \uc124\uc815"}),"\n",(0,l.jsx)(e.li,{children:"\ud14c\uc2a4\ud2b8 \uba3c\uc800"}),"\n",(0,l.jsx)(e.li,{children:"\ubb38\uc11c\ud654"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"-\uad00\ub828-\ubb38\uc11c",children:"\ud83d\udd17 \uad00\ub828 \ubb38\uc11c"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"../intermediate/shell-scripting",children:"Shell Scripting"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"./scenario-process-management",children:"\ud504\ub85c\uc138\uc2a4 \uad00\ub9ac"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"./scenario-performance-monitoring",children:"\uc2dc\uc2a4\ud15c \ubaa8\ub2c8\ud130\ub9c1"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"-\ub2e4\uc74c-\uc2dc\ub098\ub9ac\uc624",children:"\ud83c\udfaf \ub2e4\uc74c \uc2dc\ub098\ub9ac\uc624"}),"\n",(0,l.jsx)(e.p,{children:"\uc790\ub3d9\ud654\ub97c \ub9c8\uc2a4\ud130\ud588\ub2e4\uba74, \uc774\uc81c \ub370\uc774\ud130 \ucc98\ub9ac\ub97c \ubc30\uc6cc\ubd05\uc2dc\ub2e4!"}),"\n",(0,l.jsxs)(e.p,{children:["\ud83d\udc49 ",(0,l.jsx)(e.a,{href:"./scenario-data-processing",children:"\ub370\uc774\ud130 \ucc98\ub9ac \uc2dc\ub098\ub9ac\uc624"})]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\ud83d\udca1 \ud301"}),': "\uc790\ub3d9\ud654\ud560 \uc218 \uc788\ub294 \ubaa8\ub4e0 \uac83\uc740 \uc790\ub3d9\ud654\ud574\uc57c \ud55c\ub2e4" - DevOps\uc758 \ud669\uae08\ub960!']})]})}function t(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(h,{...n})}):h(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>c,x:()=>a});var r=s(6540);const l={},i=r.createContext(l);function c(n){const e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:c(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);