"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[7745],{5658:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"alembic/examples/scenario-01-new-project","title":"\uc2dc\ub098\ub9ac\uc624 1: \uc9c0\uc6b0\uc758 \uccab \ud504\ub85c\uc81d\ud2b8","description":"\uc2a4\ud0c0\ud2b8\uc5c5 \'\ucf54\ub4dc\uc2a4\ud1b0\'\uc5d0 \uc785\uc0ac\ud55c \uc9c0\uc6b0\uac00 \uc0c8 \ud504\ub85c\uc81d\ud2b8\uc5d0 Alembic\uc744 \ub3c4\uc785\ud558\ub294 \uc774\uc57c\uae30\uc785\ub2c8\ub2e4.","source":"@site/docs/alembic/examples/scenario-01-new-project.md","sourceDirName":"alembic/examples","slug":"/alembic/examples/scenario-01-new-project","permalink":"/tobias-docs/comp-1/docs/alembic/examples/scenario-01-new-project","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/alembic/examples/scenario-01-new-project.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"alembicSidebar","previous":{"title":"\uc2e4\uc804 \uc2dc\ub098\ub9ac\uc624 \uc18c\uac1c","permalink":"/tobias-docs/comp-1/docs/alembic/examples/intro"},"next":{"title":"\uc911\uae09\ud3b8 \uc18c\uac1c","permalink":"/tobias-docs/comp-1/docs/alembic/intermediate/intro"}}');var i=l(4848),a=l(8453);const r={sidebar_position:2},o="\uc2dc\ub098\ub9ac\uc624 1: \uc9c0\uc6b0\uc758 \uccab \ud504\ub85c\uc81d\ud2b8",t={},c=[{value:"\ud83d\udccc \uc0c1\ud669 \uc124\uba85",id:"-\uc0c1\ud669-\uc124\uba85",level:2},{value:"\ud83c\udfaf \ubaa9\ud45c",id:"-\ubaa9\ud45c",level:2},{value:"\ud83d\udcac \ub300\ud654",id:"-\ub300\ud654",level:2},{value:"\u26a1 \uc2e4\uc2b5",id:"-\uc2e4\uc2b5",level:2},{value:"1\ub2e8\uacc4: \ud504\ub85c\uc81d\ud2b8 \ucd08\uae30\ud654",id:"1\ub2e8\uacc4-\ud504\ub85c\uc81d\ud2b8-\ucd08\uae30\ud654",level:3},{value:"2\ub2e8\uacc4: \ud504\ub85c\uc81d\ud2b8 \uad6c\uc870 \ub9cc\ub4e4\uae30",id:"2\ub2e8\uacc4-\ud504\ub85c\uc81d\ud2b8-\uad6c\uc870-\ub9cc\ub4e4\uae30",level:3},{value:"3\ub2e8\uacc4: SQLAlchemy \ubaa8\ub378 \uc791\uc131",id:"3\ub2e8\uacc4-sqlalchemy-\ubaa8\ub378-\uc791\uc131",level:3},{value:"4\ub2e8\uacc4: Alembic \ucd08\uae30\ud654",id:"4\ub2e8\uacc4-alembic-\ucd08\uae30\ud654",level:3},{value:"5\ub2e8\uacc4: \ud658\uacbd \uc124\uc815",id:"5\ub2e8\uacc4-\ud658\uacbd-\uc124\uc815",level:3},{value:"6\ub2e8\uacc4: \ucd08\uae30 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131",id:"6\ub2e8\uacc4-\ucd08\uae30-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc0dd\uc131",level:3},{value:"7\ub2e8\uacc4: \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc2e4\ud589",id:"7\ub2e8\uacc4-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc2e4\ud589",level:3},{value:"8\ub2e8\uacc4: \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ud655\uc778",id:"8\ub2e8\uacc4-\ub370\uc774\ud130\ubca0\uc774\uc2a4-\ud655\uc778",level:3},{value:"9\ub2e8\uacc4: Git \ucee4\ubc0b",id:"9\ub2e8\uacc4-git-\ucee4\ubc0b",level:3},{value:"\u2705 \uac80\uc99d",id:"-\uac80\uc99d",level:2},{value:"\ud83c\udf93 \ubc30\uc6b4 \ub0b4\uc6a9",id:"-\ubc30\uc6b4-\ub0b4\uc6a9",level:2},{value:"Alembic \uae30\ubcf8 \uc6cc\ud06c\ud50c\ub85c\uc6b0",id:"alembic-\uae30\ubcf8-\uc6cc\ud06c\ud50c\ub85c\uc6b0",level:3},{value:"\ud504\ub85c\uc81d\ud2b8 \uad6c\uc870",id:"\ud504\ub85c\uc81d\ud2b8-\uad6c\uc870",level:3},{value:"\ud83d\udca1 \uc2e4\uc804 \ud301",id:"-\uc2e4\uc804-\ud301",level:2},{value:"1. \ud658\uacbd\ubcc4 \uc124\uc815 \uad00\ub9ac",id:"1-\ud658\uacbd\ubcc4-\uc124\uc815-\uad00\ub9ac",level:3},{value:"2. requirements.txt \uad00\ub9ac",id:"2-requirementstxt-\uad00\ub9ac",level:3},{value:"3. \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ub124\uc774\ubc0d \uaddc\uce59",id:"3-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ub124\uc774\ubc0d-\uaddc\uce59",level:3},{value:"\ud83d\udea8 \ub2e4\uc74c\ub0a0...",id:"-\ub2e4\uc74c\ub0a0",level:2},{value:"\ud83d\udd17 \uad00\ub828 \ubb38\uc11c",id:"-\uad00\ub828-\ubb38\uc11c",level:2},{value:"\ud83c\udfaf \ub2e4\uc74c \uc2dc\ub098\ub9ac\uc624",id:"-\ub2e4\uc74c-\uc2dc\ub098\ub9ac\uc624",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\uc2dc\ub098\ub9ac\uc624-1-\uc9c0\uc6b0\uc758-\uccab-\ud504\ub85c\uc81d\ud2b8",children:"\uc2dc\ub098\ub9ac\uc624 1: \uc9c0\uc6b0\uc758 \uccab \ud504\ub85c\uc81d\ud2b8"})}),"\n",(0,i.jsx)(n.p,{children:"\uc2a4\ud0c0\ud2b8\uc5c5 '\ucf54\ub4dc\uc2a4\ud1b0'\uc5d0 \uc785\uc0ac\ud55c \uc9c0\uc6b0\uac00 \uc0c8 \ud504\ub85c\uc81d\ud2b8\uc5d0 Alembic\uc744 \ub3c4\uc785\ud558\ub294 \uc774\uc57c\uae30\uc785\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.h2,{id:"-\uc0c1\ud669-\uc124\uba85",children:"\ud83d\udccc \uc0c1\ud669 \uc124\uba85"}),"\n",(0,i.jsx)(n.p,{children:"\uc9c0\uc6b0\ub294 \uc624\ub298 \uc2a4\ud0c0\ud2b8\uc5c5 '\ucf54\ub4dc\uc2a4\ud1b0'\uc5d0 \ubc31\uc5d4\ub4dc \uac1c\ubc1c\uc790\ub85c \uc785\uc0ac\ud588\uc2b5\ub2c8\ub2e4. \uccab \ud504\ub85c\uc81d\ud2b8\ub294 \uc628\ub77c\uc778 \uc11c\uc810 \ud50c\ub7ab\ud3fc\uc785\ub2c8\ub2e4. \ud300\uc7a5 \ubbfc\uc218\ub294 \uc9c0\uc6b0\uc5d0\uac8c \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ub3c4\uad6c\ub85c Alembic\uc744 \uc0ac\uc6a9\ud558\ub77c\uace0 \uc548\ub0b4\ud569\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.h2,{id:"-\ubaa9\ud45c",children:"\ud83c\udfaf \ubaa9\ud45c"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Alembic \ud504\ub85c\uc81d\ud2b8 \ucd08\uae30 \uc124\uc815"}),"\n",(0,i.jsx)(n.li,{children:"\ucd08\uae30 \uc2a4\ud0a4\ub9c8 \uc124\uacc4 \ubc0f \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131"}),"\n",(0,i.jsx)(n.li,{children:"\uac1c\ubc1c \ud658\uacbd\uc5d0\uc11c \ud14c\uc2a4\ud2b8"}),"\n",(0,i.jsx)(n.li,{children:"Git \uc800\uc7a5\uc18c\uc5d0 \ucee4\ubc0b"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-\ub300\ud654",children:"\ud83d\udcac \ub300\ud654"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218 (\ud300\uc7a5)"}),': "\uc9c0\uc6b0\ub2d8, \ud658\uc601\ud569\ub2c8\ub2e4! \uc624\ub298\uc740 \ud504\ub85c\uc81d\ud2b8 \uc14b\uc5c5\uc744 \ub3c4\uc640\ub4dc\ub9b4\uac8c\uc694."']}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\uc9c0\uc6b0"}),': "\uac10\uc0ac\ud569\ub2c8\ub2e4! \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub294 \uc5b4\ub5a4 \uac78 \uc0ac\uc6a9\ud558\ub098\uc694?"']}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "PostgreSQL\uc744 \uc0ac\uc6a9\ud558\uace0, \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc740 Alembic\uc73c\ub85c \uad00\ub9ac\ud569\ub2c8\ub2e4. SQLAlchemy\ub3c4 \ud568\uaed8 \uc4f0\uace0 \uc788\uc5b4\uc694."']}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\uc9c0\uc6b0"}),': "Alembic\uc740 \ucc98\uc74c\uc778\ub370 \uc5b4\ub835\uc9c0 \uc54a\uc744\uae4c\uc694?"']}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\uac71\uc815 \ub9c8\uc138\uc694. \ub2e8\uacc4\ubcc4\ub85c \uc54c\ub824\ub4dc\ub9b4\uac8c\uc694. \uba3c\uc800 \uac00\uc0c1\ud658\uacbd\ubd80\ud130 \ub9cc\ub4e4\uc5b4\ubd05\uc2dc\ub2e4."']}),"\n",(0,i.jsx)(n.h2,{id:"-\uc2e4\uc2b5",children:"\u26a1 \uc2e4\uc2b5"}),"\n",(0,i.jsx)(n.h3,{id:"1\ub2e8\uacc4-\ud504\ub85c\uc81d\ud2b8-\ucd08\uae30\ud654",children:"1\ub2e8\uacc4: \ud504\ub85c\uc81d\ud2b8 \ucd08\uae30\ud654"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\uba3c\uc800 \ud504\ub85c\uc81d\ud2b8 \ub514\ub809\ud1a0\ub9ac\ub97c \ub9cc\ub4e4\uace0 \uac00\uc0c1\ud658\uacbd\uc744 \uc124\uc815\ud574\ubd05\uc2dc\ub2e4."']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \ud504\ub85c\uc81d\ud2b8 \ub514\ub809\ud1a0\ub9ac \uc0dd\uc131\nmkdir bookstore\ncd bookstore\n\n# Git \ucd08\uae30\ud654\ngit init\ngit branch -M main\n\n# \uac00\uc0c1\ud658\uacbd \uc0dd\uc131 \ubc0f \ud65c\uc131\ud654\npython -m venv venv\nsource venv/bin/activate  # Windows: venv\\Scripts\\activate\n\n# \ud544\uc694\ud55c \ud328\ud0a4\uc9c0 \uc124\uce58\npip install sqlalchemy alembic psycopg2-binary python-dotenv\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\uc9c0\uc6b0"}),': "\uc124\uce58 \uc644\ub8cc\ud588\uc5b4\uc694!"']}),"\n",(0,i.jsx)(n.h3,{id:"2\ub2e8\uacc4-\ud504\ub85c\uc81d\ud2b8-\uad6c\uc870-\ub9cc\ub4e4\uae30",children:"2\ub2e8\uacc4: \ud504\ub85c\uc81d\ud2b8 \uad6c\uc870 \ub9cc\ub4e4\uae30"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\uc88b\uc544\uc694. \uc774\uc81c \ud504\ub85c\uc81d\ud2b8 \uad6c\uc870\ub97c \ub9cc\ub4e4\uc5b4\ubd05\uc2dc\ub2e4."']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir bookstore\ntouch bookstore/__init__.py\ntouch bookstore/models.py\ntouch bookstore/database.py\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# bookstore/database.py\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker\nimport os\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\nDATABASE_URL = os.getenv('DATABASE_URL', 'postgresql://localhost/bookstore_dev')\n\nengine = create_engine(DATABASE_URL)\nSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)\nBase = declarative_base()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3\ub2e8\uacc4-sqlalchemy-\ubaa8\ub378-\uc791\uc131",children:"3\ub2e8\uacc4: SQLAlchemy \ubaa8\ub378 \uc791\uc131"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\uc774\uc81c \ud575\uc2ec \ubaa8\ub378\ub4e4\uc744 \ub9cc\ub4e4\uc5b4\ubcfc\uae4c\uc694? \ucc45, \uc800\uc790, \uc0ac\uc6a9\uc790, \uc8fc\ubb38 \uc774\ub807\uac8c 4\uac1c \ud14c\uc774\ube14\uc774 \ud544\uc694\ud574\uc694."']}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\uc9c0\uc6b0"}),': "\ub124, \ud55c\ubc88 \uc791\uc131\ud574\ubcfc\uac8c\uc694!"']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# bookstore/models.py\nfrom sqlalchemy import Column, Integer, String, Text, Numeric, DateTime, ForeignKey, Boolean\nfrom sqlalchemy.orm import relationship\nfrom datetime import datetime\nfrom .database import Base\n\nclass User(Base):\n    __tablename__ = 'users'\n\n    id = Column(Integer, primary_key=True, index=True)\n    email = Column(String(100), unique=True, nullable=False, index=True)\n    username = Column(String(50), unique=True, nullable=False)\n    password_hash = Column(String(255), nullable=False)\n    is_active = Column(Boolean, default=True)\n    created_at = Column(DateTime, default=datetime.utcnow)\n\n    orders = relationship('Order', back_populates='user')\n\nclass Author(Base):\n    __tablename__ = 'authors'\n\n    id = Column(Integer, primary_key=True, index=True)\n    name = Column(String(100), nullable=False)\n    bio = Column(Text)\n    birth_year = Column(Integer)\n    created_at = Column(DateTime, default=datetime.utcnow)\n\n    books = relationship('Book', back_populates='author')\n\nclass Book(Base):\n    __tablename__ = 'books'\n\n    id = Column(Integer, primary_key=True, index=True)\n    title = Column(String(200), nullable=False, index=True)\n    isbn = Column(String(13), unique=True, nullable=False)\n    description = Column(Text)\n    price = Column(Numeric(10, 2), nullable=False)\n    stock = Column(Integer, default=0)\n    author_id = Column(Integer, ForeignKey('authors.id'), nullable=False)\n    published_year = Column(Integer)\n    created_at = Column(DateTime, default=datetime.utcnow)\n\n    author = relationship('Author', back_populates='books')\n\nclass Order(Base):\n    __tablename__ = 'orders'\n\n    id = Column(Integer, primary_key=True, index=True)\n    user_id = Column(Integer, ForeignKey('users.id'), nullable=False)\n    book_id = Column(Integer, ForeignKey('books.id'), nullable=False)\n    quantity = Column(Integer, nullable=False)\n    total_price = Column(Numeric(12, 2), nullable=False)\n    status = Column(String(20), default='pending')\n    order_date = Column(DateTime, default=datetime.utcnow)\n\n    user = relationship('User', back_populates='orders')\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\ud6cc\ub96d\ud574\uc694! \ubaa8\ub378 \uad6c\uc870\uac00 \uae54\ub054\ud558\ub124\uc694. \uad00\uacc4(relationship)\ub3c4 \uc798 \uc124\uc815\ud588\uc5b4\uc694."']}),"\n",(0,i.jsx)(n.h3,{id:"4\ub2e8\uacc4-alembic-\ucd08\uae30\ud654",children:"4\ub2e8\uacc4: Alembic \ucd08\uae30\ud654"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\uc774\uc81c Alembic\uc744 \ucd08\uae30\ud654\ud574\ubd05\uc2dc\ub2e4."']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Alembic \ucd08\uae30\ud654\nalembic init alembic\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\uc9c0\uc6b0"}),': "alembic \ud3f4\ub354\uc640 alembic.ini \ud30c\uc77c\uc774 \uc0dd\uc131\ub418\uc5c8\uc5b4\uc694!"']}),"\n",(0,i.jsx)(n.h3,{id:"5\ub2e8\uacc4-\ud658\uacbd-\uc124\uc815",children:"5\ub2e8\uacc4: \ud658\uacbd \uc124\uc815"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\ud658\uacbd\ubcc0\uc218 \ud30c\uc77c\uc744 \ub9cc\ub4e4\uace0 \uc124\uc815\uc744 \uc218\uc815\ud574\uc57c \ud574\uc694."']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# .env \ud30c\uc77c \uc0dd\uc131\ncat > .env << EOF\nDATABASE_URL=postgresql://bookstore_user:password@localhost/bookstore_dev\nEOF\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# alembic/env.py \uc218\uc815\nimport os\nimport sys\nfrom logging.config import fileConfig\nfrom sqlalchemy import engine_from_config, pool\nfrom alembic import context\nfrom dotenv import load_dotenv\n\n# \ud504\ub85c\uc81d\ud2b8 \ub8e8\ud2b8\ub97c Python \uacbd\ub85c\uc5d0 \ucd94\uac00\nsys.path.append(os.path.dirname(os.path.dirname(__file__)))\n\n# .env \ub85c\ub4dc\nload_dotenv()\n\n# Alembic Config \uac1d\uccb4\nconfig = context.config\n\n# \ud658\uacbd\ubcc0\uc218\uc5d0\uc11c \ub370\uc774\ud130\ubca0\uc774\uc2a4 URL \uac00\uc838\uc624\uae30\nconfig.set_main_option('sqlalchemy.url', os.getenv('DATABASE_URL'))\n\n# \ub85c\uae45 \uc124\uc815\nif config.config_file_name is not None:\n    fileConfig(config.config_file_name)\n\n# \ubaa8\ub378\uc758 MetaData \uac00\uc838\uc624\uae30\nfrom bookstore.database import Base\nfrom bookstore.models import User, Author, Book, Order\n\ntarget_metadata = Base.metadata\n\n# ... \ub098\uba38\uc9c0 \ucf54\ub4dc\ub294 \uae30\ubcf8\uac12 \uc720\uc9c0\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\uc9c0\uc6b0"}),': "\uc124\uc815\uc774 \uc880 \ubcf5\uc7a1\ud558\ub124\uc694..."']}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\ucc98\uc74c\uc5d4 \uadf8\ub807\uc8e0. \ud558\uc9c0\ub9cc \uc774\ub807\uac8c \ud55c \ubc88\ub9cc \uc124\uc815\ud558\uba74 \ub05d\uc774\uc5d0\uc694!"']}),"\n",(0,i.jsx)(n.h3,{id:"6\ub2e8\uacc4-\ucd08\uae30-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc0dd\uc131",children:"6\ub2e8\uacc4: \ucd08\uae30 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\uc774\uc81c \uc7ac\ubbf8\uc788\ub294 \ubd80\ubd84\uc774\uc5d0\uc694. autogenerate\ub85c \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc744 \uc790\ub3d9 \uc0dd\uc131\ud574\ubd05\uc2dc\ub2e4!"']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc790\ub3d9 \uc0dd\uc131\nalembic revision --autogenerate -m "create initial schema"\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\uc9c0\uc6b0"}),': "\uc640! \ud30c\uc77c\uc774 \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ub418\uc5c8\uc5b4\uc694!"']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \uc0dd\uc131\ub41c \ud30c\uc77c \ud655\uc778\ncat alembic/versions/xxxxx_create_initial_schema.py\n"})}),"\n",(0,i.jsx)(n.p,{children:"\uc0dd\uc131\ub41c \ub0b4\uc6a9:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"\"\"\"create initial schema\n\nRevision ID: 2a3b4c5d6e7f\nRevises:\nCreate Date: 2024-01-20 10:30:45.123456\n\"\"\"\nfrom alembic import op\nimport sqlalchemy as sa\n\nrevision = '2a3b4c5d6e7f'\ndown_revision = None\nbranch_labels = None\ndepends_on = None\n\ndef upgrade():\n    # Authors \ud14c\uc774\ube14\n    op.create_table('authors',\n        sa.Column('id', sa.Integer(), nullable=False),\n        sa.Column('name', sa.String(length=100), nullable=False),\n        sa.Column('bio', sa.Text(), nullable=True),\n        sa.Column('birth_year', sa.Integer(), nullable=True),\n        sa.Column('created_at', sa.DateTime(), nullable=True),\n        sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_authors_id'), 'authors', ['id'], unique=False)\n\n    # Users \ud14c\uc774\ube14\n    op.create_table('users',\n        sa.Column('id', sa.Integer(), nullable=False),\n        sa.Column('email', sa.String(length=100), nullable=False),\n        sa.Column('username', sa.String(length=50), nullable=False),\n        sa.Column('password_hash', sa.String(length=255), nullable=False),\n        sa.Column('is_active', sa.Boolean(), nullable=True),\n        sa.Column('created_at', sa.DateTime(), nullable=True),\n        sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_users_email'), 'users', ['email'], unique=True)\n    op.create_index(op.f('ix_users_id'), 'users', ['id'], unique=False)\n\n    # Books \ud14c\uc774\ube14 (authors\uc5d0 \uc758\uc874)\n    op.create_table('books',\n        sa.Column('id', sa.Integer(), nullable=False),\n        sa.Column('title', sa.String(length=200), nullable=False),\n        sa.Column('isbn', sa.String(length=13), nullable=False),\n        sa.Column('description', sa.Text(), nullable=True),\n        sa.Column('price', sa.Numeric(precision=10, scale=2), nullable=False),\n        sa.Column('stock', sa.Integer(), nullable=True),\n        sa.Column('author_id', sa.Integer(), nullable=False),\n        sa.Column('published_year', sa.Integer(), nullable=True),\n        sa.Column('created_at', sa.DateTime(), nullable=True),\n        sa.ForeignKeyConstraint(['author_id'], ['authors.id']),\n        sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_books_id'), 'books', ['id'], unique=False)\n    op.create_index(op.f('ix_books_title'), 'books', ['title'], unique=False)\n\n    # Orders \ud14c\uc774\ube14 (users, books\uc5d0 \uc758\uc874)\n    op.create_table('orders',\n        sa.Column('id', sa.Integer(), nullable=False),\n        sa.Column('user_id', sa.Integer(), nullable=False),\n        sa.Column('book_id', sa.Integer(), nullable=False),\n        sa.Column('quantity', sa.Integer(), nullable=False),\n        sa.Column('total_price', sa.Numeric(precision=12, scale=2), nullable=False),\n        sa.Column('status', sa.String(length=20), nullable=True),\n        sa.Column('order_date', sa.DateTime(), nullable=True),\n        sa.ForeignKeyConstraint(['book_id'], ['books.id']),\n        sa.ForeignKeyConstraint(['user_id'], ['users.id']),\n        sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_orders_id'), 'orders', ['id'], unique=False)\n\ndef downgrade():\n    op.drop_index(op.f('ix_orders_id'), table_name='orders')\n    op.drop_table('orders')\n    op.drop_index(op.f('ix_books_title'), table_name='books')\n    op.drop_index(op.f('ix_books_id'), table_name='books')\n    op.drop_table('books')\n    op.drop_index(op.f('ix_users_id'), table_name='users')\n    op.drop_index(op.f('ix_users_email'), table_name='users')\n    op.drop_table('users')\n    op.drop_index(op.f('ix_authors_id'), table_name='authors')\n    op.drop_table('authors')\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\uc644\ubcbd\ud574\uc694! \ubcf4\uc2dc\ub2e4\uc2dc\ud53c \ud14c\uc774\ube14 \uc0dd\uc131 \uc21c\uc11c\ub3c4 \uc790\ub3d9\uc73c\ub85c \uc62c\ubc14\ub974\uac8c \uc124\uc815\ub418\uc5c8\uc5b4\uc694. \uc678\ub798 \ud0a4 \uc758\uc874\uc131\uc744 Alembic\uc774 \uc790\ub3d9\uc73c\ub85c \ud30c\uc545\ud588\uc8e0."']}),"\n",(0,i.jsx)(n.h3,{id:"7\ub2e8\uacc4-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc2e4\ud589",children:"7\ub2e8\uacc4: \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc2e4\ud589"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\uc774\uc81c \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc801\uc6a9\ud574\ubd05\uc2dc\ub2e4."']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc2e4\ud589\nalembic upgrade head\n"})}),"\n",(0,i.jsx)(n.p,{children:"\ucd9c\ub825:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.\nINFO  [alembic.runtime.migration] Will assume transactional DDL.\nINFO  [alembic.runtime.migration] Running upgrade  -> 2a3b4c5d6e7f, create initial schema\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\uc9c0\uc6b0"}),': "\uc131\uacf5\ud588\uc5b4\uc694!"']}),"\n",(0,i.jsx)(n.h3,{id:"8\ub2e8\uacc4-\ub370\uc774\ud130\ubca0\uc774\uc2a4-\ud655\uc778",children:"8\ub2e8\uacc4: \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ud655\uc778"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# PostgreSQL \uc811\uc18d\npsql -d bookstore_dev -c "\\dt"\n\n# \ucd9c\ub825:\n#             List of relations\n#  Schema |       Name        | Type  |     Owner\n# --------+-------------------+-------+---------------\n#  public | alembic_version   | table | bookstore_user\n#  public | authors           | table | bookstore_user\n#  public | books             | table | bookstore_user\n#  public | orders            | table | bookstore_user\n#  public | users             | table | bookstore_user\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\uc644\ubcbd\ud569\ub2c8\ub2e4! \ubaa8\ub4e0 \ud14c\uc774\ube14\uc774 \uc798 \uc0dd\uc131\ub418\uc5c8\uc5b4\uc694."']}),"\n",(0,i.jsx)(n.h3,{id:"9\ub2e8\uacc4-git-\ucee4\ubc0b",children:"9\ub2e8\uacc4: Git \ucee4\ubc0b"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\ub9c8\uc9c0\ub9c9\uc73c\ub85c Git\uc5d0 \ucee4\ubc0b\ud574\ubd05\uc2dc\ub2e4."']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# .gitignore \uc0dd\uc131\ncat > .gitignore << EOF\nvenv/\n__pycache__/\n*.pyc\n.env\n*.db\n.DS_Store\nEOF\n\n# Git\uc5d0 \ucd94\uac00\ngit add .\ngit commit -m "feat: initial database schema with Alembic\n\n- Add SQLAlchemy models (User, Author, Book, Order)\n- Configure Alembic for migrations\n- Create initial migration for schema\n- Add environment variables support"\n\ngit status\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\uc9c0\uc6b0"}),': "\ucee4\ubc0b \uc644\ub8cc\ud588\uc5b4\uc694! \uc0dd\uac01\ubcf4\ub2e4 \uc5b4\ub835\uc9c0 \uc54a\ub124\uc694."']}),"\n",(0,i.jsx)(n.h2,{id:"-\uac80\uc99d",children:"\u2705 \uac80\uc99d"}),"\n",(0,i.jsx)(n.p,{children:"\ub2e4\uc74c \ud56d\ubaa9\ub4e4\uc744 \ud655\uc778\ud574\ubcf4\uc138\uc694:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# 1. \ud604\uc7ac \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ubc84\uc804 \ud655\uc778\nalembic current\n# 2a3b4c5d6e7f (head)\n\n# 2. \ud788\uc2a4\ud1a0\ub9ac \ud655\uc778\nalembic history\n# <base> -> 2a3b4c5d6e7f (head), create initial schema\n\n# 3. \ub2e4\uc6b4\uadf8\ub808\uc774\ub4dc \ud14c\uc2a4\ud2b8\nalembic downgrade base\nalembic current\n# (\ube44\uc5b4\uc788\uc74c)\n\n# 4. \ub2e4\uc2dc \uc5c5\uadf8\ub808\uc774\ub4dc\nalembic upgrade head\nalembic current\n# 2a3b4c5d6e7f (head)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-\ubc30\uc6b4-\ub0b4\uc6a9",children:"\ud83c\udf93 \ubc30\uc6b4 \ub0b4\uc6a9"}),"\n",(0,i.jsx)(n.h3,{id:"alembic-\uae30\ubcf8-\uc6cc\ud06c\ud50c\ub85c\uc6b0",children:"Alembic \uae30\ubcf8 \uc6cc\ud06c\ud50c\ub85c\uc6b0"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"alembic init"})," - Alembic \ucd08\uae30\ud654"]}),"\n",(0,i.jsx)(n.li,{children:"env.py \uc124\uc815 - \ubaa8\ub378 \uc5f0\uacb0"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"alembic revision --autogenerate"})," - \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"alembic upgrade head"})," - \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc2e4\ud589"]}),"\n",(0,i.jsx)(n.li,{children:"Git \ucee4\ubc0b"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\ud504\ub85c\uc81d\ud2b8-\uad6c\uc870",children:"\ud504\ub85c\uc81d\ud2b8 \uad6c\uc870"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"bookstore/\n\u251c\u2500\u2500 alembic/\n\u2502   \u251c\u2500\u2500 versions/\n\u2502   \u2502   \u2514\u2500\u2500 2a3b4c5d6e7f_create_initial_schema.py\n\u2502   \u251c\u2500\u2500 env.py\n\u2502   \u2514\u2500\u2500 script.py.mako\n\u251c\u2500\u2500 bookstore/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 database.py\n\u2502   \u2514\u2500\u2500 models.py\n\u251c\u2500\u2500 .env\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 alembic.ini\n\u2514\u2500\u2500 requirements.txt\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-\uc2e4\uc804-\ud301",children:"\ud83d\udca1 \uc2e4\uc804 \ud301"}),"\n",(0,i.jsx)(n.h3,{id:"1-\ud658\uacbd\ubcc4-\uc124\uc815-\uad00\ub9ac",children:"1. \ud658\uacbd\ubcc4 \uc124\uc815 \uad00\ub9ac"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# config.py\nimport os\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\nclass Config:\n    SQLALCHEMY_DATABASE_URI = os.getenv('DATABASE_URL')\n    SQLALCHEMY_TRACK_MODIFICATIONS = False\n\nclass DevelopmentConfig(Config):\n    DEBUG = True\n\nclass ProductionConfig(Config):\n    DEBUG = False\n\nconfig = {\n    'development': DevelopmentConfig,\n    'production': ProductionConfig,\n    'default': DevelopmentConfig\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-requirementstxt-\uad00\ub9ac",children:"2. requirements.txt \uad00\ub9ac"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",children:"# requirements.txt\nalembic==1.13.0\nsqlalchemy==2.0.23\npsycopg2-binary==2.9.9\npython-dotenv==1.0.0\n\n# requirements-dev.txt\n-r requirements.txt\npytest==7.4.3\npytest-cov==4.1.0\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ub124\uc774\ubc0d-\uaddc\uce59",children:"3. \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ub124\uc774\ubc0d \uaddc\uce59"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# \uba85\ud655\ud55c \uc774\ub984 \uc0ac\uc6a9\nalembic revision --autogenerate -m "create users and authors tables"\nalembic revision --autogenerate -m "add email verification to users"\nalembic revision --autogenerate -m "add indexes for search performance"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"-\ub2e4\uc74c\ub0a0",children:"\ud83d\udea8 \ub2e4\uc74c\ub0a0..."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\uc9c0\uc6b0"}),': "\ubbfc\uc218\ub2d8, \uc5b4\uc81c \ub9cc\ub4e0 Book \ubaa8\ub378\uc5d0 \uce74\ud14c\uace0\ub9ac \ud544\ub4dc\ub97c \ucd94\uac00\ud558\uace0 \uc2f6\uc5b4\uc694!"']}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ubbfc\uc218"}),': "\uc88b\uc544\uc694! \uadf8\ub7fc \ub2e4\uc74c \uc2dc\ub098\ub9ac\uc624\uc5d0\uc11c \uc2a4\ud0a4\ub9c8\ub97c \uc5b4\ub5bb\uac8c \ud655\uc7a5\ud558\ub294\uc9c0 \ubc30\uc6cc\ubd05\uc2dc\ub2e4."']}),"\n",(0,i.jsx)(n.h2,{id:"-\uad00\ub828-\ubb38\uc11c",children:"\ud83d\udd17 \uad00\ub828 \ubb38\uc11c"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"../basic/installation",children:"Alembic \uc124\uce58 \ubc0f \ucd08\uae30\ud654"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"../intermediate/autogenerate",children:"\uc790\ub3d9 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"../basic/first-migration",children:"\uccab \ubc88\uc9f8 \ub9c8\uc774\uadf8\ub808\uc774\uc158"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-\ub2e4\uc74c-\uc2dc\ub098\ub9ac\uc624",children:"\ud83c\udfaf \ub2e4\uc74c \uc2dc\ub098\ub9ac\uc624"}),"\n",(0,i.jsx)(n.p,{children:"\uccab \ud504\ub85c\uc81d\ud2b8 \uc14b\uc5c5\uc744 \uc131\uacf5\uc801\uc73c\ub85c \uc644\ub8cc\ud588\uc2b5\ub2c8\ub2e4!"}),"\n",(0,i.jsx)(n.p,{children:"\ub2e4\uc74c\uc5d0\ub294 \uae30\ub2a5\uc744 \ucd94\uac00\ud558\uba70 \uc2a4\ud0a4\ub9c8\ub97c \ud655\uc7a5\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6c1\ub2c8\ub2e4."}),"\n",(0,i.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,i.jsx)(n.a,{href:"./scenario-02-schema-evolution",children:"\uc2dc\ub098\ub9ac\uc624 2: \uc2a4\ud0a4\ub9c8 \ud655\uc7a5\ud558\uae30"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ud83d\udcac \ud1a0\ub860"}),": \uc5ec\ub7ec\ubd84\uc758 \uccab Alembic \ud504\ub85c\uc81d\ud2b8 \uacbd\ud5d8\uc740 \uc5b4\ub560\ub098\uc694?"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>r,x:()=>o});var s=l(6540);const i={},a=s.createContext(i);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);