"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[6030],{1501:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"ubuntu/scenarios/scenario-04-database-backend","title":"\uc2dc\ub098\ub9ac\uc624 4: \uc218\uc9c4\uc758 Python FastAPI \ubc31\uc5d4\ub4dc \uac1c\ubc1c","description":"\ubc31\uc5d4\ub4dc \uac1c\ubc1c\uc790 \uc218\uc9c4\uc774 WSL 2\uc5d0\uc11c FastAPI, PostgreSQL, Redis\ub85c \uc644\ubcbd\ud55c \ubc31\uc5d4\ub4dc API\ub97c \uad6c\ucd95\ud569\ub2c8\ub2e4.","source":"@site/docs/ubuntu/scenarios/scenario-04-database-backend.md","sourceDirName":"ubuntu/scenarios","slug":"/ubuntu/scenarios/scenario-04-database-backend","permalink":"/docs/ubuntu/scenarios/scenario-04-database-backend","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ubuntu/scenarios/scenario-04-database-backend.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"ubuntuSidebar","previous":{"title":"\uc2dc\ub098\ub9ac\uc624 3: \uc9c0\uc218\uc758 Next.js \uc6f9 \uac1c\ubc1c \ud658\uacbd","permalink":"/docs/ubuntu/scenarios/scenario-03-web-development"},"next":{"title":"\uc2dc\ub098\ub9ac\uc624 5: \ud604\uc6b0\uc758 DevOps \uc790\ub3d9\ud654 \ud658\uacbd","permalink":"/docs/ubuntu/scenarios/scenario-05-devops-automation"}}');var r=s(4848),d=s(8453);const i={sidebar_position:5},o="\uc2dc\ub098\ub9ac\uc624 4: \uc218\uc9c4\uc758 Python FastAPI \ubc31\uc5d4\ub4dc \uac1c\ubc1c",c={},a=[{value:"\ud83d\udccc \uc0c1\ud669 \uc124\uba85",id:"-\uc0c1\ud669-\uc124\uba85",level:2},{value:"\ud83c\udfaf \ubaa9\ud45c",id:"-\ubaa9\ud45c",level:2},{value:"\u26a1 \uc2e4\uc2b5",id:"-\uc2e4\uc2b5",level:2},{value:"1\ub2e8\uacc4: Python \ud658\uacbd \uc124\uc815",id:"1\ub2e8\uacc4-python-\ud658\uacbd-\uc124\uc815",level:3},{value:"2\ub2e8\uacc4: PostgreSQL \uc124\uce58 \ubc0f \uc124\uc815",id:"2\ub2e8\uacc4-postgresql-\uc124\uce58-\ubc0f-\uc124\uc815",level:3},{value:"3\ub2e8\uacc4: \ud504\ub85c\uc81d\ud2b8 \ucd08\uae30\ud654",id:"3\ub2e8\uacc4-\ud504\ub85c\uc81d\ud2b8-\ucd08\uae30\ud654",level:3},{value:"4\ub2e8\uacc4: \ud544\uc218 \ud328\ud0a4\uc9c0 \uc124\uce58",id:"4\ub2e8\uacc4-\ud544\uc218-\ud328\ud0a4\uc9c0-\uc124\uce58",level:3},{value:"5\ub2e8\uacc4: \ud504\ub85c\uc81d\ud2b8 \uc124\uc815",id:"5\ub2e8\uacc4-\ud504\ub85c\uc81d\ud2b8-\uc124\uc815",level:3},{value:"6\ub2e8\uacc4: \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubaa8\ub378",id:"6\ub2e8\uacc4-\ub370\uc774\ud130\ubca0\uc774\uc2a4-\ubaa8\ub378",level:3},{value:"7\ub2e8\uacc4: Pydantic \uc2a4\ud0a4\ub9c8",id:"7\ub2e8\uacc4-pydantic-\uc2a4\ud0a4\ub9c8",level:3},{value:"8\ub2e8\uacc4: CRUD \uc791\uc5c5",id:"8\ub2e8\uacc4-crud-\uc791\uc5c5",level:3},{value:"9\ub2e8\uacc4: API \ub77c\uc6b0\ud2b8",id:"9\ub2e8\uacc4-api-\ub77c\uc6b0\ud2b8",level:3},{value:"10\ub2e8\uacc4: \uba54\uc778 \uc560\ud50c\ub9ac\ucf00\uc774\uc158",id:"10\ub2e8\uacc4-\uba54\uc778-\uc560\ud50c\ub9ac\ucf00\uc774\uc158",level:3},{value:"11\ub2e8\uacc4: \uc11c\ubc84 \uc2e4\ud589",id:"11\ub2e8\uacc4-\uc11c\ubc84-\uc2e4\ud589",level:3},{value:"12\ub2e8\uacc4: API \ud14c\uc2a4\ud2b8",id:"12\ub2e8\uacc4-api-\ud14c\uc2a4\ud2b8",level:3},{value:"13\ub2e8\uacc4: Redis \uce90\uc2f1 \ucd94\uac00",id:"13\ub2e8\uacc4-redis-\uce90\uc2f1-\ucd94\uac00",level:3},{value:"\u2705 \uac80\uc99d",id:"-\uac80\uc99d",level:2},{value:"\ud83c\udf93 \ubc30\uc6b4 \ub0b4\uc6a9",id:"-\ubc30\uc6b4-\ub0b4\uc6a9",level:2},{value:"FastAPI \ud575\uc2ec",id:"fastapi-\ud575\uc2ec",level:3},{value:"\ub370\uc774\ud130\ubca0\uc774\uc2a4",id:"\ub370\uc774\ud130\ubca0\uc774\uc2a4",level:3},{value:"\ud83d\udca1 \uc2e4\uc804 \ud301",id:"-\uc2e4\uc804-\ud301",level:2},{value:"1. \uac1c\ubc1c \uc2a4\ud06c\ub9bd\ud2b8",id:"1-\uac1c\ubc1c-\uc2a4\ud06c\ub9bd\ud2b8",level:3},{value:"2. \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ub9c8\uc774\uadf8\ub808\uc774\uc158",id:"2-\ub370\uc774\ud130\ubca0\uc774\uc2a4-\ub9c8\uc774\uadf8\ub808\uc774\uc158",level:3},{value:"\ud83d\udd17 \uad00\ub828 \ubb38\uc11c",id:"-\uad00\ub828-\ubb38\uc11c",level:2},{value:"\ud83c\udfaf \ub2e4\uc74c \uc2dc\ub098\ub9ac\uc624",id:"-\ub2e4\uc74c-\uc2dc\ub098\ub9ac\uc624",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\uc2dc\ub098\ub9ac\uc624-4-\uc218\uc9c4\uc758-python-fastapi-\ubc31\uc5d4\ub4dc-\uac1c\ubc1c",children:"\uc2dc\ub098\ub9ac\uc624 4: \uc218\uc9c4\uc758 Python FastAPI \ubc31\uc5d4\ub4dc \uac1c\ubc1c"})}),"\n",(0,r.jsx)(n.p,{children:"\ubc31\uc5d4\ub4dc \uac1c\ubc1c\uc790 \uc218\uc9c4\uc774 WSL 2\uc5d0\uc11c FastAPI, PostgreSQL, Redis\ub85c \uc644\ubcbd\ud55c \ubc31\uc5d4\ub4dc API\ub97c \uad6c\ucd95\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.h2,{id:"-\uc0c1\ud669-\uc124\uba85",children:"\ud83d\udccc \uc0c1\ud669 \uc124\uba85"}),"\n",(0,r.jsx)(n.p,{children:"\uc218\uc9c4\uc740 \uc804\uc790\uc0c1\uac70\ub798 \ud50c\ub7ab\ud3fc\uc758 \ubc31\uc5d4\ub4dc API\ub97c \uac1c\ubc1c\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4. FastAPI\ub85c REST API\ub97c \uad6c\ucd95\ud558\uace0, PostgreSQL\ub85c \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\uba70, Redis\ub85c \uce90\uc2f1\uc744 \uad6c\ud604\ud569\ub2c8\ub2e4. WSL 2\uc5d0\uc11c \ubaa8\ub4e0 \uac1c\ubc1c \ud658\uacbd\uc744 \ub85c\uceec\ub85c \uad6c\uc131\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.h2,{id:"-\ubaa9\ud45c",children:"\ud83c\udfaf \ubaa9\ud45c"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Python \uac00\uc0c1 \ud658\uacbd \ubc0f pyenv \uc124\uc815"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 PostgreSQL \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc124\uce58"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 FastAPI \ud504\ub85c\uc81d\ud2b8 \uad6c\ucd95"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 SQLAlchemy ORM \ubc0f Alembic \ub9c8\uc774\uadf8\ub808\uc774\uc158"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Redis \uce90\uc2f1 \uad6c\ud604"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 API \ud14c\uc2a4\ud305 \ubc0f \ubb38\uc11c\ud654"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-\uc2e4\uc2b5",children:"\u26a1 \uc2e4\uc2b5"}),"\n",(0,r.jsx)(n.h3,{id:"1\ub2e8\uacc4-python-\ud658\uacbd-\uc124\uc815",children:"1\ub2e8\uacc4: Python \ud658\uacbd \uc124\uc815"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \ud544\uc218 \ud328\ud0a4\uc9c0 \uc124\uce58\nsudo apt update\nsudo apt install -y make build-essential libssl-dev zlib1g-dev \\\n  libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm \\\n  libncurses5-dev libncursesw5-dev xz-utils tk-dev \\\n  libffi-dev liblzma-dev python3-openssl git\n\n# pyenv \uc124\uce58\ncurl https://pyenv.run | bash\n\n# bashrc\uc5d0 \ucd94\uac00\ncat >> ~/.bashrc << \'EOF\'\nexport PYENV_ROOT="$HOME/.pyenv"\nexport PATH="$PYENV_ROOT/bin:$PATH"\neval "$(pyenv init -)"\neval "$(pyenv virtualenv-init -)"\nEOF\n\n# \ud658\uacbd \ubcc0\uc218 \ub85c\ub4dc\nsource ~/.bashrc\n\n# Python 3.12 \uc124\uce58\npyenv install 3.12.0\npyenv global 3.12.0\n\n# \ud655\uc778\npython --version  # Python 3.12.0\npip --version\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2\ub2e8\uacc4-postgresql-\uc124\uce58-\ubc0f-\uc124\uc815",children:"2\ub2e8\uacc4: PostgreSQL \uc124\uce58 \ubc0f \uc124\uc815"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# PostgreSQL \uc124\uce58\nsudo apt install -y postgresql postgresql-contrib\n\n# PostgreSQL \uc11c\ube44\uc2a4 \uc2dc\uc791\nsudo service postgresql start\n\n# \uc0c1\ud0dc \ud655\uc778\nsudo service postgresql status\n\n# postgres \uc0ac\uc6a9\uc790 \ube44\ubc00\ubc88\ud638 \uc124\uc815\nsudo -u postgres psql -c \"ALTER USER postgres PASSWORD 'postgres';\"\n\n# \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc0dd\uc131\nsudo -u postgres createdb ecommerce\n\n# \uc811\uc18d \ud14c\uc2a4\ud2b8\npsql -U postgres -d ecommerce\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"PostgreSQL\uc5d0\uc11c:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- \ud14c\uc774\ube14 \ud655\uc778\n\\dt\n\n-- \ub098\uac00\uae30\n\\q\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3\ub2e8\uacc4-\ud504\ub85c\uc81d\ud2b8-\ucd08\uae30\ud654",children:"3\ub2e8\uacc4: \ud504\ub85c\uc81d\ud2b8 \ucd08\uae30\ud654"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \ud504\ub85c\uc81d\ud2b8 \ub514\ub809\ud1a0\ub9ac \uc0dd\uc131\nmkdir -p ~/projects/ecommerce-api\ncd ~/projects/ecommerce-api\n\n# \uac00\uc0c1 \ud658\uacbd \uc0dd\uc131\npython -m venv venv\n\n# \uac00\uc0c1 \ud658\uacbd \ud65c\uc131\ud654\nsource venv/bin/activate\n\n# \ud504\ub85c\uc81d\ud2b8 \uad6c\uc870 \uc0dd\uc131\nmkdir -p app/{api,core,models,schemas,crud}\ntouch app/__init__.py\ntouch app/main.py\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4\ub2e8\uacc4-\ud544\uc218-\ud328\ud0a4\uc9c0-\uc124\uce58",children:"4\ub2e8\uacc4: \ud544\uc218 \ud328\ud0a4\uc9c0 \uc124\uce58"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"requirements.txt"})," \uc0dd\uc131:"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-txt",children:"fastapi==0.104.1\nuvicorn[standard]==0.24.0\nsqlalchemy==2.0.23\npsycopg2-binary==2.9.9\nalembic==1.12.1\npydantic==2.5.0\npydantic-settings==2.1.0\npython-jose[cryptography]==3.3.0\npasslib[bcrypt]==1.7.4\npython-multipart==0.0.6\nredis==5.0.1\npytest==7.4.3\nhttpx==0.25.2\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \ud328\ud0a4\uc9c0 \uc124\uce58\npip install -r requirements.txt\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5\ub2e8\uacc4-\ud504\ub85c\uc81d\ud2b8-\uc124\uc815",children:"5\ub2e8\uacc4: \ud504\ub85c\uc81d\ud2b8 \uc124\uc815"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"app/core/config.py"}),":"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from pydantic_settings import BaseSettings\n\nclass Settings(BaseSettings):\n    PROJECT_NAME: str = "E-Commerce API"\n    VERSION: str = "1.0.0"\n    API_V1_STR: str = "/api/v1"\n\n    # Database\n    POSTGRES_SERVER: str = "localhost"\n    POSTGRES_USER: str = "postgres"\n    POSTGRES_PASSWORD: str = "postgres"\n    POSTGRES_DB: str = "ecommerce"\n\n    @property\n    def DATABASE_URL(self) -> str:\n        return f"postgresql://{self.POSTGRES_USER}:{self.POSTGRES_PASSWORD}@{self.POSTGRES_SERVER}/{self.POSTGRES_DB}"\n\n    # Redis\n    REDIS_HOST: str = "localhost"\n    REDIS_PORT: int = 6379\n\n    # JWT\n    SECRET_KEY: str = "your-secret-key-change-this"\n    ALGORITHM: str = "HS256"\n    ACCESS_TOKEN_EXPIRE_MINUTES: int = 30\n\n    class Config:\n        env_file = ".env"\n\nsettings = Settings()\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:".env"})," \ud30c\uc77c:"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-env",children:"POSTGRES_SERVER=localhost\nPOSTGRES_USER=postgres\nPOSTGRES_PASSWORD=postgres\nPOSTGRES_DB=ecommerce\nREDIS_HOST=localhost\nSECRET_KEY=your-super-secret-key-change-in-production\n"})}),"\n",(0,r.jsx)(n.h3,{id:"6\ub2e8\uacc4-\ub370\uc774\ud130\ubca0\uc774\uc2a4-\ubaa8\ub378",children:"6\ub2e8\uacc4: \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubaa8\ub378"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"app/core/database.py"}),":"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from sqlalchemy import create_engine\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker\n\nfrom app.core.config import settings\n\nengine = create_engine(settings.DATABASE_URL)\nSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)\n\nBase = declarative_base()\n\ndef get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"app/models/product.py"}),":"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from sqlalchemy import Column, Integer, String, Float, Text, DateTime\nfrom sqlalchemy.sql import func\n\nfrom app.core.database import Base\n\nclass Product(Base):\n    __tablename__ = "products"\n\n    id = Column(Integer, primary_key=True, index=True)\n    name = Column(String(255), nullable=False, index=True)\n    description = Column(Text)\n    price = Column(Float, nullable=False)\n    stock = Column(Integer, default=0)\n    category = Column(String(100), index=True)\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), onupdate=func.now())\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"app/models/user.py"}),":"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from sqlalchemy import Column, Integer, String, Boolean, DateTime\nfrom sqlalchemy.sql import func\n\nfrom app.core.database import Base\n\nclass User(Base):\n    __tablename__ = "users"\n\n    id = Column(Integer, primary_key=True, index=True)\n    email = Column(String(255), unique=True, index=True, nullable=False)\n    username = Column(String(100), unique=True, index=True)\n    hashed_password = Column(String(255), nullable=False)\n    is_active = Column(Boolean, default=True)\n    is_superuser = Column(Boolean, default=False)\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n'})}),"\n",(0,r.jsx)(n.h3,{id:"7\ub2e8\uacc4-pydantic-\uc2a4\ud0a4\ub9c8",children:"7\ub2e8\uacc4: Pydantic \uc2a4\ud0a4\ub9c8"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"app/schemas/product.py"}),":"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from pydantic import BaseModel, Field\nfrom typing import Optional\nfrom datetime import datetime\n\nclass ProductBase(BaseModel):\n    name: str = Field(..., min_length=1, max_length=255)\n    description: Optional[str] = None\n    price: float = Field(..., gt=0)\n    stock: int = Field(default=0, ge=0)\n    category: str\n\nclass ProductCreate(ProductBase):\n    pass\n\nclass ProductUpdate(BaseModel):\n    name: Optional[str] = None\n    description: Optional[str] = None\n    price: Optional[float] = None\n    stock: Optional[int] = None\n    category: Optional[str] = None\n\nclass ProductInDB(ProductBase):\n    id: int\n    created_at: datetime\n    updated_at: Optional[datetime] = None\n\n    class Config:\n        from_attributes = True\n"})}),"\n",(0,r.jsx)(n.h3,{id:"8\ub2e8\uacc4-crud-\uc791\uc5c5",children:"8\ub2e8\uacc4: CRUD \uc791\uc5c5"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"app/crud/product.py"}),":"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from sqlalchemy.orm import Session\nfrom typing import List, Optional\n\nfrom app.models.product import Product\nfrom app.schemas.product import ProductCreate, ProductUpdate\n\ndef get_product(db: Session, product_id: int) -> Optional[Product]:\n    return db.query(Product).filter(Product.id == product_id).first()\n\ndef get_products(\n    db: Session, skip: int = 0, limit: int = 100\n) -> List[Product]:\n    return db.query(Product).offset(skip).limit(limit).all()\n\ndef create_product(db: Session, product: ProductCreate) -> Product:\n    db_product = Product(**product.model_dump())\n    db.add(db_product)\n    db.commit()\n    db.refresh(db_product)\n    return db_product\n\ndef update_product(\n    db: Session, product_id: int, product: ProductUpdate\n) -> Optional[Product]:\n    db_product = get_product(db, product_id)\n    if not db_product:\n        return None\n\n    update_data = product.model_dump(exclude_unset=True)\n    for field, value in update_data.items():\n        setattr(db_product, field, value)\n\n    db.commit()\n    db.refresh(db_product)\n    return db_product\n\ndef delete_product(db: Session, product_id: int) -> bool:\n    db_product = get_product(db, product_id)\n    if not db_product:\n        return False\n\n    db.delete(db_product)\n    db.commit()\n    return True\n"})}),"\n",(0,r.jsx)(n.h3,{id:"9\ub2e8\uacc4-api-\ub77c\uc6b0\ud2b8",children:"9\ub2e8\uacc4: API \ub77c\uc6b0\ud2b8"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"app/api/products.py"}),":"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from fastapi import APIRouter, Depends, HTTPException, status\nfrom sqlalchemy.orm import Session\nfrom typing import List\n\nfrom app.core.database import get_db\nfrom app.schemas.product import ProductCreate, ProductUpdate, ProductInDB\nfrom app.crud import product as crud_product\n\nrouter = APIRouter()\n\n@router.post("/", response_model=ProductInDB, status_code=status.HTTP_201_CREATED)\ndef create_product(\n    product: ProductCreate,\n    db: Session = Depends(get_db)\n):\n    """\uc81c\ud488 \uc0dd\uc131"""\n    return crud_product.create_product(db=db, product=product)\n\n@router.get("/", response_model=List[ProductInDB])\ndef read_products(\n    skip: int = 0,\n    limit: int = 100,\n    db: Session = Depends(get_db)\n):\n    """\uc81c\ud488 \ubaa9\ub85d \uc870\ud68c"""\n    products = crud_product.get_products(db, skip=skip, limit=limit)\n    return products\n\n@router.get("/{product_id}", response_model=ProductInDB)\ndef read_product(\n    product_id: int,\n    db: Session = Depends(get_db)\n):\n    """\ud2b9\uc815 \uc81c\ud488 \uc870\ud68c"""\n    product = crud_product.get_product(db, product_id=product_id)\n    if not product:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND,\n            detail="Product not found"\n        )\n    return product\n\n@router.put("/{product_id}", response_model=ProductInDB)\ndef update_product(\n    product_id: int,\n    product: ProductUpdate,\n    db: Session = Depends(get_db)\n):\n    """\uc81c\ud488 \uc5c5\ub370\uc774\ud2b8"""\n    updated_product = crud_product.update_product(\n        db, product_id=product_id, product=product\n    )\n    if not updated_product:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND,\n            detail="Product not found"\n        )\n    return updated_product\n\n@router.delete("/{product_id}", status_code=status.HTTP_204_NO_CONTENT)\ndef delete_product(\n    product_id: int,\n    db: Session = Depends(get_db)\n):\n    """\uc81c\ud488 \uc0ad\uc81c"""\n    success = crud_product.delete_product(db, product_id=product_id)\n    if not success:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND,\n            detail="Product not found"\n        )\n'})}),"\n",(0,r.jsx)(n.h3,{id:"10\ub2e8\uacc4-\uba54\uc778-\uc560\ud50c\ub9ac\ucf00\uc774\uc158",children:"10\ub2e8\uacc4: \uba54\uc778 \uc560\ud50c\ub9ac\ucf00\uc774\uc158"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"app/main.py"}),":"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from fastapi import FastAPI\nfrom fastapi.middleware.cors import CORSMiddleware\n\nfrom app.core.config import settings\nfrom app.core.database import engine, Base\nfrom app.api import products\n\n# \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ud14c\uc774\ube14 \uc0dd\uc131\nBase.metadata.create_all(bind=engine)\n\napp = FastAPI(\n    title=settings.PROJECT_NAME,\n    version=settings.VERSION,\n    openapi_url=f"{settings.API_V1_STR}/openapi.json"\n)\n\n# CORS \uc124\uc815\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=["*"],\n    allow_credentials=True,\n    allow_methods=["*"],\n    allow_headers=["*"],\n)\n\n# API \ub77c\uc6b0\ud130 \ub4f1\ub85d\napp.include_router(\n    products.router,\n    prefix=f"{settings.API_V1_STR}/products",\n    tags=["products"]\n)\n\n@app.get("/")\ndef root():\n    return {\n        "message": "Welcome to E-Commerce API",\n        "docs": "/docs",\n        "version": settings.VERSION\n    }\n\n@app.get("/health")\ndef health_check():\n    return {"status": "healthy"}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"11\ub2e8\uacc4-\uc11c\ubc84-\uc2e4\ud589",children:"11\ub2e8\uacc4: \uc11c\ubc84 \uc2e4\ud589"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \uac1c\ubc1c \uc11c\ubc84 \uc2dc\uc791\nuvicorn app.main:app --reload --host 0.0.0.0 --port 8000\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\ucd9c\ub825:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)\nINFO:     Started reloader process\nINFO:     Started server process\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c"})," ",(0,r.jsx)(n.code,{children:"http://localhost:8000/docs"})," \uc811\uc18d"]}),"\n",(0,r.jsx)(n.h3,{id:"12\ub2e8\uacc4-api-\ud14c\uc2a4\ud2b8",children:"12\ub2e8\uacc4: API \ud14c\uc2a4\ud2b8"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \uc81c\ud488 \uc0dd\uc131\ncurl -X POST "http://localhost:8000/api/v1/products/" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "name": "Laptop",\n    "description": "High-performance laptop",\n    "price": 1299.99,\n    "stock": 50,\n    "category": "Electronics"\n  }\'\n\n# \uc81c\ud488 \ubaa9\ub85d \uc870\ud68c\ncurl "http://localhost:8000/api/v1/products/"\n\n# \ud2b9\uc815 \uc81c\ud488 \uc870\ud68c\ncurl "http://localhost:8000/api/v1/products/1"\n\n# \uc81c\ud488 \uc5c5\ub370\uc774\ud2b8\ncurl -X PUT "http://localhost:8000/api/v1/products/1" \\\n  -H "Content-Type: application/json" \\\n  -d \'{"price": 1199.99, "stock": 45}\'\n\n# \uc81c\ud488 \uc0ad\uc81c\ncurl -X DELETE "http://localhost:8000/api/v1/products/1"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"13\ub2e8\uacc4-redis-\uce90\uc2f1-\ucd94\uac00",children:"13\ub2e8\uacc4: Redis \uce90\uc2f1 \ucd94\uac00"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Redis \uc124\uce58\nsudo apt install redis-server\n\n# Redis \uc2dc\uc791\nsudo service redis-server start\n\n# Redis CLI \ud14c\uc2a4\ud2b8\nredis-cli ping  # PONG\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"app/core/cache.py"}),":"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import redis\nimport json\nfrom app.core.config import settings\n\nredis_client = redis.Redis(\n    host=settings.REDIS_HOST,\n    port=settings.REDIS_PORT,\n    decode_responses=True\n)\n\ndef get_cache(key: str):\n    value = redis_client.get(key)\n    return json.loads(value) if value else None\n\ndef set_cache(key: str, value: any, expire: int = 300):\n    redis_client.setex(key, expire, json.dumps(value))\n\ndef delete_cache(key: str):\n    redis_client.delete(key)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-\uac80\uc99d",children:"\u2705 \uac80\uc99d"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \ud655\uc778\npsql -U postgres -d ecommerce -c "SELECT COUNT(*) FROM products;"\n\n# API \uc751\ub2f5 \ud655\uc778\ncurl -s http://localhost:8000/health | jq\n\n# Redis \ud655\uc778\nredis-cli ping\n\n# \ud14c\uc2a4\ud2b8 \uc2e4\ud589\npytest tests/ -v\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-\ubc30\uc6b4-\ub0b4\uc6a9",children:"\ud83c\udf93 \ubc30\uc6b4 \ub0b4\uc6a9"}),"\n",(0,r.jsx)(n.h3,{id:"fastapi-\ud575\uc2ec",children:"FastAPI \ud575\uc2ec"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\uc790\ub3d9 \ubb38\uc11c\ud654"}),": ",(0,r.jsx)(n.code,{children:"/docs"}),", ",(0,r.jsx)(n.code,{children:"/redoc"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud0c0\uc785 \uac80\uc99d"}),": Pydantic \uc2a4\ud0a4\ub9c8"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\uc758\uc874\uc131 \uc8fc\uc785"}),": Depends()"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ube44\ub3d9\uae30 \uc9c0\uc6d0"}),": async/await"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\ub370\uc774\ud130\ubca0\uc774\uc2a4",children:"\ub370\uc774\ud130\ubca0\uc774\uc2a4"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SQLAlchemy ORM"}),": \uac1d\uccb4-\uad00\uacc4 \ub9e4\ud551"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158"}),": Alembic"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\uc138\uc158 \uad00\ub9ac"}),": Context manager"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-\uc2e4\uc804-\ud301",children:"\ud83d\udca1 \uc2e4\uc804 \ud301"}),"\n",(0,r.jsx)(n.h3,{id:"1-\uac1c\ubc1c-\uc2a4\ud06c\ub9bd\ud2b8",children:"1. \uac1c\ubc1c \uc2a4\ud06c\ub9bd\ud2b8"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"scripts/dev.sh"}),":"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"#!/bin/bash\nsudo service postgresql start\nsudo service redis-server start\nsource venv/bin/activate\nuvicorn app.main:app --reload\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-\ub370\uc774\ud130\ubca0\uc774\uc2a4-\ub9c8\uc774\uadf8\ub808\uc774\uc158",children:"2. \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ub9c8\uc774\uadf8\ub808\uc774\uc158"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Alembic \ucd08\uae30\ud654\nalembic init alembic\n\n# \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131\nalembic revision --autogenerate -m "create products table"\n\n# \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc2e4\ud589\nalembic upgrade head\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-\uad00\ub828-\ubb38\uc11c",children:"\ud83d\udd17 \uad00\ub828 \ubb38\uc11c"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://fastapi.tiangolo.com/",children:"FastAPI \uacf5\uc2dd \ubb38\uc11c"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.sqlalchemy.org/",children:"SQLAlchemy \ubb38\uc11c"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://alembic.sqlalchemy.org/",children:"Alembic \ubb38\uc11c"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-\ub2e4\uc74c-\uc2dc\ub098\ub9ac\uc624",children:"\ud83c\udfaf \ub2e4\uc74c \uc2dc\ub098\ub9ac\uc624"}),"\n",(0,r.jsx)(n.p,{children:"\uc218\uc9c4\uc740 \uc644\ubcbd\ud55c \ubc31\uc5d4\ub4dc API\ub97c \uad6c\ucd95\ud588\uc2b5\ub2c8\ub2e4!"}),"\n",(0,r.jsx)(n.p,{children:"\ub2e4\uc74c\uc740 DevOps \uc5d4\uc9c0\ub2c8\uc5b4 \ud604\uc6b0\uc758 \uc790\ub3d9\ud654 \ud658\uacbd \uad6c\ucd95 \uc774\uc57c\uae30\uc785\ub2c8\ub2e4..."}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,r.jsx)(n.a,{href:"./scenario-05-devops-automation",children:"\uc2dc\ub098\ub9ac\uc624 5: DevOps \ubc0f CI/CD \uc790\ub3d9\ud654"}),"\uc5d0\uc11c \uacc4\uc18d\ub429\ub2c8\ub2e4."]})]})}function p(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>o});var t=s(6540);const r={},d=t.createContext(r);function i(e){const n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);