"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[3618],{399:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"sqlalchemy/intermediate/intro","title":"\uc911\uae09\ud3b8 \uc18c\uac1c","description":"SQLAlchemy\uc758 \ud575\uc2ec \uae30\ub2a5\uc744 \ub9c8\uc2a4\ud130\ud558\uc5ec \uc2e4\ubb34 \uc218\uc900\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uac1c\ubc1c\ud558\uc138\uc694.","source":"@site/docs/sqlalchemy/intermediate/intro.md","sourceDirName":"sqlalchemy/intermediate","slug":"/sqlalchemy/intermediate/intro","permalink":"/tobias-docs/comp-1/docs/sqlalchemy/intermediate/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/sqlalchemy/intermediate/intro.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"sqlalchemySidebar","previous":{"title":"PostgreSQL \ub370\uc774\ud130 \ud0c0\uc785 \ub9e4\ud551","permalink":"/tobias-docs/comp-1/docs/sqlalchemy/basic/data-types"},"next":{"title":"\uad00\uacc4(Relationship) \uc815\uc758","permalink":"/tobias-docs/comp-1/docs/sqlalchemy/intermediate/relationships"}}');var l=s(4848),r=s(8453);const o={sidebar_position:1},d="\uc911\uae09\ud3b8 \uc18c\uac1c",t={},a=[{value:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c",id:"-\ud559\uc2b5-\ubaa9\ud45c",level:2},{value:"\ud83d\udcda \ud559\uc2b5 \uc21c\uc11c",id:"-\ud559\uc2b5-\uc21c\uc11c",level:2},{value:"1. \uad00\uacc4(Relationship) \uc815\uc758",id:"1-\uad00\uacc4relationship-\uc815\uc758",level:3},{value:"2. \ucffc\ub9ac \uc791\uc131",id:"2-\ucffc\ub9ac-\uc791\uc131",level:3},{value:"3. Join\uacfc \ub85c\ub529 \uc804\ub7b5",id:"3-join\uacfc-\ub85c\ub529-\uc804\ub7b5",level:3},{value:"4. \uc138\uc158 \uad00\ub9ac",id:"4-\uc138\uc158-\uad00\ub9ac",level:3},{value:"\ud83d\udca1 \uc911\uae09\ud3b8\uc758 \ud575\uc2ec",id:"-\uc911\uae09\ud3b8\uc758-\ud575\uc2ec",level:2},{value:"\uad00\uacc4 vs Foreign Key",id:"\uad00\uacc4-vs-foreign-key",level:3},{value:"N+1 \ucffc\ub9ac \ubb38\uc81c",id:"n1-\ucffc\ub9ac-\ubb38\uc81c",level:3},{value:"\ud83d\ude80 \ud559\uc2b5 \ub85c\ub4dc\ub9f5",id:"-\ud559\uc2b5-\ub85c\ub4dc\ub9f5",level:2},{value:"\ud83d\udcd6 \uac01 \uc8fc\uc81c\ubcc4 \uac1c\uc694",id:"-\uac01-\uc8fc\uc81c\ubcc4-\uac1c\uc694",level:2},{value:"1\ufe0f\u20e3 \uad00\uacc4(Relationships)",id:"1\ufe0f\u20e3-\uad00\uacc4relationships",level:3},{value:"2\ufe0f\u20e3 \ucffc\ub9ac(Queries)",id:"2\ufe0f\u20e3-\ucffc\ub9acqueries",level:3},{value:"3\ufe0f\u20e3 Join\uacfc \ub85c\ub529",id:"3\ufe0f\u20e3-join\uacfc-\ub85c\ub529",level:3},{value:"4\ufe0f\u20e3 \uc138\uc158 \uad00\ub9ac",id:"4\ufe0f\u20e3-\uc138\uc158-\uad00\ub9ac",level:3},{value:"\ud83c\udfaf \uc2e4\uc804 \uc608\uc81c",id:"-\uc2e4\uc804-\uc608\uc81c",level:2},{value:"\u26a1 \uc131\ub2a5 \ucd5c\uc801\ud654 \ubbf8\ub9ac\ubcf4\uae30",id:"-\uc131\ub2a5-\ucd5c\uc801\ud654-\ubbf8\ub9ac\ubcf4\uae30",level:2},{value:"\ud83d\udd17 \uc2dc\uc791\ud558\uae30",id:"-\uc2dc\uc791\ud558\uae30",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"\uc911\uae09\ud3b8-\uc18c\uac1c",children:"\uc911\uae09\ud3b8 \uc18c\uac1c"})}),"\n",(0,l.jsx)(n.p,{children:"SQLAlchemy\uc758 \ud575\uc2ec \uae30\ub2a5\uc744 \ub9c8\uc2a4\ud130\ud558\uc5ec \uc2e4\ubb34 \uc218\uc900\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uac1c\ubc1c\ud558\uc138\uc694."}),"\n",(0,l.jsx)(n.h2,{id:"-\ud559\uc2b5-\ubaa9\ud45c",children:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c"}),"\n",(0,l.jsx)(n.p,{children:"\uc911\uae09\ud3b8\uc5d0\uc11c\ub294 \uc2e4\ubb34\uc5d0\uc11c \ubc18\ub4dc\uc2dc \ud544\uc694\ud55c SQLAlchemy\uc758 \ud575\uc2ec \uae30\ub2a5\ub4e4\uc744 \ubc30\uc6c1\ub2c8\ub2e4:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\uad00\uacc4(Relationship) \uc815\uc758"}),": \ud14c\uc774\ube14 \uac04 \uad00\uacc4\ub97c ORM\uc73c\ub85c \ud45c\ud604"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ucffc\ub9ac \uc791\uc131"}),": \ubcf5\uc7a1\ud55c \uc870\uac74\uc758 \ub370\uc774\ud130 \uc870\ud68c"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Join \ucd5c\uc801\ud654"}),": Eager/Lazy Loading\uc73c\ub85c \uc131\ub2a5 \ucd5c\uc801\ud654"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\uc138\uc158 \uad00\ub9ac"}),": \ud2b8\ub79c\uc7ad\uc158\uacfc \uc138\uc158 \uc0dd\uba85\uc8fc\uae30 \uc774\ud574"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"-\ud559\uc2b5-\uc21c\uc11c",children:"\ud83d\udcda \ud559\uc2b5 \uc21c\uc11c"}),"\n",(0,l.jsx)(n.h3,{id:"1-\uad00\uacc4relationship-\uc815\uc758",children:"1. \uad00\uacc4(Relationship) \uc815\uc758"}),"\n",(0,l.jsx)(n.p,{children:"\ud14c\uc774\ube14 \uac04\uc758 \uad00\uacc4\ub97c Python \uac1d\uccb4\ub85c \ub2e4\ub8e8\ub294 \ubc29\ubc95\uc744 \ubc30\uc6c1\ub2c8\ub2e4."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'class User(Base):\n    __tablename__ = \'users\'\n    id: Mapped[int] = mapped_column(primary_key=True)\n    posts: Mapped[list["Post"]] = relationship(back_populates="author")\n\nclass Post(Base):\n    __tablename__ = \'posts\'\n    id: Mapped[int] = mapped_column(primary_key=True)\n    user_id: Mapped[int] = mapped_column(ForeignKey(\'users.id\'))\n    author: Mapped["User"] = relationship(back_populates="posts")\n\n# \uc0ac\uc6a9\nuser = session.get(User, 1)\nfor post in user.posts:  # \uad00\uacc4\ub97c \ud1b5\ud55c \uc811\uadfc\n    print(post.title)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"2-\ucffc\ub9ac-\uc791\uc131",children:"2. \ucffc\ub9ac \uc791\uc131"}),"\n",(0,l.jsx)(n.p,{children:"SQLAlchemy\uc758 \uac15\ub825\ud55c \ucffc\ub9ac API\ub97c \ud65c\uc6a9\ud569\ub2c8\ub2e4."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"from sqlalchemy import select\n\n# \ubcf5\uc7a1\ud55c \uc870\uac74\nstmt = select(User).where(\n    User.age > 25,\n    User.email.like('%@gmail.com')\n).order_by(User.created_at.desc())\n\nusers = session.execute(stmt).scalars().all()\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3-join\uacfc-\ub85c\ub529-\uc804\ub7b5",children:"3. Join\uacfc \ub85c\ub529 \uc804\ub7b5"}),"\n",(0,l.jsx)(n.p,{children:"N+1 \ucffc\ub9ac \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uace0 \uc131\ub2a5\uc744 \ucd5c\uc801\ud654\ud569\ub2c8\ub2e4."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"from sqlalchemy.orm import selectinload\n\n# Eager Loading\uc73c\ub85c N+1 \ubb38\uc81c \ud574\uacb0\nstmt = select(User).options(selectinload(User.posts))\nusers = session.execute(stmt).scalars().all()\n\n# \ub2e8 2\uac1c\uc758 \ucffc\ub9ac\ub85c \ubaa8\ub4e0 \ub370\uc774\ud130 \ub85c\ub4dc\n"})}),"\n",(0,l.jsx)(n.h3,{id:"4-\uc138\uc158-\uad00\ub9ac",children:"4. \uc138\uc158 \uad00\ub9ac"}),"\n",(0,l.jsx)(n.p,{children:"\uc138\uc158\uc758 \uc0dd\uba85\uc8fc\uae30\uc640 \ud2b8\ub79c\uc7ad\uc158\uc744 \uc62c\ubc14\ub974\uac8c \uad00\ub9ac\ud569\ub2c8\ub2e4."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# \uc138\uc158 \ud328\ud134\nwith Session(engine) as session:\n    with session.begin():\n        # \ud2b8\ub79c\uc7ad\uc158 \ub0b4\uc5d0\uc11c \uc791\uc5c5\n        user = User(username='alice')\n        session.add(user)\n        # \uc790\ub3d9 \ucee4\ubc0b/\ub864\ubc31\n"})}),"\n",(0,l.jsx)(n.h2,{id:"-\uc911\uae09\ud3b8\uc758-\ud575\uc2ec",children:"\ud83d\udca1 \uc911\uae09\ud3b8\uc758 \ud575\uc2ec"}),"\n",(0,l.jsx)(n.h3,{id:"\uad00\uacc4-vs-foreign-key",children:"\uad00\uacc4 vs Foreign Key"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# \u274c Foreign Key\ub9cc \uc0ac\uc6a9\nclass Post(Base):\n    user_id: Mapped[int] = mapped_column(ForeignKey('users.id'))\n    # \uc0ac\uc6a9 \uc2dc: post.user_id\ub85c\ub9cc \uc811\uadfc \uac00\ub2a5\n\n# \u2705 Relationship \ucd94\uac00\nclass Post(Base):\n    user_id: Mapped[int] = mapped_column(ForeignKey('users.id'))\n    author: Mapped[\"User\"] = relationship()\n    # \uc0ac\uc6a9 \uc2dc: post.author\ub85c \uac1d\uccb4 \uc811\uadfc!\n"})}),"\n",(0,l.jsx)(n.h3,{id:"n1-\ucffc\ub9ac-\ubb38\uc81c",children:"N+1 \ucffc\ub9ac \ubb38\uc81c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# \u274c N+1 \ucffc\ub9ac \ubc1c\uc0dd\nusers = session.execute(select(User)).scalars().all()\nfor user in users:\n    print(user.posts)  # \uac01 \uc0ac\uc6a9\uc790\ub9c8\ub2e4 \ucffc\ub9ac!\n\n# \u2705 Eager Loading\nstmt = select(User).options(selectinload(User.posts))\nusers = session.execute(stmt).scalars().all()\nfor user in users:\n    print(user.posts)  # \ucd94\uac00 \ucffc\ub9ac \uc5c6\uc74c!\n"})}),"\n",(0,l.jsx)(n.h2,{id:"-\ud559\uc2b5-\ub85c\ub4dc\ub9f5",children:"\ud83d\ude80 \ud559\uc2b5 \ub85c\ub4dc\ub9f5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\uae30\ucd08\ud3b8 \ubcf5\uc2b5\n    \u2193\n\uad00\uacc4 \uc815\uc758 \ub9c8\uc2a4\ud130 \u2190 \uac00\uc7a5 \uc911\uc694!\n    \u2193\n\ucffc\ub9ac \uc791\uc131 \uc5f0\uc2b5\n    \u2193\nJoin \ucd5c\uc801\ud654\n    \u2193\n\uc138\uc158 \uad00\ub9ac \ud328\ud134\n    \u2193\n\uace0\uae09\ud3b8\uc73c\ub85c\n"})}),"\n",(0,l.jsx)(n.h2,{id:"-\uac01-\uc8fc\uc81c\ubcc4-\uac1c\uc694",children:"\ud83d\udcd6 \uac01 \uc8fc\uc81c\ubcc4 \uac1c\uc694"}),"\n",(0,l.jsx)(n.h3,{id:"1\ufe0f\u20e3-\uad00\uacc4relationships",children:"1\ufe0f\u20e3 \uad00\uacc4(Relationships)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["One-to-Many (1",":N",")"]}),"\n",(0,l.jsx)(n.li,{children:"Many-to-One (N:1)"}),"\n",(0,l.jsx)(n.li,{children:"One-to-One (1:1)"}),"\n",(0,l.jsxs)(n.li,{children:["Many-to-Many (N",":M",")"]}),"\n",(0,l.jsx)(n.li,{children:"\uc591\ubc29\ud5a5 \uad00\uacc4 \uc124\uc815"}),"\n",(0,l.jsx)(n.li,{children:"Cascade \uc635\uc158"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"2\ufe0f\u20e3-\ucffc\ub9acqueries",children:"2\ufe0f\u20e3 \ucffc\ub9ac(Queries)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"select()"})," \ubb38 \uc791\uc131"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"where()"})," \uc870\uac74 \ud544\ud130\ub9c1"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"order_by()"})," \uc815\ub82c"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"group_by()"})," \uadf8\ub8f9\ud654"]}),"\n",(0,l.jsx)(n.li,{children:"\uc9d1\uacc4 \ud568\uc218 (COUNT, SUM, AVG)"}),"\n",(0,l.jsx)(n.li,{children:"\uc11c\ube0c\ucffc\ub9ac"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"3\ufe0f\u20e3-join\uacfc-\ub85c\ub529",children:"3\ufe0f\u20e3 Join\uacfc \ub85c\ub529"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Lazy Loading vs Eager Loading"}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"selectinload()"}),", ",(0,l.jsx)(n.code,{children:"joinedload()"})]}),"\n",(0,l.jsx)(n.li,{children:"N+1 \ucffc\ub9ac \ubb38\uc81c \ud574\uacb0"}),"\n",(0,l.jsx)(n.li,{children:"\uc131\ub2a5 \ucd5c\uc801\ud654 \uc804\ub7b5"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"4\ufe0f\u20e3-\uc138\uc158-\uad00\ub9ac",children:"4\ufe0f\u20e3 \uc138\uc158 \uad00\ub9ac"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\uc138\uc158 \uc0dd\uba85\uc8fc\uae30"}),"\n",(0,l.jsx)(n.li,{children:"\ud2b8\ub79c\uc7ad\uc158 \uad00\ub9ac"}),"\n",(0,l.jsx)(n.li,{children:"\ucee4\ubc0b/\ub864\ubc31"}),"\n",(0,l.jsx)(n.li,{children:"Session vs sessionmaker"}),"\n",(0,l.jsx)(n.li,{children:"\uc5f0\uacb0 \ud480 \uad00\ub9ac"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"-\uc2e4\uc804-\uc608\uc81c",children:"\ud83c\udfaf \uc2e4\uc804 \uc608\uc81c"}),"\n",(0,l.jsx)(n.p,{children:"\uc911\uae09\ud3b8\uc5d0\uc11c\ub294 \uc2e4\uc81c \ube14\ub85c\uadf8 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud558\uba74\uc11c \ubc30\uc6c1\ub2c8\ub2e4:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# User \u2194 Post (1:N)\n# Post \u2194 Comment (1:N)\n# Post \u2194 Tag (N:M)\n# User \u2194 User (\ud314\ub85c\uc6b0, N:M)\n\nclass User(Base):\n    posts: Mapped[list["Post"]] = relationship()\n    followers: Mapped[list["User"]] = relationship()\n\nclass Post(Base):\n    author: Mapped["User"] = relationship()\n    comments: Mapped[list["Comment"]] = relationship()\n    tags: Mapped[list["Tag"]] = relationship(secondary=post_tags)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"-\uc131\ub2a5-\ucd5c\uc801\ud654-\ubbf8\ub9ac\ubcf4\uae30",children:"\u26a1 \uc131\ub2a5 \ucd5c\uc801\ud654 \ubbf8\ub9ac\ubcf4\uae30"}),"\n",(0,l.jsx)(n.p,{children:"\uc911\uae09\ud3b8\uc5d0\uc11c \ubc30\uc6b0\ub294 \uc131\ub2a5 \ucd5c\uc801\ud654 \uae30\ubc95:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Eager Loading"}),": N+1 \ucffc\ub9ac \uc81c\uac70"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Select Only What You Need"}),": \ud544\uc694\ud55c \uceec\ub7fc\ub9cc \uc870\ud68c"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Bulk Operations"}),": \ub300\ub7c9 \uc791\uc5c5 \ucd5c\uc801\ud654"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Connection Pooling"}),": \uc5f0\uacb0 \uc7ac\uc0ac\uc6a9"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"-\uc2dc\uc791\ud558\uae30",children:"\ud83d\udd17 \uc2dc\uc791\ud558\uae30"}),"\n",(0,l.jsx)(n.p,{children:"\uc900\ube44\ub418\uc168\ub098\uc694? \uac00\uc7a5 \uc911\uc694\ud55c \uad00\uacc4(Relationship) \uc815\uc758\ubd80\ud130 \uc2dc\uc791\ud569\ub2c8\ub2e4!"}),"\n",(0,l.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,l.jsx)(n.a,{href:"./relationships",children:"\uad00\uacc4(Relationship) \uc815\uc758"})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udca1 \ud301"}),": \uc911\uae09\ud3b8\uc758 \ub0b4\uc6a9\uc740 \uc2e4\ubb34\uc5d0\uc11c \uac00\uc7a5 \ub9ce\uc774 \uc0ac\uc6a9\ub429\ub2c8\ub2e4. \uac01 \uc608\uc81c\ub97c \uc9c1\uc811 \uc2e4\ud589\ud574\ubcf4\uba70 \ud559\uc2b5\ud558\uc138\uc694!"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>d});var i=s(6540);const l={},r=i.createContext(l);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);