"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[2873],{6476:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"github/examples/scenario-15-advanced-actions","title":"\uc2dc\ub098\ub9ac\uc624 15: \uace0\uae09 GitHub Actions \ud65c\uc6a9","description":"\ubcf5\uc7a1\ud55c CI/CD \ud30c\uc774\ud504\ub77c\uc778\uc744 GitHub Actions\ub85c \uad6c\ucd95\ud569\ub2c8\ub2e4.","source":"@site/docs/github/examples/scenario-15-advanced-actions.md","sourceDirName":"github/examples","slug":"/github/examples/scenario-15-advanced-actions","permalink":"/tobias-docs/comp-1/docs/github/examples/scenario-15-advanced-actions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/github/examples/scenario-15-advanced-actions.md","tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"sidebar_position":16},"sidebar":"githubSidebar","previous":{"title":"\uc2dc\ub098\ub9ac\uc624 14: Git \uc131\ub2a5 \ucd5c\uc801\ud654","permalink":"/tobias-docs/comp-1/docs/github/examples/scenario-14-performance"},"next":{"title":"\uc2dc\ub098\ub9ac\uc624 16: Git \ub0b4\ubd80 \ub3d9\uc791 \uc774\ud574","permalink":"/tobias-docs/comp-1/docs/github/examples/scenario-16-git-internals"}}');var i=s(4848),r=s(8453);const o={sidebar_position:16},l="\uc2dc\ub098\ub9ac\uc624 15: \uace0\uae09 GitHub Actions \ud65c\uc6a9",a={},c=[{value:"\ud83d\udccc \uc0c1\ud669",id:"-\uc0c1\ud669",level:2},{value:"\ud83c\udfaf \ubaa9\ud45c",id:"-\ubaa9\ud45c",level:2},{value:"\ud83d\udcac \ub300\ud654",id:"-\ub300\ud654",level:2},{value:"\u26a1 \uc2e4\uc2b5",id:"-\uc2e4\uc2b5",level:2},{value:"1\ub2e8\uacc4: Matrix Build\ub85c \ubcd1\ub82c \ud14c\uc2a4\ud2b8",id:"1\ub2e8\uacc4-matrix-build\ub85c-\ubcd1\ub82c-\ud14c\uc2a4\ud2b8",level:3},{value:"2\ub2e8\uacc4: Include/Exclude\ub85c \uc138\ubc00\ud55c \uc81c\uc5b4",id:"2\ub2e8\uacc4-includeexclude\ub85c-\uc138\ubc00\ud55c-\uc81c\uc5b4",level:3},{value:"3\ub2e8\uacc4: Reusable Workflow \ub9cc\ub4e4\uae30",id:"3\ub2e8\uacc4-reusable-workflow-\ub9cc\ub4e4\uae30",level:3},{value:"4\ub2e8\uacc4: Custom Action \uac1c\ubc1c",id:"4\ub2e8\uacc4-custom-action-\uac1c\ubc1c",level:3},{value:"5\ub2e8\uacc4: \ubcf5\uc7a1\ud55c \uc870\uac74\ubd80 \uc2e4\ud589",id:"5\ub2e8\uacc4-\ubcf5\uc7a1\ud55c-\uc870\uac74\ubd80-\uc2e4\ud589",level:3},{value:"6\ub2e8\uacc4: Composite Action (JavaScript)",id:"6\ub2e8\uacc4-composite-action-javascript",level:3},{value:"7\ub2e8\uacc4: \uc758\uc874\uc131 \uad00\ub9ac \ubc0f \uce90\uc2f1",id:"7\ub2e8\uacc4-\uc758\uc874\uc131-\uad00\ub9ac-\ubc0f-\uce90\uc2f1",level:3},{value:"8\ub2e8\uacc4: \ub3d9\uc801 Matrix \uc0dd\uc131",id:"8\ub2e8\uacc4-\ub3d9\uc801-matrix-\uc0dd\uc131",level:3},{value:"9\ub2e8\uacc4: \ubc30\ud3ec \uc2b9\uc778 \ubc0f Rollback",id:"9\ub2e8\uacc4-\ubc30\ud3ec-\uc2b9\uc778-\ubc0f-rollback",level:3},{value:"10\ub2e8\uacc4: Secrets \uad00\ub9ac Best Practices",id:"10\ub2e8\uacc4-secrets-\uad00\ub9ac-best-practices",level:3},{value:"\u2705 \uac80\uc99d",id:"-\uac80\uc99d",level:2},{value:"\ud83c\udf93 \ubc30\uc6b4 \ub0b4\uc6a9",id:"-\ubc30\uc6b4-\ub0b4\uc6a9",level:2},{value:"Matrix Build",id:"matrix-build",level:3},{value:"Reusable Workflow",id:"reusable-workflow",level:3},{value:"Custom Action",id:"custom-action",level:3},{value:"\ud83d\udca1 \uc2e4\uc804 \ud301",id:"-\uc2e4\uc804-\ud301",level:2},{value:"1. Workflow \ub514\ubc84\uae45",id:"1-workflow-\ub514\ubc84\uae45",level:3},{value:"2. \ube44\uc6a9 \ucd5c\uc801\ud654",id:"2-\ube44\uc6a9-\ucd5c\uc801\ud654",level:3},{value:"3. \uc131\ub2a5 \ucd5c\uc801\ud654",id:"3-\uc131\ub2a5-\ucd5c\uc801\ud654",level:3},{value:"\ud83d\udd17 \uad00\ub828 \ubb38\uc11c",id:"-\uad00\ub828-\ubb38\uc11c",level:2},{value:"\ud83c\udfaf \ub2e4\uc74c \uc2dc\ub098\ub9ac\uc624",id:"-\ub2e4\uc74c-\uc2dc\ub098\ub9ac\uc624",level:2}];function u(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"\uc2dc\ub098\ub9ac\uc624-15-\uace0\uae09-github-actions-\ud65c\uc6a9",children:"\uc2dc\ub098\ub9ac\uc624 15: \uace0\uae09 GitHub Actions \ud65c\uc6a9"})}),"\n",(0,i.jsx)(e.p,{children:"\ubcf5\uc7a1\ud55c CI/CD \ud30c\uc774\ud504\ub77c\uc778\uc744 GitHub Actions\ub85c \uad6c\ucd95\ud569\ub2c8\ub2e4."}),"\n",(0,i.jsx)(e.h2,{id:"-\uc0c1\ud669",children:"\ud83d\udccc \uc0c1\ud669"}),"\n",(0,i.jsx)(e.p,{children:"\ucf54\ub4dc\ud06c\ub798\ud504\ud2b8\uac00 \uc5ec\ub7ec \ud50c\ub7ab\ud3fc(Web, iOS, Android)\uc744 \ub3d9\uc2dc\uc5d0 \uac1c\ubc1c\ud558\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ube4c\ub4dc, \ud14c\uc2a4\ud2b8, \ubc30\ud3ec\ub97c \uc790\ub3d9\ud654\ud558\uace0, \uac01 \ud50c\ub7ab\ud3fc\ubcc4\ub85c \ub2e4\ub978 \uc804\ub7b5\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."}),"\n",(0,i.jsx)(e.h2,{id:"-\ubaa9\ud45c",children:"\ud83c\udfaf \ubaa9\ud45c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Matrix Build\ub85c \uc5ec\ub7ec \ud658\uacbd \ub3d9\uc2dc \ud14c\uc2a4\ud2b8"}),"\n",(0,i.jsx)(e.li,{children:"Reusable Workflow \uc791\uc131"}),"\n",(0,i.jsx)(e.li,{children:"Custom Action \uac1c\ubc1c"}),"\n",(0,i.jsx)(e.li,{children:"\uc870\uac74\ubd80 \uc2e4\ud589 \ubc0f \uc758\uc874\uc131 \uad00\ub9ac"}),"\n",(0,i.jsx)(e.li,{children:"Secrets\uc640 \ud658\uacbd \ubcc0\uc218 \uad00\ub9ac"}),"\n",(0,i.jsx)(e.li,{children:"\ubc30\ud3ec \uc790\ub3d9\ud654 \ubc0f Rollback"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"-\ub300\ud654",children:"\ud83d\udcac \ub300\ud654"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\uc218\ud604"}),' (DevOps): "\uc9c0\uae08\uc740 \ube4c\ub4dc\ub9cc 20\ubd84 \uac78\ub824\uc694. 3\uac1c \ud50c\ub7ab\ud3fc \uc21c\ucc28 \uc2e4\ud589\ud558\uba74 1\uc2dc\uac04\uc774\uc5d0\uc694."']}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\uc900\ud638"}),': "\ubcd1\ub82c\ub85c \ub3cc\ub9ac\uba74 \ub418\uc796\uc544\uc694?"']}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\uc218\ud604"}),': "\ub9de\uc544\uc694! Matrix build \uc4f0\uba74 \ub3d9\uc2dc\uc5d0 \ub3cc\ub9b4 \uc218 \uc788\uc5b4\uc694. \ubcf4\uc5ec\ub4dc\ub9b4\uac8c\uc694."']}),"\n",(0,i.jsx)(e.h2,{id:"-\uc2e4\uc2b5",children:"\u26a1 \uc2e4\uc2b5"}),"\n",(0,i.jsx)(e.h3,{id:"1\ub2e8\uacc4-matrix-build\ub85c-\ubcd1\ub82c-\ud14c\uc2a4\ud2b8",children:"1\ub2e8\uacc4: Matrix Build\ub85c \ubcd1\ub82c \ud14c\uc2a4\ud2b8"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# .github/workflows/matrix-test.yml\nname: Matrix Tests\n\non: [push, pull_request]\n\njobs:\n  test:\n    name: Test on ${{ matrix.os }} - Node ${{ matrix.node }}\n    runs-on: ${{ matrix.os }}\n\n    strategy:\n      matrix:\n        os: [ubuntu-latest, windows-latest, macos-latest]\n        node: [16, 18, 20]\n        # 3 OS \xd7 3 Node versions = 9\uac1c \uc791\uc5c5 \ub3d9\uc2dc \uc2e4\ud589!\n\n      fail-fast: false  # \ud558\ub098 \uc2e4\ud328\ud574\ub3c4 \ub098\uba38\uc9c0 \uacc4\uc18d\n      max-parallel: 5   # \ub3d9\uc2dc \uc2e4\ud589 \uc81c\ud55c\n\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Setup Node.js ${{ matrix.node }}\n        uses: actions/setup-node@v3\n        with:\n          node-version: ${{ matrix.node }}\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Run tests\n        run: npm test\n\n      - name: Upload coverage\n        uses: codecov/codecov-action@v3\n        with:\n          flags: ${{ matrix.os }}-node${{ matrix.node }}\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\uacb0\uacfc"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u2705 ubuntu-latest - Node 16\n\u2705 ubuntu-latest - Node 18\n\u2705 ubuntu-latest - Node 20\n\u2705 windows-latest - Node 16\n...\n"})}),"\n",(0,i.jsx)(e.h3,{id:"2\ub2e8\uacc4-includeexclude\ub85c-\uc138\ubc00\ud55c-\uc81c\uc5b4",children:"2\ub2e8\uacc4: Include/Exclude\ub85c \uc138\ubc00\ud55c \uc81c\uc5b4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"strategy:\n  matrix:\n    os: [ubuntu-latest, windows-latest, macos-latest]\n    node: [16, 18, 20]\n\n    # \ud2b9\uc815 \uc870\ud569 \ucd94\uac00\n    include:\n      # Ubuntu\uc5d0\uc11c\ub9cc Redis \ud14c\uc2a4\ud2b8\n      - os: ubuntu-latest\n        node: 20\n        redis: true\n\n    # \ud2b9\uc815 \uc870\ud569 \uc81c\uc678\n    exclude:\n      # Windows + Node 16\uc740 \uc2a4\ud0b5\n      - os: windows-latest\n        node: 16\n\nsteps:\n  - name: Start Redis\n    if: matrix.redis == true\n    run: |\n      sudo systemctl start redis\n"})}),"\n",(0,i.jsx)(e.h3,{id:"3\ub2e8\uacc4-reusable-workflow-\ub9cc\ub4e4\uae30",children:"3\ub2e8\uacc4: Reusable Workflow \ub9cc\ub4e4\uae30"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'# .github/workflows/reusable-deploy.yml\nname: Reusable Deploy\n\non:\n  workflow_call:\n    inputs:\n      environment:\n        required: true\n        type: string\n      version:\n        required: false\n        type: string\n        default: \'latest\'\n\n    secrets:\n      DEPLOY_TOKEN:\n        required: true\n      API_KEY:\n        required: true\n\n    outputs:\n      deployment-url:\n        description: "Deployment URL"\n        value: ${{ jobs.deploy.outputs.url }}\n\njobs:\n  deploy:\n    name: Deploy to ${{ inputs.environment }}\n    runs-on: ubuntu-latest\n    environment: ${{ inputs.environment }}\n\n    outputs:\n      url: ${{ steps.deploy.outputs.url }}\n\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Deploy\n        id: deploy\n        run: |\n          echo "Deploying version ${{ inputs.version }} to ${{ inputs.environment }}"\n          # \ubc30\ud3ec \ub85c\uc9c1...\n          echo "url=https://${{ inputs.environment }}.example.com" >> $GITHUB_OUTPUT\n        env:\n          TOKEN: ${{ secrets.DEPLOY_TOKEN }}\n          API_KEY: ${{ secrets.API_KEY }}\n'})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\uc0ac\uc6a9\ud558\uae30"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# .github/workflows/main.yml\nname: Main Pipeline\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy-staging:\n    uses: ./.github/workflows/reusable-deploy.yml\n    with:\n      environment: staging\n      version: ${{ github.sha }}\n    secrets:\n      DEPLOY_TOKEN: ${{ secrets.STAGING_TOKEN }}\n      API_KEY: ${{ secrets.STAGING_API_KEY }}\n\n  deploy-production:\n    needs: deploy-staging\n    uses: ./.github/workflows/reusable-deploy.yml\n    with:\n      environment: production\n      version: ${{ github.sha }}\n    secrets:\n      DEPLOY_TOKEN: ${{ secrets.PROD_TOKEN }}\n      API_KEY: ${{ secrets.PROD_API_KEY }}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"4\ub2e8\uacc4-custom-action-\uac1c\ubc1c",children:"4\ub2e8\uacc4: Custom Action \uac1c\ubc1c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'# .github/actions/slack-notify/action.yml\nname: \'Slack Notification\'\ndescription: \'Send notification to Slack\'\n\ninputs:\n  webhook-url:\n    description: \'Slack webhook URL\'\n    required: true\n  message:\n    description: \'Message to send\'\n    required: true\n  status:\n    description: \'Status (success/failure)\'\n    required: false\n    default: \'success\'\n\nruns:\n  using: \'composite\'\n  steps:\n    - name: Send to Slack\n      shell: bash\n      run: |\n        COLOR="${{ inputs.status == \'success\' && \'good\' || \'danger\' }}"\n\n        curl -X POST ${{ inputs.webhook-url }} \\\n          -H \'Content-Type: application/json\' \\\n          -d \'{\n            "attachments": [{\n              "color": "\'$COLOR\'",\n              "title": "GitHub Actions",\n              "text": "${{ inputs.message }}",\n              "fields": [\n                {\n                  "title": "Repository",\n                  "value": "${{ github.repository }}",\n                  "short": true\n                },\n                {\n                  "title": "Branch",\n                  "value": "${{ github.ref_name }}",\n                  "short": true\n                }\n              ]\n            }]\n          }\'\n'})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\uc0ac\uc6a9\ud558\uae30"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"jobs:\n  notify:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Notify success\n        uses: ./.github/actions/slack-notify\n        with:\n          webhook-url: ${{ secrets.SLACK_WEBHOOK }}\n          message: 'Deployment successful! \ud83c\udf89'\n          status: success\n"})}),"\n",(0,i.jsx)(e.h3,{id:"5\ub2e8\uacc4-\ubcf5\uc7a1\ud55c-\uc870\uac74\ubd80-\uc2e4\ud589",children:"5\ub2e8\uacc4: \ubcf5\uc7a1\ud55c \uc870\uac74\ubd80 \uc2e4\ud589"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"name: Complex Conditions\n\non:\n  push:\n  pull_request:\n\njobs:\n  check-changes:\n    runs-on: ubuntu-latest\n    outputs:\n      frontend: ${{ steps.filter.outputs.frontend }}\n      backend: ${{ steps.filter.outputs.backend }}\n\n    steps:\n      - uses: actions/checkout@v3\n\n      - uses: dorny/paths-filter@v2\n        id: filter\n        with:\n          filters: |\n            frontend:\n              - 'frontend/**'\n              - 'packages/ui/**'\n            backend:\n              - 'backend/**'\n              - 'api/**'\n\n  build-frontend:\n    needs: check-changes\n    if: |\n      needs.check-changes.outputs.frontend == 'true' &&\n      (github.event_name == 'push' ||\n       github.event.pull_request.draft == false)\n\n    runs-on: ubuntu-latest\n    steps:\n      - name: Build Frontend\n        run: npm run build:frontend\n\n  build-backend:\n    needs: check-changes\n    if: needs.check-changes.outputs.backend == 'true'\n\n    runs-on: ubuntu-latest\n    steps:\n      - name: Build Backend\n        run: npm run build:backend\n"})}),"\n",(0,i.jsx)(e.h3,{id:"6\ub2e8\uacc4-composite-action-javascript",children:"6\ub2e8\uacc4: Composite Action (JavaScript)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"// .github/actions/semantic-version/index.js\nconst core = require('@actions/core');\nconst github = require('@actions/github');\nconst semver = require('semver');\n\nasync function run() {\n  try {\n    const token = core.getInput('github-token');\n    const octokit = github.getOctokit(token);\n\n    // \ucd5c\uc2e0 \ud0dc\uadf8 \uac00\uc838\uc624\uae30\n    const { data: tags } = await octokit.rest.repos.listTags({\n      owner: github.context.repo.owner,\n      repo: github.context.repo.repo,\n      per_page: 1\n    });\n\n    const currentVersion = tags[0]?.name || 'v0.0.0';\n\n    // PR \ub77c\ubca8 \uae30\ubc18\uc73c\ub85c \ubc84\uc804 \uacb0\uc815\n    const labels = github.context.payload.pull_request?.labels || [];\n    const isMajor = labels.some(l => l.name === 'major');\n    const isMinor = labels.some(l => l.name === 'minor');\n\n    let newVersion;\n    if (isMajor) {\n      newVersion = semver.inc(currentVersion, 'major');\n    } else if (isMinor) {\n      newVersion = semver.inc(currentVersion, 'minor');\n    } else {\n      newVersion = semver.inc(currentVersion, 'patch');\n    }\n\n    core.setOutput('version', newVersion);\n    core.setOutput('previous-version', currentVersion);\n\n  } catch (error) {\n    core.setFailed(error.message);\n  }\n}\n\nrun();\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# .github/actions/semantic-version/action.yml\nname: 'Semantic Version'\ndescription: 'Calculate next semantic version'\n\ninputs:\n  github-token:\n    description: 'GitHub Token'\n    required: true\n\noutputs:\n  version:\n    description: 'Next version'\n  previous-version:\n    description: 'Previous version'\n\nruns:\n  using: 'node20'\n  main: 'index.js'\n"})}),"\n",(0,i.jsx)(e.h3,{id:"7\ub2e8\uacc4-\uc758\uc874\uc131-\uad00\ub9ac-\ubc0f-\uce90\uc2f1",children:"7\ub2e8\uacc4: \uc758\uc874\uc131 \uad00\ub9ac \ubc0f \uce90\uc2f1"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"jobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v3\n\n      # NPM \uce90\uc2dc\n      - name: Cache NPM dependencies\n        uses: actions/cache@v3\n        with:\n          path: ~/.npm\n          key: ${{ runner.os }}-npm-${{ hashFiles('package-lock.json') }}\n          restore-keys: |\n            ${{ runner.os }}-npm-\n\n      # \ube4c\ub4dc \uacb0\uacfc \uce90\uc2dc\n      - name: Cache build\n        uses: actions/cache@v3\n        with:\n          path: dist\n          key: ${{ runner.os }}-build-${{ github.sha }}\n\n      - name: Install\n        run: npm ci\n\n      - name: Build\n        run: npm run build\n\n      # \ub2e4\uc74c job\uc5d0\uc11c \uc0ac\uc6a9\ud560 artifact\n      - name: Upload artifact\n        uses: actions/upload-artifact@v3\n        with:\n          name: build-output\n          path: dist/\n          retention-days: 7\n\n  deploy:\n    needs: build\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Download artifact\n        uses: actions/download-artifact@v3\n        with:\n          name: build-output\n          path: dist/\n\n      - name: Deploy\n        run: ./deploy.sh\n"})}),"\n",(0,i.jsx)(e.h3,{id:"8\ub2e8\uacc4-\ub3d9\uc801-matrix-\uc0dd\uc131",children:"8\ub2e8\uacc4: \ub3d9\uc801 Matrix \uc0dd\uc131"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'jobs:\n  generate-matrix:\n    runs-on: ubuntu-latest\n    outputs:\n      matrix: ${{ steps.set-matrix.outputs.matrix }}\n\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Generate matrix\n        id: set-matrix\n        run: |\n          # \ubcc0\uacbd\ub41c \uc11c\ube44\uc2a4\ub9cc \ube4c\ub4dc\n          SERVICES=$(git diff --name-only HEAD~1 | \\\n            grep \'^services/\' | \\\n            cut -d/ -f2 | \\\n            sort -u | \\\n            jq -R -s -c \'split("\\n")[:-1]\')\n\n          echo "matrix={\\"service\\":$SERVICES}" >> $GITHUB_OUTPUT\n\n  build:\n    needs: generate-matrix\n    if: needs.generate-matrix.outputs.matrix != \'{"service":[]}\'\n\n    strategy:\n      matrix: ${{ fromJson(needs.generate-matrix.outputs.matrix) }}\n\n    runs-on: ubuntu-latest\n    steps:\n      - name: Build ${{ matrix.service }}\n        run: |\n          cd services/${{ matrix.service }}\n          npm run build\n'})}),"\n",(0,i.jsx)(e.h3,{id:"9\ub2e8\uacc4-\ubc30\ud3ec-\uc2b9\uc778-\ubc0f-rollback",children:"9\ub2e8\uacc4: \ubc30\ud3ec \uc2b9\uc778 \ubc0f Rollback"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'# .github/workflows/production-deploy.yml\nname: Production Deploy\n\non:\n  push:\n    tags:\n      - \'v*\'\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    environment:\n      name: production\n      url: https://shop.example.com\n\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Deploy to production\n        id: deploy\n        run: |\n          VERSION=${GITHUB_REF#refs/tags/}\n          echo "Deploying $VERSION"\n\n          # \ubc30\ud3ec\n          ./deploy.sh $VERSION\n\n          echo "version=$VERSION" >> $GITHUB_OUTPUT\n\n      - name: Health check\n        run: |\n          for i in {1..10}; do\n            STATUS=$(curl -s -o /dev/null -w "%{http_code}" https://shop.example.com/health)\n            if [ $STATUS -eq 200 ]; then\n              echo "\u2705 Health check passed"\n              exit 0\n            fi\n            echo "\u23f3 Waiting... ($i/10)"\n            sleep 10\n          done\n          echo "\u274c Health check failed"\n          exit 1\n\n      - name: Rollback on failure\n        if: failure()\n        run: |\n          echo "\ud83d\udd04 Rolling back..."\n          PREVIOUS_VERSION=$(git describe --tags --abbrev=0 HEAD^)\n          ./deploy.sh $PREVIOUS_VERSION\n\n      - name: Notify\n        if: always()\n        uses: ./.github/actions/slack-notify\n        with:\n          webhook-url: ${{ secrets.SLACK_WEBHOOK }}\n          message: |\n            Deployment ${{ job.status }}\n            Version: ${{ steps.deploy.outputs.version }}\n          status: ${{ job.status }}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"10\ub2e8\uacc4-secrets-\uad00\ub9ac-best-practices",children:"10\ub2e8\uacc4: Secrets \uad00\ub9ac Best Practices"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'jobs:\n  secure-deploy:\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v3\n\n      # \u274c \ub098\uc05c \uc608\n      - name: Bad practice\n        run: |\n          echo "API Key: ${{ secrets.API_KEY }}"  # \ub85c\uadf8\uc5d0 \ub178\ucd9c!\n\n      # \u2705 \uc88b\uc740 \uc608\n      - name: Good practice\n        run: |\n          # \ud658\uacbd \ubcc0\uc218\ub85c\ub9cc \uc0ac\uc6a9\n          ./deploy.sh\n        env:\n          API_KEY: ${{ secrets.API_KEY }}\n\n      # Secrets \ub9c8\uc2a4\ud0b9\n      - name: Use secret\n        run: |\n          # Secret \uac12\uc740 \uc790\ub3d9\uc73c\ub85c ***\ub85c \ud45c\uc2dc\ub428\n          echo "Deploying with key..."\n          # API_KEY\ub294 \ub85c\uadf8\uc5d0\uc11c \ub9c8\uc2a4\ud0b9\ub428\n        env:\n          API_KEY: ${{ secrets.API_KEY }}\n\n      # Vault\uc5d0\uc11c \uac00\uc838\uc624\uae30 (\ub354 \uc548\uc804)\n      - name: Get secrets from Vault\n        uses: hashicorp/vault-action@v2\n        with:\n          url: ${{ secrets.VAULT_URL }}\n          token: ${{ secrets.VAULT_TOKEN }}\n          secrets: |\n            secret/data/production api_key | API_KEY ;\n            secret/data/production db_password | DB_PASSWORD\n'})}),"\n",(0,i.jsx)(e.h2,{id:"-\uac80\uc99d",children:"\u2705 \uac80\uc99d"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Workflow \uc2e4\ud589 \ud655\uc778\ngh run list --workflow=matrix-test.yml\n\n# \ud2b9\uc815 \uc2e4\ud589 \uc0c1\uc138 \uc815\ubcf4\ngh run view <run-id>\n\n# \ub85c\uadf8 \ubcf4\uae30\ngh run view <run-id> --log\n\n# \uc7ac\uc2e4\ud589\ngh run rerun <run-id>\n\n# Workflow \ube44\ud65c\uc131\ud654\ngh workflow disable matrix-test.yml\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\uc131\uacfc \uce21\uc815"}),":"]}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\uc9c0\ud45c"}),(0,i.jsx)(e.th,{children:"Before"}),(0,i.jsx)(e.th,{children:"After"}),(0,i.jsx)(e.th,{children:"\uac1c\uc120"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\ube4c\ub4dc \uc2dc\uac04"}),(0,i.jsx)(e.td,{children:"60\ubd84 (\uc21c\ucc28)"}),(0,i.jsx)(e.td,{children:"15\ubd84 (\ubcd1\ub82c)"}),(0,i.jsx)(e.td,{children:"75% \u2193"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\ubc30\ud3ec \ube48\ub3c4"}),(0,i.jsx)(e.td,{children:"\uc8fc 1\ud68c"}),(0,i.jsx)(e.td,{children:"\uc77c 5\ud68c"}),(0,i.jsx)(e.td,{children:"5\ubc30 \u2191"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\ub864\ubc31 \uc2dc\uac04"}),(0,i.jsx)(e.td,{children:"30\ubd84 (\uc218\ub3d9)"}),(0,i.jsx)(e.td,{children:"2\ubd84 (\uc790\ub3d9)"}),(0,i.jsx)(e.td,{children:"93% \u2193"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\uc2e4\ud328\uc728"}),(0,i.jsx)(e.td,{children:"15%"}),(0,i.jsx)(e.td,{children:"3%"}),(0,i.jsx)(e.td,{children:"80% \u2193"})]})]})]}),"\n",(0,i.jsx)(e.h2,{id:"-\ubc30\uc6b4-\ub0b4\uc6a9",children:"\ud83c\udf93 \ubc30\uc6b4 \ub0b4\uc6a9"}),"\n",(0,i.jsx)(e.h3,{id:"matrix-build",children:"Matrix Build"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"strategy:\n  matrix:\n    os: [ubuntu, windows, macos]\n    node: [16, 18, 20]\n  fail-fast: false\n"})}),"\n",(0,i.jsx)(e.h3,{id:"reusable-workflow",children:"Reusable Workflow"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# \uc815\uc758\non:\n  workflow_call:\n    inputs:\n      environment:\n        type: string\n\n# \uc0ac\uc6a9\njobs:\n  deploy:\n    uses: ./.github/workflows/deploy.yml\n    with:\n      environment: production\n"})}),"\n",(0,i.jsx)(e.h3,{id:"custom-action",children:"Custom Action"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# Composite\nruns:\n  using: 'composite'\n  steps: [...]\n\n# JavaScript\nruns:\n  using: 'node20'\n  main: 'index.js'\n"})}),"\n",(0,i.jsx)(e.h2,{id:"-\uc2e4\uc804-\ud301",children:"\ud83d\udca1 \uc2e4\uc804 \ud301"}),"\n",(0,i.jsx)(e.h3,{id:"1-workflow-\ub514\ubc84\uae45",children:"1. Workflow \ub514\ubc84\uae45"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"jobs:\n  debug:\n    runs-on: ubuntu-latest\n    steps:\n      # Context \ucd9c\ub825\n      - name: Dump GitHub context\n        run: echo '${{ toJson(github) }}'\n\n      - name: Dump job context\n        run: echo '${{ toJson(job) }}'\n\n      # \ud658\uacbd \ubcc0\uc218 \ud655\uc778\n      - name: Print env\n        run: env | sort\n\n      # SSH \ub514\ubc84\uae45\n      - name: Setup tmate session\n        if: failure()\n        uses: mxschmitt/action-tmate@v3\n"})}),"\n",(0,i.jsx)(e.h3,{id:"2-\ube44\uc6a9-\ucd5c\uc801\ud654",children:"2. \ube44\uc6a9 \ucd5c\uc801\ud654"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# \ubd88\ud544\uc694\ud55c \uc2e4\ud589 \ubc29\uc9c0\non:\n  push:\n    paths-ignore:\n      - 'docs/**'\n      - '**.md'\n\n# Concurrency\ub85c \uc911\ubcf5 \uc2e4\ud589 \ucde8\uc18c\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n"})}),"\n",(0,i.jsx)(e.h3,{id:"3-\uc131\ub2a5-\ucd5c\uc801\ud654",children:"3. \uc131\ub2a5 \ucd5c\uc801\ud654"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# \ubcd1\ub82c \uc2e4\ud589\njobs:\n  test:\n    strategy:\n      matrix:\n        shard: [1, 2, 3, 4]\n    steps:\n      - run: npm test -- --shard=${{ matrix.shard }}/4\n"})}),"\n",(0,i.jsx)(e.h2,{id:"-\uad00\ub828-\ubb38\uc11c",children:"\ud83d\udd17 \uad00\ub828 \ubb38\uc11c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://docs.github.com/en/actions",children:"GitHub Actions \uacf5\uc2dd \ubb38\uc11c"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"./scenario-12-multi-env",children:"\uc5ec\ub7ec \ud658\uacbd \ubc30\ud3ec"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"-\ub2e4\uc74c-\uc2dc\ub098\ub9ac\uc624",children:"\ud83c\udfaf \ub2e4\uc74c \uc2dc\ub098\ub9ac\uc624"}),"\n",(0,i.jsx)(e.p,{children:"\uace0\uae09 CI/CD \ud30c\uc774\ud504\ub77c\uc778\uc744 \uc644\uc131\ud588\uc2b5\ub2c8\ub2e4!"}),"\n",(0,i.jsx)(e.p,{children:"\ub9c8\uc9c0\ub9c9 \uc2dc\ub098\ub9ac\uc624\uc5d0\uc11c\ub294 Git\uc758 \ub0b4\ubd80 \ub3d9\uc791\uc744 \uae4a\uc774 \uc774\ud574\ud574\ubd05\uc2dc\ub2e4..."}),"\n",(0,i.jsxs)(e.p,{children:["\ud83d\udc49 ",(0,i.jsx)(e.a,{href:"./scenario-16-git-internals",children:"\uc2dc\ub098\ub9ac\uc624 16: Git \ub0b4\ubd80 \ub3d9\uc791 \uc774\ud574"}),"\uc5d0\uc11c \uacc4\uc18d\ub429\ub2c8\ub2e4."]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\ud83d\udcac \uacbd\ud5d8 \uacf5\uc720"}),": \uac00\uc7a5 \ubcf5\uc7a1\ud588\ub358 CI/CD \ud30c\uc774\ud504\ub77c\uc778\uc740?"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\ud83c\udfaf \ub3c4\uc804 \uacfc\uc81c"}),":"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"Matrix build\ub85c \uc5ec\ub7ec \ud658\uacbd \ub3d9\uc2dc \ud14c\uc2a4\ud2b8\ud558\uae30"}),"\n",(0,i.jsx)(e.li,{children:"Reusable workflow \ub9cc\ub4e4\uc5b4\ubcf4\uae30"}),"\n",(0,i.jsx)(e.li,{children:"Custom action \uac1c\ubc1c\ud558\uae30"}),"\n"]})]})}function d(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(u,{...n})}):u(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>o,x:()=>l});var t=s(6540);const i={},r=t.createContext(i);function o(n){const e=t.useContext(r);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);