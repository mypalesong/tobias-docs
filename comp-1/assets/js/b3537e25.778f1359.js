"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[5177],{3347:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>o,frontMatter:()=>l,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"alembic/basic/history","title":"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud788\uc2a4\ud1a0\ub9ac","description":"\ub9c8\uc774\uadf8\ub808\uc774\uc158\uc758 \uc774\ub825\uc744 \ud655\uc778\ud558\uace0 \uad00\ub9ac\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6cc\ubd05\uc2dc\ub2e4!","source":"@site/docs/alembic/basic/history.md","sourceDirName":"alembic/basic","slug":"/alembic/basic/history","permalink":"/tobias-docs/comp-1/docs/alembic/basic/history","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/alembic/basic/history.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"alembicSidebar","previous":{"title":"Upgrade\uc640 Downgrade","permalink":"/tobias-docs/comp-1/docs/alembic/basic/upgrade-downgrade"},"next":{"title":"\ud14c\uc774\ube14 \uc791\uc5c5","permalink":"/tobias-docs/comp-1/docs/alembic/basic/tables"}}');var i=s(4848),c=s(8453);const l={sidebar_position:5},r="\ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud788\uc2a4\ud1a0\ub9ac",d={},t=[{value:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c",id:"-\ud559\uc2b5-\ubaa9\ud45c",level:2},{value:"\ud83d\udcdc History \uba85\ub839\uc5b4",id:"-history-\uba85\ub839\uc5b4",level:2},{value:"\uae30\ubcf8 \uc0ac\uc6a9\ubc95",id:"\uae30\ubcf8-\uc0ac\uc6a9\ubc95",level:3},{value:"\uc0c1\uc138 \uc815\ubcf4 \ubcf4\uae30",id:"\uc0c1\uc138-\uc815\ubcf4-\ubcf4\uae30",level:3},{value:"\ud2b9\uc815 \ubc94\uc704 \ubcf4\uae30",id:"\ud2b9\uc815-\ubc94\uc704-\ubcf4\uae30",level:3},{value:"\uc5ed\uc21c\uc73c\ub85c \ubcf4\uae30",id:"\uc5ed\uc21c\uc73c\ub85c-\ubcf4\uae30",level:3},{value:"\ud83d\udd17 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uccb4\uc778 \uc774\ud574",id:"-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uccb4\uc778-\uc774\ud574",level:2},{value:"\ub9ac\ube44\uc804 \uccb4\uc778 \uad6c\uc870",id:"\ub9ac\ube44\uc804-\uccb4\uc778-\uad6c\uc870",level:3},{value:"\ud30c\uc77c \ub0b4\ubd80 \uad6c\uc870",id:"\ud30c\uc77c-\ub0b4\ubd80-\uad6c\uc870",level:3},{value:"\ud83d\udcca \ud604\uc7ac \uc0c1\ud0dc\uc640 \ud788\uc2a4\ud1a0\ub9ac",id:"-\ud604\uc7ac-\uc0c1\ud0dc\uc640-\ud788\uc2a4\ud1a0\ub9ac",level:2},{value:"current + history \uc870\ud569",id:"current--history-\uc870\ud569",level:3},{value:"\ud83c\udfa8 \uc2e4\uc804 \uc608\uc81c: \ud504\ub85c\uc81d\ud2b8 \ud788\uc2a4\ud1a0\ub9ac \ucd94\uc801",id:"-\uc2e4\uc804-\uc608\uc81c-\ud504\ub85c\uc81d\ud2b8-\ud788\uc2a4\ud1a0\ub9ac-\ucd94\uc801",level:2},{value:"\ube14\ub85c\uadf8 \ud504\ub85c\uc81d\ud2b8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ub9cc\ub4e4\uae30",id:"\ube14\ub85c\uadf8-\ud504\ub85c\uc81d\ud2b8-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ub9cc\ub4e4\uae30",level:3},{value:"\ud788\uc2a4\ud1a0\ub9ac \ud655\uc778",id:"\ud788\uc2a4\ud1a0\ub9ac-\ud655\uc778",level:3},{value:"\ud2b9\uc815 \uc2dc\uc810\uc758 \uc2a4\ud0a4\ub9c8 \ud655\uc778",id:"\ud2b9\uc815-\uc2dc\uc810\uc758-\uc2a4\ud0a4\ub9c8-\ud655\uc778",level:3},{value:"\ud83d\udd0d Heads\uc640 Branches",id:"-heads\uc640-branches",level:2},{value:"Head \ud655\uc778",id:"head-\ud655\uc778",level:3},{value:"Multiple Heads (\uace0\uae09)",id:"multiple-heads-\uace0\uae09",level:3},{value:"\ud83d\udcdd Show \uba85\ub839\uc5b4",id:"-show-\uba85\ub839\uc5b4",level:2},{value:"\ud83d\udee0\ufe0f \uc2e4\ubb34 \ud65c\uc6a9 \uc608\uc81c",id:"\ufe0f-\uc2e4\ubb34-\ud65c\uc6a9-\uc608\uc81c",level:2},{value:"1. \ud2b9\uc815 \uae30\ub2a5\uc758 \ubaa8\ub4e0 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ucc3e\uae30",id:"1-\ud2b9\uc815-\uae30\ub2a5\uc758-\ubaa8\ub4e0-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ucc3e\uae30",level:3},{value:"2. \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ub0a0\uc9dc\ub85c \ucc3e\uae30",id:"2-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ub0a0\uc9dc\ub85c-\ucc3e\uae30",level:3},{value:"3. \ubcc0\uacbd \uc0ac\ud56d \uc694\uc57d \uc0dd\uc131",id:"3-\ubcc0\uacbd-\uc0ac\ud56d-\uc694\uc57d-\uc0dd\uc131",level:3},{value:"\ud83d\udcca \ud788\uc2a4\ud1a0\ub9ac \uc2dc\uac01\ud654",id:"-\ud788\uc2a4\ud1a0\ub9ac-\uc2dc\uac01\ud654",level:2},{value:"\uac04\ub2e8\ud55c \ud2b8\ub9ac \uad6c\uc870",id:"\uac04\ub2e8\ud55c-\ud2b8\ub9ac-\uad6c\uc870",level:3},{value:"Python \uc2a4\ud06c\ub9bd\ud2b8\ub85c \ubd84\uc11d",id:"python-\uc2a4\ud06c\ub9bd\ud2b8\ub85c-\ubd84\uc11d",level:3},{value:"\ud83c\udfaf \uc2e4\uc804 \uc2dc\ub098\ub9ac\uc624",id:"-\uc2e4\uc804-\uc2dc\ub098\ub9ac\uc624",level:2},{value:"\uc2dc\ub098\ub9ac\uc624 1: \ud2b9\uc815 \uae30\ub2a5 \ub864\ubc31",id:"\uc2dc\ub098\ub9ac\uc624-1-\ud2b9\uc815-\uae30\ub2a5-\ub864\ubc31",level:3},{value:"\uc2dc\ub098\ub9ac\uc624 2: \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ucda9\ub3cc \ud574\uacb0",id:"\uc2dc\ub098\ub9ac\uc624-2-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ucda9\ub3cc-\ud574\uacb0",level:3},{value:"\uc2dc\ub098\ub9ac\uc624 3: \ud504\ub85c\ub355\uc158 \ubc30\ud3ec \uc804 \ud655\uc778",id:"\uc2dc\ub098\ub9ac\uc624-3-\ud504\ub85c\ub355\uc158-\ubc30\ud3ec-\uc804-\ud655\uc778",level:3},{value:"\ud83d\udccb \ud788\uc2a4\ud1a0\ub9ac \uad00\ub9ac \ubca0\uc2a4\ud2b8 \ud504\ub799\ud2f0\uc2a4",id:"-\ud788\uc2a4\ud1a0\ub9ac-\uad00\ub9ac-\ubca0\uc2a4\ud2b8-\ud504\ub799\ud2f0\uc2a4",level:2},{value:"1. \uba85\ud655\ud55c \uba54\uc2dc\uc9c0 \uc791\uc131",id:"1-\uba85\ud655\ud55c-\uba54\uc2dc\uc9c0-\uc791\uc131",level:3},{value:"2. \ub17c\ub9ac\uc801 \uc21c\uc11c \uc720\uc9c0",id:"2-\ub17c\ub9ac\uc801-\uc21c\uc11c-\uc720\uc9c0",level:3},{value:"3. \uc815\uae30\uc801\uc778 \ud788\uc2a4\ud1a0\ub9ac \uc815\ub9ac",id:"3-\uc815\uae30\uc801\uc778-\ud788\uc2a4\ud1a0\ub9ac-\uc815\ub9ac",level:3},{value:"\ud83d\udd0d \ud2b8\ub7ec\ube14\uc288\ud305",id:"-\ud2b8\ub7ec\ube14\uc288\ud305",level:2},{value:"\ubb38\uc81c 1: \ud788\uc2a4\ud1a0\ub9ac\uac00 \ubcf4\uc774\uc9c0 \uc54a\uc74c",id:"\ubb38\uc81c-1-\ud788\uc2a4\ud1a0\ub9ac\uac00-\ubcf4\uc774\uc9c0-\uc54a\uc74c",level:3},{value:"\ubb38\uc81c 2: Multiple heads",id:"\ubb38\uc81c-2-multiple-heads",level:3},{value:"\u2705 \ud575\uc2ec \uc815\ub9ac",id:"-\ud575\uc2ec-\uc815\ub9ac",level:2},{value:"\ud83d\udcda \ub2e4\uc74c \ub2e8\uacc4",id:"-\ub2e4\uc74c-\ub2e8\uacc4",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ud788\uc2a4\ud1a0\ub9ac",children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud788\uc2a4\ud1a0\ub9ac"})}),"\n",(0,i.jsx)(n.p,{children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158\uc758 \uc774\ub825\uc744 \ud655\uc778\ud558\uace0 \uad00\ub9ac\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6cc\ubd05\uc2dc\ub2e4!"}),"\n",(0,i.jsx)(n.h2,{id:"-\ud559\uc2b5-\ubaa9\ud45c",children:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"history \uba85\ub839\uc5b4 \uc0ac\uc6a9\ubc95"}),"\n",(0,i.jsx)(n.li,{children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \uccb4\uc778 \uc774\ud574"}),"\n",(0,i.jsx)(n.li,{children:"\ubc84\uc804 \uad00\ub9ac \uc804\ub7b5"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-history-\uba85\ub839\uc5b4",children:"\ud83d\udcdc History \uba85\ub839\uc5b4"}),"\n",(0,i.jsx)(n.h3,{id:"\uae30\ubcf8-\uc0ac\uc6a9\ubc95",children:"\uae30\ubcf8 \uc0ac\uc6a9\ubc95"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \uc804\uccb4 \ud788\uc2a4\ud1a0\ub9ac \ubcf4\uae30\nalembic history\n\n# \ucd9c\ub825 \uc608\uc2dc:\n# 3a7c4e8f2b1d -> 5d9e2f7a3c4b (head), add comments table\n# 2f8b9c3d1a5e -> 3a7c4e8f2b1d, create posts table\n# <base> -> 2f8b9c3d1a5e, create users table\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\uc0c1\uc138-\uc815\ubcf4-\ubcf4\uae30",children:"\uc0c1\uc138 \uc815\ubcf4 \ubcf4\uae30"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \uc790\uc138\ud55c \uc815\ubcf4 (-v \ub610\ub294 --verbose)\nalembic history -v\n\n# \ucd9c\ub825 \uc608\uc2dc:\n# Rev: 5d9e2f7a3c4b (head)\n# Parent: 3a7c4e8f2b1d\n# Path: /path/to/versions/5d9e2f7a3c4b_add_comments_table.py\n#\n#     add comments table\n#\n#     Revision ID: 5d9e2f7a3c4b\n#     Revises: 3a7c4e8f2b1d\n#     Create Date: 2024-01-17 14:20:30.123456\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\ud2b9\uc815-\ubc94\uc704-\ubcf4\uae30",children:"\ud2b9\uc815 \ubc94\uc704 \ubcf4\uae30"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \ud2b9\uc815 \ubc94\uc704\uc758 \ud788\uc2a4\ud1a0\ub9ac\nalembic history -r 2f8b9c3d1a5e:head\n\n# \ucd5c\uadfc N\uac1c\ub9cc \ubcf4\uae30\nalembic history | head -n 5\n\n# \ud604\uc7ac \ubc84\uc804\ubd80\ud130 base\uae4c\uc9c0\nalembic history -r current:base\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\uc5ed\uc21c\uc73c\ub85c-\ubcf4\uae30",children:"\uc5ed\uc21c\uc73c\ub85c \ubcf4\uae30"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \ucd5c\uc2e0\ubd80\ud130 \uacfc\uac70 \uc21c\uc73c\ub85c (-r \uc635\uc158)\nalembic history -r :head\n\n# \uacfc\uac70\ubd80\ud130 \ucd5c\uc2e0 \uc21c\uc73c\ub85c\nalembic history -r base:\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uccb4\uc778-\uc774\ud574",children:"\ud83d\udd17 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uccb4\uc778 \uc774\ud574"}),"\n",(0,i.jsx)(n.h3,{id:"\ub9ac\ube44\uc804-\uccb4\uc778-\uad6c\uc870",children:"\ub9ac\ube44\uc804 \uccb4\uc778 \uad6c\uc870"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"base\n  \u2193\n[2f8b9c3d1a5e] create users table\n  \u2193\n[3a7c4e8f2b1d] create posts table\n  \u2193\n[5d9e2f7a3c4b] add comments table (head)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\ud30c\uc77c-\ub0b4\ubd80-\uad6c\uc870",children:"\ud30c\uc77c \ub0b4\ubd80 \uad6c\uc870"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# versions/5d9e2f7a3c4b_add_comments_table.py\n\nrevision = '5d9e2f7a3c4b'      # \ud604\uc7ac \ub9ac\ube44\uc804\ndown_revision = '3a7c4e8f2b1d'  # \ubd80\ubaa8 \ub9ac\ube44\uc804 (\uc774\uc804)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-\ud604\uc7ac-\uc0c1\ud0dc\uc640-\ud788\uc2a4\ud1a0\ub9ac",children:"\ud83d\udcca \ud604\uc7ac \uc0c1\ud0dc\uc640 \ud788\uc2a4\ud1a0\ub9ac"}),"\n",(0,i.jsx)(n.h3,{id:"current--history-\uc870\ud569",children:"current + history \uc870\ud569"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \ud604\uc7ac \uc704\uce58 \ud655\uc778\nalembic current\n\n# \ud788\uc2a4\ud1a0\ub9ac\uc5d0\uc11c \ud604\uc7ac \uc704\uce58 \ud45c\uc2dc (-i)\nalembic history -i\n\n# \ucd9c\ub825 \uc608\uc2dc:\n# 3a7c4e8f2b1d -> 5d9e2f7a3c4b (head), add comments table\n# 2f8b9c3d1a5e -> 3a7c4e8f2b1d (current), create posts table\n# <base> -> 2f8b9c3d1a5e, create users table\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-\uc2e4\uc804-\uc608\uc81c-\ud504\ub85c\uc81d\ud2b8-\ud788\uc2a4\ud1a0\ub9ac-\ucd94\uc801",children:"\ud83c\udfa8 \uc2e4\uc804 \uc608\uc81c: \ud504\ub85c\uc81d\ud2b8 \ud788\uc2a4\ud1a0\ub9ac \ucd94\uc801"}),"\n",(0,i.jsx)(n.h3,{id:"\ube14\ub85c\uadf8-\ud504\ub85c\uc81d\ud2b8-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ub9cc\ub4e4\uae30",children:"\ube14\ub85c\uadf8 \ud504\ub85c\uc81d\ud2b8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ub9cc\ub4e4\uae30"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# 1. \uc0ac\uc6a9\uc790 \ud14c\uc774\ube14\nalembic revision -m "create users table"\n\n# 2. \uce74\ud14c\uace0\ub9ac \ud14c\uc774\ube14\nalembic revision -m "create categories table"\n\n# 3. \ud3ec\uc2a4\ud2b8 \ud14c\uc774\ube14\nalembic revision -m "create posts table"\n\n# 4. \ub313\uae00 \ud14c\uc774\ube14\nalembic revision -m "create comments table"\n\n# 5. \ud0dc\uadf8 \ud14c\uc774\ube14\nalembic revision -m "create tags table"\n\n# 6. \ud3ec\uc2a4\ud2b8-\ud0dc\uadf8 \uad00\uacc4 \ud14c\uc774\ube14\nalembic revision -m "create post_tags table"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\ud788\uc2a4\ud1a0\ub9ac-\ud655\uc778",children:"\ud788\uc2a4\ud1a0\ub9ac \ud655\uc778"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ alembic history\n\n# 6\uac1c\uc758 \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc774 \uc21c\uc11c\ub300\ub85c \ud45c\uc2dc\ub428\naaa1111 -> bbb2222 (head), create post_tags table\n999eee0 -> aaa1111, create tags table\n888ddd9 -> 999eee0, create comments table\n777ccc8 -> 888ddd9, create posts table\n666bbb7 -> 777ccc8, create categories table\n<base> -> 666bbb7, create users table\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\ud2b9\uc815-\uc2dc\uc810\uc758-\uc2a4\ud0a4\ub9c8-\ud655\uc778",children:"\ud2b9\uc815 \uc2dc\uc810\uc758 \uc2a4\ud0a4\ub9c8 \ud655\uc778"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# posts \ud14c\uc774\ube14\uc774 \ucd94\uac00\ub41c \uc2dc\uc810\uc758 \uc2a4\ud0a4\ub9c8\nalembic upgrade 777ccc8\n\n# \ud604\uc7ac \uc0c1\ud0dc \ud655\uc778\nalembic current\n# 777ccc8\n\n# \uc774 \uc2dc\uc810\uc758 \ud14c\uc774\ube14 \ubaa9\ub85d\nsqlite3 blog.db ".tables"\n# alembic_version  users  categories  posts\n'})}),"\n",(0,i.jsx)(n.h2,{id:"-heads\uc640-branches",children:"\ud83d\udd0d Heads\uc640 Branches"}),"\n",(0,i.jsx)(n.h3,{id:"head-\ud655\uc778",children:"Head \ud655\uc778"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \ud604\uc7ac head(\ucd5c\uc2e0) \ud655\uc778\nalembic heads\n\n# \ucd9c\ub825:\n# bbb2222 (head)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"multiple-heads-\uace0\uae09",children:"Multiple Heads (\uace0\uae09)"}),"\n",(0,i.jsx)(n.p,{children:"\uc5ec\ub7ec \uac1c\ubc1c\uc790\uac00 \ub3d9\uc2dc\uc5d0 \uc791\uc5c5\ud560 \ub54c:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"       \u250c\u2500 [aaa] feature A\nbase \u2500\u2500\u2524\n       \u2514\u2500 [bbb] feature B\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"alembic heads\n# aaa (head)\n# bbb (head)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-show-\uba85\ub839\uc5b4",children:"\ud83d\udcdd Show \uba85\ub839\uc5b4"}),"\n",(0,i.jsx)(n.p,{children:"\ud2b9\uc815 \ub9ac\ube44\uc804\uc758 \uc0c1\uc138 \uc815\ubcf4 \ubcf4\uae30:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \ud2b9\uc815 \ub9ac\ube44\uc804 \uc815\ubcf4\nalembic show 777ccc8\n\n# head\uc758 \uc815\ubcf4\nalembic show head\n\n# \ud604\uc7ac \ub9ac\ube44\uc804 \uc815\ubcf4\nalembic show current\n"})}),"\n",(0,i.jsx)(n.p,{children:"\ucd9c\ub825 \uc608\uc2dc:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Rev: 777ccc8\nParent: 666bbb7\nPath: /path/to/versions/777ccc8_create_posts_table.py\n\n    create posts table\n\n    Revision ID: 777ccc8\n    Revises: 666bbb7\n    Create Date: 2024-01-15 11:30:00.123456\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-\uc2e4\ubb34-\ud65c\uc6a9-\uc608\uc81c",children:"\ud83d\udee0\ufe0f \uc2e4\ubb34 \ud65c\uc6a9 \uc608\uc81c"}),"\n",(0,i.jsx)(n.h3,{id:"1-\ud2b9\uc815-\uae30\ub2a5\uc758-\ubaa8\ub4e0-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ucc3e\uae30",children:"1. \ud2b9\uc815 \uae30\ub2a5\uc758 \ubaa8\ub4e0 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ucc3e\uae30"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# grep\uc73c\ub85c \uac80\uc0c9\nalembic history -v | grep -i "user"\n\n# \ucd9c\ub825:\n#     create users table\n#     add email to users\n#     add profile fields to users\n'})}),"\n",(0,i.jsx)(n.h3,{id:"2-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ub0a0\uc9dc\ub85c-\ucc3e\uae30",children:"2. \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ub0a0\uc9dc\ub85c \ucc3e\uae30"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# \ud2b9\uc815 \ub0a0\uc9dc \uc774\ud6c4 \ub9c8\uc774\uadf8\ub808\uc774\uc158\nalembic history -v | grep "2024-01-15"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-\ubcc0\uacbd-\uc0ac\ud56d-\uc694\uc57d-\uc0dd\uc131",children:"3. \ubcc0\uacbd \uc0ac\ud56d \uc694\uc57d \uc0dd\uc131"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \ub9b4\ub9ac\uc988 \ub178\ud2b8\uc6a9 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ubaa9\ub85d\nalembic history -r last_release:head > release_notes.txt\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-\ud788\uc2a4\ud1a0\ub9ac-\uc2dc\uac01\ud654",children:"\ud83d\udcca \ud788\uc2a4\ud1a0\ub9ac \uc2dc\uac01\ud654"}),"\n",(0,i.jsx)(n.h3,{id:"\uac04\ub2e8\ud55c-\ud2b8\ub9ac-\uad6c\uc870",children:"\uac04\ub2e8\ud55c \ud2b8\ub9ac \uad6c\uc870"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \ucee4\uc2a4\ud140 \uc2a4\ud06c\ub9bd\ud2b8\ub85c \uc2dc\uac01\ud654\nalembic history | awk '{print $1, $3, $4, $5, $6, $7, $8, $9}' | column -t\n"})}),"\n",(0,i.jsx)(n.p,{children:"\ucd9c\ub825:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"aaa1111  ->  bbb2222  (head),  create  post_tags  table\n999eee0  ->  aaa1111          create  tags       table\n888ddd9  ->  999eee0          create  comments   table\n777ccc8  ->  888ddd9          create  posts      table\n666bbb7  ->  777ccc8          create  categories table\n<base>   ->  666bbb7          create  users      table\n"})}),"\n",(0,i.jsx)(n.h3,{id:"python-\uc2a4\ud06c\ub9bd\ud2b8\ub85c-\ubd84\uc11d",children:"Python \uc2a4\ud06c\ub9bd\ud2b8\ub85c \ubd84\uc11d"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# analyze_migrations.py\nfrom alembic.config import Config\nfrom alembic.script import ScriptDirectory\n\nconfig = Config("alembic.ini")\nscript = ScriptDirectory.from_config(config)\n\nprint("\ub9c8\uc774\uadf8\ub808\uc774\uc158 \ubd84\uc11d")\nprint("=" * 50)\n\ncount = 0\nfor revision in script.walk_revisions():\n    count += 1\n    print(f"{count}. {revision.revision[:7]} - {revision.doc}")\n\nprint(f"\\n\ucd1d {count}\uac1c\uc758 \ub9c8\uc774\uadf8\ub808\uc774\uc158")\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python analyze_migrations.py\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-\uc2e4\uc804-\uc2dc\ub098\ub9ac\uc624",children:"\ud83c\udfaf \uc2e4\uc804 \uc2dc\ub098\ub9ac\uc624"}),"\n",(0,i.jsx)(n.h3,{id:"\uc2dc\ub098\ub9ac\uc624-1-\ud2b9\uc815-\uae30\ub2a5-\ub864\ubc31",children:"\uc2dc\ub098\ub9ac\uc624 1: \ud2b9\uc815 \uae30\ub2a5 \ub864\ubc31"}),"\n",(0,i.jsx)(n.p,{children:"\ud300\uc6d0\uc774 \uc0c8 \uae30\ub2a5\uc744 3\uac1c\uc758 \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc73c\ub85c \ucd94\uac00\ud588\ub294\ub370, \ubaa8\ub450 \ub864\ubc31\ud574\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# 1. \ud788\uc2a4\ud1a0\ub9ac \ud655\uc778\nalembic history -i\n\n# \ucd9c\ub825:\n# eee5555 -> fff6666 (current), add feature C\n# ddd4444 -> eee5555, add feature B\n# ccc3333 -> ddd4444, add feature A\n# bbb2222 -> ccc3333, previous stable version\n# ...\n\n# 2. \uc548\uc815 \ubc84\uc804\uc73c\ub85c \ub864\ubc31\nalembic downgrade ccc3333\n\n# 3. \ud655\uc778\nalembic current\n# ccc3333\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\uc2dc\ub098\ub9ac\uc624-2-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ucda9\ub3cc-\ud574\uacb0",children:"\uc2dc\ub098\ub9ac\uc624 2: \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ucda9\ub3cc \ud574\uacb0"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \ub3d9\ub8cc\uac00 \uba3c\uc800 push\ud55c \uc0c1\ud669\n$ git pull\n$ alembic history\n\n# \ucd9c\ub825:\n# yyy9999 -> zzz0000 (my changes)\n# xxx8888 -> yyy9999 (teammate's changes)\n# <base> -> xxx8888\n\n# \ub0b4 \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc758 down_revision \uc218\uc815 \ud544\uc694\n# versions/zzz0000_my_changes.py\uc5d0\uc11c:\n# down_revision = 'yyy9999'  # teammate's latest\ub85c \ubcc0\uacbd\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\uc2dc\ub098\ub9ac\uc624-3-\ud504\ub85c\ub355\uc158-\ubc30\ud3ec-\uc804-\ud655\uc778",children:"\uc2dc\ub098\ub9ac\uc624 3: \ud504\ub85c\ub355\uc158 \ubc30\ud3ec \uc804 \ud655\uc778"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# 1. \ud604\uc7ac \ud504\ub85c\ub355\uc158 \ubc84\uc804 \ud655\uc778\n# (\ud504\ub85c\ub355\uc158 \uc11c\ubc84\uc5d0\uc11c)\nalembic current\n# bbb2222\n\n# 2. \ub85c\uceec\uc5d0\uc11c \ubc30\ud3ec\ud560 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud655\uc778\nalembic history -r bbb2222:head\n\n# \ucd9c\ub825:\n# bbb2222 -> ccc3333, add user profiles\n# ccc3333 -> ddd4444, add comments\n# ddd4444 -> eee5555 (head), add tags\n\n# 3. \uac01 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uac80\ud1a0\nalembic show ccc3333\nalembic show ddd4444\nalembic show eee5555\n\n# 4. \ubb38\uc81c\uc5c6\uc73c\uba74 \ubc30\ud3ec\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-\ud788\uc2a4\ud1a0\ub9ac-\uad00\ub9ac-\ubca0\uc2a4\ud2b8-\ud504\ub799\ud2f0\uc2a4",children:"\ud83d\udccb \ud788\uc2a4\ud1a0\ub9ac \uad00\ub9ac \ubca0\uc2a4\ud2b8 \ud504\ub799\ud2f0\uc2a4"}),"\n",(0,i.jsx)(n.h3,{id:"1-\uba85\ud655\ud55c-\uba54\uc2dc\uc9c0-\uc791\uc131",children:"1. \uba85\ud655\ud55c \uba54\uc2dc\uc9c0 \uc791\uc131"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# \u274c \ub098\uc05c \uc608\nalembic revision -m "update"\nalembic revision -m "fix"\nalembic revision -m "changes"\n\n# \u2705 \uc88b\uc740 \uc608\nalembic revision -m "add email column to users table"\nalembic revision -m "create posts table with foreign key to users"\nalembic revision -m "add index on posts.created_at for performance"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"2-\ub17c\ub9ac\uc801-\uc21c\uc11c-\uc720\uc9c0",children:"2. \ub17c\ub9ac\uc801 \uc21c\uc11c \uc720\uc9c0"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# \u2705 \uc758\uc874\uc131 \uc21c\uc11c\ub300\ub85c\nalembic revision -m "create users table"\nalembic revision -m "create posts table"  # users\uc5d0 \uc758\uc874\nalembic revision -m "create comments table"  # posts\uc5d0 \uc758\uc874\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-\uc815\uae30\uc801\uc778-\ud788\uc2a4\ud1a0\ub9ac-\uc815\ub9ac",children:"3. \uc815\uae30\uc801\uc778 \ud788\uc2a4\ud1a0\ub9ac \uc815\ub9ac"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# squash: \uc5ec\ub7ec \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud569\uce58\uae30 (\uace0\uae09)\n# \uac1c\ubc1c \uc911\uc5d0\ub294 \uc791\uc740 \ub2e8\uc704\ub85c, \ub9b4\ub9ac\uc988 \uc804\uc5d0\ub294 \ud569\uce58\uae30\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-\ud2b8\ub7ec\ube14\uc288\ud305",children:"\ud83d\udd0d \ud2b8\ub7ec\ube14\uc288\ud305"}),"\n",(0,i.jsx)(n.h3,{id:"\ubb38\uc81c-1-\ud788\uc2a4\ud1a0\ub9ac\uac00-\ubcf4\uc774\uc9c0-\uc54a\uc74c",children:"\ubb38\uc81c 1: \ud788\uc2a4\ud1a0\ub9ac\uac00 \ubcf4\uc774\uc9c0 \uc54a\uc74c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ alembic history\n# (\ucd9c\ub825 \uc5c6\uc74c)\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ud574\uacb0\ubc29\ubc95"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# versions \ub514\ub809\ud1a0\ub9ac \ud655\uc778\nls alembic/versions/\n\n# \ud30c\uc77c\uc774 \uc788\ub2e4\uba74 \uc124\uc815 \ud655\uc778\ncat alembic.ini | grep script_location\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\ubb38\uc81c-2-multiple-heads",children:"\ubb38\uc81c 2: Multiple heads"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ alembic upgrade head\nError: Multiple heads are present\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\ud574\uacb0\ubc29\ubc95"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# heads \ud655\uc778\nalembic heads\n\n# \ubcd1\ud569 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131 (\uace0\uae09\ud3b8\uc5d0\uc11c \uc790\uc138\ud788)\nalembic merge -m "merge branches" head1 head2\n'})}),"\n",(0,i.jsx)(n.h2,{id:"-\ud575\uc2ec-\uc815\ub9ac",children:"\u2705 \ud575\uc2ec \uc815\ub9ac"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\uba85\ub839\uc5b4"}),(0,i.jsx)(n.th,{children:"\uc124\uba85"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alembic history"})}),(0,i.jsx)(n.td,{children:"\uc804\uccb4 \ud788\uc2a4\ud1a0\ub9ac"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alembic history -v"})}),(0,i.jsx)(n.td,{children:"\uc0c1\uc138 \uc815\ubcf4 \ud3ec\ud568"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alembic history -i"})}),(0,i.jsx)(n.td,{children:"\ud604\uc7ac \uc704\uce58 \ud45c\uc2dc"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alembic history -r A:B"})}),(0,i.jsx)(n.td,{children:"\ubc94\uc704 \uc9c0\uc815"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alembic current"})}),(0,i.jsx)(n.td,{children:"\ud604\uc7ac \ubc84\uc804"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alembic show REV"})}),(0,i.jsx)(n.td,{children:"\ud2b9\uc815 \ub9ac\ube44\uc804 \uc815\ubcf4"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alembic heads"})}),(0,i.jsx)(n.td,{children:"\ucd5c\uc2e0 \ubc84\uc804\ub4e4"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"-\ub2e4\uc74c-\ub2e8\uacc4",children:"\ud83d\udcda \ub2e4\uc74c \ub2e8\uacc4"}),"\n",(0,i.jsx)(n.p,{children:"\ud788\uc2a4\ud1a0\ub9ac \uad00\ub9ac \ubc29\ubc95\uc744 \ubc30\uc6e0\uc73c\ub2c8, \uc774\uc81c \uad6c\uccb4\uc801\uc778 \uc2a4\ud0a4\ub9c8 \uc791\uc5c5\uc744 \ud574\ubd05\uc2dc\ub2e4!"}),"\n",(0,i.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,i.jsx)(n.a,{href:"./tables",children:"\ud14c\uc774\ube14 \uc791\uc5c5"})]})]})}function o(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>r});var a=s(6540);const i={},c=a.createContext(i);function l(e){const n=a.useContext(c);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(c.Provider,{value:n},e.children)}}}]);