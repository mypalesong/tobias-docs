"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[5567],{3366:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"fastapi/advanced/websockets","title":"WebSocket - \uc2e4\uc2dc\uac04 \ud1b5\uc2e0","description":"WebSocket\uc744 \uc0ac\uc6a9\ud55c \uc591\ubc29\ud5a5 \uc2e4\uc2dc\uac04 \ud1b5\uc2e0\uc744 \uad6c\ud604\ud574\ubd05\uc2dc\ub2e4!","source":"@site/docs/fastapi/advanced/websockets.md","sourceDirName":"fastapi/advanced","slug":"/fastapi/advanced/websockets","permalink":"/docs/fastapi/advanced/websockets","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/fastapi/advanced/websockets.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"fastapiSidebar","previous":{"title":"\uace0\uae09\ud3b8 \uc18c\uac1c","permalink":"/docs/fastapi/advanced/intro"},"next":{"title":"\ud14c\uc2a4\ud305","permalink":"/docs/fastapi/advanced/testing"}}');var a=t(4848),c=t(8453);const o={sidebar_position:2},i="WebSocket - \uc2e4\uc2dc\uac04 \ud1b5\uc2e0",d={},r=[{value:"\ud83d\udce6 \uc124\uce58",id:"-\uc124\uce58",level:2},{value:"\ud83d\udcdd \uae30\ubcf8 WebSocket",id:"-\uae30\ubcf8-websocket",level:2},{value:"\ud83c\udfa8 \ucc44\ud305\ubc29 (\uc5ec\ub7ec \ud074\ub77c\uc774\uc5b8\ud2b8)",id:"-\ucc44\ud305\ubc29-\uc5ec\ub7ec-\ud074\ub77c\uc774\uc5b8\ud2b8",level:2},{value:"\ud83d\udcda \ub2e4\uc74c \ub2e8\uacc4",id:"-\ub2e4\uc74c-\ub2e8\uacc4",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"websocket---\uc2e4\uc2dc\uac04-\ud1b5\uc2e0",children:"WebSocket - \uc2e4\uc2dc\uac04 \ud1b5\uc2e0"})}),"\n",(0,a.jsx)(n.p,{children:"WebSocket\uc744 \uc0ac\uc6a9\ud55c \uc591\ubc29\ud5a5 \uc2e4\uc2dc\uac04 \ud1b5\uc2e0\uc744 \uad6c\ud604\ud574\ubd05\uc2dc\ub2e4!"}),"\n",(0,a.jsx)(n.h2,{id:"-\uc124\uce58",children:"\ud83d\udce6 \uc124\uce58"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pip install websockets\n"})}),"\n",(0,a.jsx)(n.h2,{id:"-\uae30\ubcf8-websocket",children:"\ud83d\udcdd \uae30\ubcf8 WebSocket"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from fastapi import FastAPI, WebSocket\nfrom fastapi.responses import HTMLResponse\n\napp = FastAPI()\n\nhtml = """\n<!DOCTYPE html>\n<html>\n<head><title>WebSocket Chat</title></head>\n<body>\n    <h1>WebSocket Chat</h1>\n    <textarea id="messages" cols="50" rows="10"></textarea><br>\n    <input id="messageInput" autocomplete="off"/><button onclick="sendMessage()">Send</button>\n    <script>\n        var ws = new WebSocket("ws://localhost:8000/ws");\n        ws.onmessage = function(event) {\n            var messages = document.getElementById(\'messages\');\n            messages.value += event.data + \'\\\\n\';\n        };\n        function sendMessage() {\n            var input = document.getElementById("messageInput");\n            ws.send(input.value);\n            input.value = \'\';\n        }\n    <\/script>\n</body>\n</html>\n"""\n\n@app.get("/")\nasync def get():\n    return HTMLResponse(html)\n\n@app.websocket("/ws")\nasync def websocket_endpoint(websocket: WebSocket):\n    await websocket.accept()\n    while True:\n        data = await websocket.receive_text()\n        await websocket.send_text(f"Echo: {data}")\n'})}),"\n",(0,a.jsx)(n.h2,{id:"-\ucc44\ud305\ubc29-\uc5ec\ub7ec-\ud074\ub77c\uc774\uc5b8\ud2b8",children:"\ud83c\udfa8 \ucc44\ud305\ubc29 (\uc5ec\ub7ec \ud074\ub77c\uc774\uc5b8\ud2b8)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from typing import List\n\nclass ConnectionManager:\n    def __init__(self):\n        self.active_connections: List[WebSocket] = []\n\n    async def connect(self, websocket: WebSocket):\n        await websocket.accept()\n        self.active_connections.append(websocket)\n\n    def disconnect(self, websocket: WebSocket):\n        self.active_connections.remove(websocket)\n\n    async def broadcast(self, message: str):\n        for connection in self.active_connections:\n            await connection.send_text(message)\n\nmanager = ConnectionManager()\n\n@app.websocket("/ws/{client_id}")\nasync def websocket_endpoint(websocket: WebSocket, client_id: int):\n    await manager.connect(websocket)\n    try:\n        while True:\n            data = await websocket.receive_text()\n            await manager.broadcast(f"Client #{client_id}: {data}")\n    except WebSocketDisconnect:\n        manager.disconnect(websocket)\n        await manager.broadcast(f"Client #{client_id} left")\n'})}),"\n",(0,a.jsx)(n.h2,{id:"-\ub2e4\uc74c-\ub2e8\uacc4",children:"\ud83d\udcda \ub2e4\uc74c \ub2e8\uacc4"}),"\n",(0,a.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,a.jsx)(n.a,{href:"./testing",children:"\ud14c\uc2a4\ud305"})]})]})}function p(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>i});var s=t(6540);const a={},c=s.createContext(a);function o(e){const n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);