"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[9220],{4714:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"jinja2/advanced/intro","title":"\uace0\uae09 \uac1c\uc694","description":"Jinja2\uc758 \uace0\uae09 \uae30\ub2a5\uacfc \ucd5c\uc801\ud654 \uae30\ubc95\uc744 \ub9c8\uc2a4\ud130\ud574\ubd05\uc2dc\ub2e4!","source":"@site/docs/jinja2/advanced/intro.md","sourceDirName":"jinja2/advanced","slug":"/jinja2/advanced/intro","permalink":"/docs/jinja2/advanced/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/jinja2/advanced/intro.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1}}');var r=t(4848),i=t(8453);const l={sidebar_position:1},a="\uace0\uae09 \uac1c\uc694",d={},c=[{value:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c",id:"-\ud559\uc2b5-\ubaa9\ud45c",level:2},{value:"\ud83d\udcda \uc8fc\uc694 \uc8fc\uc81c",id:"-\uc8fc\uc694-\uc8fc\uc81c",level:2},{value:"1. \ud655\uc7a5 (Extensions)",id:"1-\ud655\uc7a5-extensions",level:3},{value:"2. \uc790\ub3d9 \uc774\uc2a4\ucf00\uc774\ud551",id:"2-\uc790\ub3d9-\uc774\uc2a4\ucf00\uc774\ud551",level:3},{value:"3. \ube44\ub3d9\uae30 \uc9c0\uc6d0",id:"3-\ube44\ub3d9\uae30-\uc9c0\uc6d0",level:3},{value:"4. \uc131\ub2a5 \ucd5c\uc801\ud654",id:"4-\uc131\ub2a5-\ucd5c\uc801\ud654",level:3},{value:"5. \ubcf4\uc548",id:"5-\ubcf4\uc548",level:3},{value:"6. AST \uc870\uc791",id:"6-ast-\uc870\uc791",level:3},{value:"\ud83d\udee4\ufe0f \ud559\uc2b5 \uacbd\ub85c",id:"\ufe0f-\ud559\uc2b5-\uacbd\ub85c",level:2},{value:"\ud83d\udccb \uc0ac\uc804 \uc694\uad6c\uc0ac\ud56d",id:"-\uc0ac\uc804-\uc694\uad6c\uc0ac\ud56d",level:2},{value:"\ud83c\udfa8 \uc2e4\uc804 \ubbf8\ub9ac\ubcf4\uae30",id:"-\uc2e4\uc804-\ubbf8\ub9ac\ubcf4\uae30",level:2},{value:"\uace0\uc131\ub2a5 \ud15c\ud50c\ub9bf \uc2dc\uc2a4\ud15c",id:"\uace0\uc131\ub2a5-\ud15c\ud50c\ub9bf-\uc2dc\uc2a4\ud15c",level:3},{value:"\uc0cc\ub4dc\ubc15\uc2a4 \ud658\uacbd",id:"\uc0cc\ub4dc\ubc15\uc2a4-\ud658\uacbd",level:3},{value:"\ucee4\uc2a4\ud140 \ud655\uc7a5",id:"\ucee4\uc2a4\ud140-\ud655\uc7a5",level:3},{value:"\ud83d\udca1 \uc2e4\uc804 \uc2dc\ub098\ub9ac\uc624",id:"-\uc2e4\uc804-\uc2dc\ub098\ub9ac\uc624",level:2},{value:"\ub300\uaddc\ubaa8 \ud504\ub85c\uc81d\ud2b8 \uad6c\uc870",id:"\ub300\uaddc\ubaa8-\ud504\ub85c\uc81d\ud2b8-\uad6c\uc870",level:3},{value:"\uc131\ub2a5 \ubaa8\ub2c8\ud130\ub9c1",id:"\uc131\ub2a5-\ubaa8\ub2c8\ud130\ub9c1",level:3},{value:"\ud83d\udcd6 \uac01 \uc8fc\uc81c\ubcc4 \uc608\uc0c1 \ud559\uc2b5 \uc2dc\uac04",id:"-\uac01-\uc8fc\uc81c\ubcc4-\uc608\uc0c1-\ud559\uc2b5-\uc2dc\uac04",level:2},{value:"\ud83c\udfaf \uc774 \uc139\uc158\uc744 \ub9c8\uce58\uba74",id:"-\uc774-\uc139\uc158\uc744-\ub9c8\uce58\uba74",level:2},{value:"\ud83d\udca1 \ud559\uc2b5 \ud301",id:"-\ud559\uc2b5-\ud301",level:2},{value:"\ub2e4\uc74c \ub2e8\uacc4",id:"\ub2e4\uc74c-\ub2e8\uacc4",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\uace0\uae09-\uac1c\uc694",children:"\uace0\uae09 \uac1c\uc694"})}),"\n",(0,r.jsx)(e.p,{children:"Jinja2\uc758 \uace0\uae09 \uae30\ub2a5\uacfc \ucd5c\uc801\ud654 \uae30\ubc95\uc744 \ub9c8\uc2a4\ud130\ud574\ubd05\uc2dc\ub2e4!"}),"\n",(0,r.jsx)(e.h2,{id:"-\ud559\uc2b5-\ubaa9\ud45c",children:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c"}),"\n",(0,r.jsx)(e.p,{children:"\uc774 \uc139\uc158\uc5d0\uc11c\ub294 \ub2e4\uc74c\uc744 \ubc30\uc6c1\ub2c8\ub2e4:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\ucee4\uc2a4\ud140 \ud655\uc7a5 \uac1c\ubc1c\ud558\uae30"}),"\n",(0,r.jsx)(e.li,{children:"\ubcf4\uc548 \uac15\ud654 \uae30\ubc95"}),"\n",(0,r.jsx)(e.li,{children:"\ube44\ub3d9\uae30 \ud15c\ud50c\ub9bf \ucc98\ub9ac"}),"\n",(0,r.jsx)(e.li,{children:"\uc131\ub2a5 \ucd5c\uc801\ud654 \ubc29\ubc95"}),"\n",(0,r.jsx)(e.li,{children:"AST \uc870\uc791\ud558\uae30"}),"\n",(0,r.jsx)(e.li,{children:"\ud504\ub85c\ub355\uc158 \ubc30\ud3ec \uc804\ub7b5"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"-\uc8fc\uc694-\uc8fc\uc81c",children:"\ud83d\udcda \uc8fc\uc694 \uc8fc\uc81c"}),"\n",(0,r.jsx)(e.h3,{id:"1-\ud655\uc7a5-extensions",children:"1. \ud655\uc7a5 (Extensions)"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\ub09c\uc774\ub3c4: \u2b50\u2b50\u2b50\u2b50"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"from jinja2 import Extension\n\nclass MyExtension(Extension):\n    tags = {'mytag'}\n\n    def parse(self, parser):\n        # \ucee4\uc2a4\ud140 \ud0dc\uadf8 \ud30c\uc2f1\n        pass\n"})}),"\n",(0,r.jsx)(e.h3,{id:"2-\uc790\ub3d9-\uc774\uc2a4\ucf00\uc774\ud551",children:"2. \uc790\ub3d9 \uc774\uc2a4\ucf00\uc774\ud551"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\ub09c\uc774\ub3c4: \u2b50\u2b50\u2b50"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"from jinja2 import Environment, select_autoescape\n\nenv = Environment(\n    autoescape=select_autoescape(\n        enabled_extensions=('html', 'xml'),\n        default_for_string=True\n    )\n)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"3-\ube44\ub3d9\uae30-\uc9c0\uc6d0",children:"3. \ube44\ub3d9\uae30 \uc9c0\uc6d0"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\ub09c\uc774\ub3c4: \u2b50\u2b50\u2b50"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'from jinja2 import Environment\n\nenv = Environment(enable_async=True)\n\ntemplate = env.from_string("""\n{% for item in async_generator() %}\n    {{ item }}\n{% endfor %}\n""")\n\n# \ube44\ub3d9\uae30 \ub80c\ub354\ub9c1\nhtml = await template.render_async()\n'})}),"\n",(0,r.jsx)(e.h3,{id:"4-\uc131\ub2a5-\ucd5c\uc801\ud654",children:"4. \uc131\ub2a5 \ucd5c\uc801\ud654"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\ub09c\uc774\ub3c4: \u2b50\u2b50\u2b50"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"# \ud15c\ud50c\ub9bf \ucef4\ud30c\uc77c \ubc0f \uce90\uc2f1\nfrom jinja2 import Environment, BytecodeCache\n\nclass RedisCache(BytecodeCache):\n    # Redis\ub97c \ud65c\uc6a9\ud55c \ubc14\uc774\ud2b8\ucf54\ub4dc \uce90\uc2f1\n    pass\n\nenv = Environment(bytecode_cache=RedisCache())\n"})}),"\n",(0,r.jsx)(e.h3,{id:"5-\ubcf4\uc548",children:"5. \ubcf4\uc548"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\ub09c\uc774\ub3c4: \u2b50\u2b50\u2b50"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"from jinja2.sandbox import SandboxedEnvironment\n\n# \uc0cc\ub4dc\ubc15\uc2a4 \ud658\uacbd\nenv = SandboxedEnvironment()\n\n# XSS \ubc29\uc9c0, \uc548\uc804\ud55c \ud15c\ud50c\ub9bf \uc2e4\ud589\n"})}),"\n",(0,r.jsx)(e.h3,{id:"6-ast-\uc870\uc791",children:"6. AST \uc870\uc791"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\ub09c\uc774\ub3c4: \u2b50\u2b50\u2b50\u2b50\u2b50"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"from jinja2 import nodes\n\nclass TransformerExtension(Extension):\n    def filter_stream(self, stream):\n        # \ud1a0\ud070 \uc2a4\ud2b8\ub9bc \uc870\uc791\n        pass\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\ufe0f-\ud559\uc2b5-\uacbd\ub85c",children:"\ud83d\udee4\ufe0f \ud559\uc2b5 \uacbd\ub85c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"1. \ubcf4\uc548 (\ud544\uc218)\n   \u2193\n2. \uc131\ub2a5 \ucd5c\uc801\ud654 (\uad8c\uc7a5)\n   \u2193\n3. \uc790\ub3d9 \uc774\uc2a4\ucf00\uc774\ud551 (\uad8c\uc7a5)\n   \u2193\n4. \ube44\ub3d9\uae30 \uc9c0\uc6d0 (\uc120\ud0dd)\n   \u2193\n5. \ud655\uc7a5 \uac1c\ubc1c (\uc120\ud0dd)\n   \u2193\n6. AST \uc870\uc791 (\uace0\uae09)\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-\uc0ac\uc804-\uc694\uad6c\uc0ac\ud56d",children:"\ud83d\udccb \uc0ac\uc804 \uc694\uad6c\uc0ac\ud56d"}),"\n",(0,r.jsx)(e.p,{children:"\uc774 \uc139\uc158\uc744 \uc2dc\uc791\ud558\uae30 \uc804\uc5d0:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u2705 \uae30\ucd08\ud3b8\uacfc \uc911\uae09\ud3b8\uc744 \uc644\ub8cc\ud588\uc2b5\ub2c8\ub2e4"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 Python \uace0\uae09 \ubb38\ubc95\uc744 \uc774\ud574\ud569\ub2c8\ub2e4"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \uc6f9 \ubcf4\uc548 \uae30\ubcf8 \uac1c\ub150\uc744 \uc54c\uace0 \uc788\uc2b5\ub2c8\ub2e4"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \uc131\ub2a5 \ud504\ub85c\ud30c\uc77c\ub9c1 \uacbd\ud5d8\uc774 \uc788\uc2b5\ub2c8\ub2e4"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"-\uc2e4\uc804-\ubbf8\ub9ac\ubcf4\uae30",children:"\ud83c\udfa8 \uc2e4\uc804 \ubbf8\ub9ac\ubcf4\uae30"}),"\n",(0,r.jsx)(e.h3,{id:"\uace0\uc131\ub2a5-\ud15c\ud50c\ub9bf-\uc2dc\uc2a4\ud15c",children:"\uace0\uc131\ub2a5 \ud15c\ud50c\ub9bf \uc2dc\uc2a4\ud15c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'from jinja2 import Environment, FileSystemLoader, select_autoescape\nfrom jinja2.bytecode import FileSystemBytecodeCache\nimport asyncio\n\nclass ProductionEnvironment:\n    """\ud504\ub85c\ub355\uc158\uc6a9 \ucd5c\uc801\ud654\ub41c \ud658\uacbd"""\n\n    def __init__(self, template_dir=\'templates\', cache_dir=\'cache\'):\n        self.env = Environment(\n            loader=FileSystemLoader(template_dir),\n            # \uc790\ub3d9 \uc774\uc2a4\ucf00\uc774\ud551 (\ubcf4\uc548)\n            autoescape=select_autoescape(\n                enabled_extensions=(\'html\', \'xml\'),\n                default_for_string=True\n            ),\n            # \ubc14\uc774\ud2b8\ucf54\ub4dc \uce90\uc2f1 (\uc131\ub2a5)\n            bytecode_cache=FileSystemBytecodeCache(cache_dir),\n            # \uc790\ub3d9 \ub9ac\ub85c\ub4dc \ube44\ud65c\uc131\ud654 (\ud504\ub85c\ub355\uc158)\n            auto_reload=False,\n            # \ud2b8\ub9bc \uc124\uc815\n            trim_blocks=True,\n            lstrip_blocks=True,\n            # \ube44\ub3d9\uae30 \ud65c\uc131\ud654\n            enable_async=True\n        )\n\n        # \uc804\uc5ed \ud568\uc218 \ub4f1\ub85d\n        self._register_globals()\n\n        # \ud544\ud130 \ub4f1\ub85d\n        self._register_filters()\n\n    def _register_globals(self):\n        """\uc804\uc5ed \ud568\uc218 \ub4f1\ub85d"""\n        from datetime import datetime\n\n        self.env.globals.update({\n            \'now\': datetime.now,\n            \'version\': \'1.0.0\',\n            \'debug\': False\n        })\n\n    def _register_filters(self):\n        """\ud544\ud130 \ub4f1\ub85d"""\n        def format_currency(value):\n            return f"\u20a9{value:,.0f}"\n\n        self.env.filters[\'currency\'] = format_currency\n\n    async def render_async(self, template_name, **context):\n        """\ube44\ub3d9\uae30 \ub80c\ub354\ub9c1"""\n        template = self.env.get_template(template_name)\n        return await template.render_async(**context)\n\n    def render(self, template_name, **context):\n        """\ub3d9\uae30 \ub80c\ub354\ub9c1"""\n        template = self.env.get_template(template_name)\n        return template.render(**context)\n\n# \uc0ac\uc6a9\nenv = ProductionEnvironment()\n\n# \ub3d9\uae30\nhtml = env.render(\'index.html\', user={\'name\': \'\ud64d\uae38\ub3d9\'})\n\n# \ube44\ub3d9\uae30\nasync def main():\n    html = await env.render_async(\'index.html\', user={\'name\': \'\ud64d\uae38\ub3d9\'})\n    print(html)\n\nasyncio.run(main())\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\uc0cc\ub4dc\ubc15\uc2a4-\ud658\uacbd",children:"\uc0cc\ub4dc\ubc15\uc2a4 \ud658\uacbd"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'from jinja2.sandbox import SandboxedEnvironment\n\nclass SafeEnvironment(SandboxedEnvironment):\n    """\uc548\uc804\ud55c \ud15c\ud50c\ub9bf \uc2e4\ud589 \ud658\uacbd"""\n\n    def is_safe_attribute(self, obj, attr, value):\n        """\uc18d\uc131 \uc811\uadfc \uc81c\uc5b4"""\n        # \ube44\uacf5\uac1c \uc18d\uc131 \ucc28\ub2e8\n        if attr.startswith(\'_\'):\n            return False\n\n        # \ud2b9\uc815 \uc18d\uc131\ub9cc \ud5c8\uc6a9\n        allowed_attrs = [\'name\', \'email\', \'title\', \'content\']\n        return attr in allowed_attrs\n\n    def is_safe_callable(self, obj):\n        """\ud568\uc218 \ud638\ucd9c \uc81c\uc5b4"""\n        # \uc548\uc804\ud55c \ud568\uc218\ub9cc \ud638\ucd9c \uac00\ub2a5\n        safe_functions = {str, len, list, dict}\n        return obj in safe_functions\n\n# \uc0ac\uc6a9\nenv = SafeEnvironment()\n\ntemplate = env.from_string("""\n{{ user.name }}  {# OK #}\n{{ user._password }}  {# \ucc28\ub2e8\ub428 #}\n{{ user.__dict__ }}  {# \ucc28\ub2e8\ub428 #}\n""")\n\ntry:\n    html = template.render(user={\'name\': \'\ud64d\uae38\ub3d9\', \'_password\': \'secret\'})\n    print(html)\nexcept Exception as e:\n    print(f"\ubcf4\uc548 \uc624\ub958: {e}")\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\ucee4\uc2a4\ud140-\ud655\uc7a5",children:"\ucee4\uc2a4\ud140 \ud655\uc7a5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'from jinja2 import nodes\nfrom jinja2.ext import Extension\n\nclass CacheExtension(Extension):\n    """\ud15c\ud50c\ub9bf \ube14\ub85d \uce90\uc2f1 \ud655\uc7a5"""\n\n    tags = {\'cache\'}\n\n    def __init__(self, environment):\n        super().__init__(environment)\n        self.cache = {}\n\n    def parse(self, parser):\n        lineno = next(parser.stream).lineno\n\n        # {% cache timeout, key %}\n        timeout = parser.parse_expression()\n        parser.stream.expect(\'comma\')\n        key = parser.parse_expression()\n\n        # \ube14\ub85d \ud30c\uc2f1\n        body = parser.parse_statements([\'name:endcache\'], drop_needle=True)\n\n        # \ub178\ub4dc \uc0dd\uc131\n        return nodes.CallBlock(\n            self.call_method(\'_cache_support\', [timeout, key]),\n            [], [], body\n        ).set_lineno(lineno)\n\n    def _cache_support(self, timeout, key, caller):\n        """\uce90\uc2dc \ub85c\uc9c1"""\n        import time\n\n        # \uce90\uc2dc \ud655\uc778\n        if key in self.cache:\n            cached_data, cached_time = self.cache[key]\n            if time.time() - cached_time < timeout:\n                return cached_data\n\n        # \ub80c\ub354\ub9c1 \ubc0f \uce90\uc2f1\n        content = caller()\n        self.cache[key] = (content, time.time())\n        return content\n\n# \uc0ac\uc6a9\nfrom jinja2 import Environment\n\nenv = Environment(extensions=[CacheExtension])\n\ntemplate = env.from_string("""\n{% cache 60, \'sidebar\' %}\n    <aside>\n        {# \ubb34\uac70\uc6b4 \uc5f0\uc0b0 #}\n        {% for item in expensive_query() %}\n            {{ item }}\n        {% endfor %}\n    </aside>\n{% endcache %}\n""")\n'})}),"\n",(0,r.jsx)(e.h2,{id:"-\uc2e4\uc804-\uc2dc\ub098\ub9ac\uc624",children:"\ud83d\udca1 \uc2e4\uc804 \uc2dc\ub098\ub9ac\uc624"}),"\n",(0,r.jsx)(e.h3,{id:"\ub300\uaddc\ubaa8-\ud504\ub85c\uc81d\ud2b8-\uad6c\uc870",children:"\ub300\uaddc\ubaa8 \ud504\ub85c\uc81d\ud2b8 \uad6c\uc870"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"project/\n\u251c\u2500\u2500 templates/\n\u2502   \u251c\u2500\u2500 base/\n\u2502   \u2502   \u251c\u2500\u2500 base.html\n\u2502   \u2502   \u2514\u2500\u2500 admin.html\n\u2502   \u251c\u2500\u2500 components/\n\u2502   \u2502   \u251c\u2500\u2500 buttons.html\n\u2502   \u2502   \u2514\u2500\u2500 forms.html\n\u2502   \u2514\u2500\u2500 pages/\n\u2502       \u251c\u2500\u2500 home.html\n\u2502       \u2514\u2500\u2500 about.html\n\u251c\u2500\u2500 extensions/\n\u2502   \u251c\u2500\u2500 cache.py\n\u2502   \u251c\u2500\u2500 assets.py\n\u2502   \u2514\u2500\u2500 markdown.py\n\u251c\u2500\u2500 filters/\n\u2502   \u251c\u2500\u2500 text.py\n\u2502   \u251c\u2500\u2500 date.py\n\u2502   \u2514\u2500\u2500 currency.py\n\u2514\u2500\u2500 config/\n    \u251c\u2500\u2500 production.py\n    \u2514\u2500\u2500 development.py\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc131\ub2a5-\ubaa8\ub2c8\ud130\ub9c1",children:"\uc131\ub2a5 \ubaa8\ub2c8\ud130\ub9c1"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'import time\nfrom jinja2 import Environment\n\nclass ProfilingEnvironment(Environment):\n    """\uc131\ub2a5 \ud504\ub85c\ud30c\uc77c\ub9c1 \ud658\uacbd"""\n\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        self.render_times = {}\n\n    def get_template(self, name, parent=None, globals=None):\n        """\ud15c\ud50c\ub9bf \ub85c\ub529 \uc2dc\uac04 \uce21\uc815"""\n        start = time.time()\n        template = super().get_template(name, parent, globals)\n        elapsed = time.time() - start\n\n        if name not in self.render_times:\n            self.render_times[name] = []\n        self.render_times[name].append((\'load\', elapsed))\n\n        # \ub798\ud551\ub41c \ud15c\ud50c\ub9bf \ubc18\ud658\n        return ProfiledTemplate(template, self, name)\n\n    def get_stats(self):\n        """\ud1b5\uacc4 \ubc18\ud658"""\n        stats = {}\n        for name, times in self.render_times.items():\n            load_times = [t for op, t in times if op == \'load\']\n            render_times = [t for op, t in times if op == \'render\']\n\n            stats[name] = {\n                \'load_count\': len(load_times),\n                \'render_count\': len(render_times),\n                \'avg_load_time\': sum(load_times) / len(load_times) if load_times else 0,\n                \'avg_render_time\': sum(render_times) / len(render_times) if render_times else 0\n            }\n        return stats\n\nclass ProfiledTemplate:\n    """\ud504\ub85c\ud30c\uc77c\ub9c1 \ud15c\ud50c\ub9bf \ub798\ud37c"""\n\n    def __init__(self, template, environment, name):\n        self.template = template\n        self.environment = environment\n        self.name = name\n\n    def render(self, *args, **kwargs):\n        start = time.time()\n        result = self.template.render(*args, **kwargs)\n        elapsed = time.time() - start\n\n        self.environment.render_times[self.name].append((\'render\', elapsed))\n        return result\n\n# \uc0ac\uc6a9\nenv = ProfilingEnvironment()\n\nfor i in range(100):\n    template = env.get_template(\'index.html\')\n    html = template.render(user={\'name\': f\'User {i}\'})\n\n# \ud1b5\uacc4 \ud655\uc778\nprint(env.get_stats())\n'})}),"\n",(0,r.jsx)(e.h2,{id:"-\uac01-\uc8fc\uc81c\ubcc4-\uc608\uc0c1-\ud559\uc2b5-\uc2dc\uac04",children:"\ud83d\udcd6 \uac01 \uc8fc\uc81c\ubcc4 \uc608\uc0c1 \ud559\uc2b5 \uc2dc\uac04"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\uc8fc\uc81c"}),(0,r.jsx)(e.th,{children:"\uc2dc\uac04"}),(0,r.jsx)(e.th,{children:"\uc911\uc694\ub3c4"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\ubcf4\uc548"}),(0,r.jsx)(e.td,{children:"2-3\uc2dc\uac04"}),(0,r.jsx)(e.td,{children:"\u2b50\u2b50\u2b50"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\uc131\ub2a5 \ucd5c\uc801\ud654"}),(0,r.jsx)(e.td,{children:"2-3\uc2dc\uac04"}),(0,r.jsx)(e.td,{children:"\u2b50\u2b50\u2b50"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\uc790\ub3d9 \uc774\uc2a4\ucf00\uc774\ud551"}),(0,r.jsx)(e.td,{children:"1-2\uc2dc\uac04"}),(0,r.jsx)(e.td,{children:"\u2b50\u2b50"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\ube44\ub3d9\uae30 \uc9c0\uc6d0"}),(0,r.jsx)(e.td,{children:"2\uc2dc\uac04"}),(0,r.jsx)(e.td,{children:"\u2b50\u2b50"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\ud655\uc7a5 \uac1c\ubc1c"}),(0,r.jsx)(e.td,{children:"3-4\uc2dc\uac04"}),(0,r.jsx)(e.td,{children:"\u2b50"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"AST \uc870\uc791"}),(0,r.jsx)(e.td,{children:"4-5\uc2dc\uac04"}),(0,r.jsx)(e.td,{children:"\u2b50"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\ucd1d \uc608\uc0c1 \uc2dc\uac04: 14-19\uc2dc\uac04"})}),"\n",(0,r.jsx)(e.h2,{id:"-\uc774-\uc139\uc158\uc744-\ub9c8\uce58\uba74",children:"\ud83c\udfaf \uc774 \uc139\uc158\uc744 \ub9c8\uce58\uba74"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u2705 \ud504\ub85c\ub355\uc158 \ud658\uacbd\uc5d0 \uc548\uc804\ud558\uac8c \ubc30\ud3ec\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \ub300\uaddc\ubaa8 \ud2b8\ub798\ud53d\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \ucee4\uc2a4\ud140 \ud655\uc7a5\uc744 \uac1c\ubc1c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \ubcf4\uc548 \ucde8\uc57d\uc810\uc744 \uc774\ud574\ud558\uace0 \ubc29\uc9c0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \uc131\ub2a5 \ubcd1\ubaa9\uc744 \ucc3e\uc544 \ucd5c\uc801\ud654\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"-\ud559\uc2b5-\ud301",children:"\ud83d\udca1 \ud559\uc2b5 \ud301"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\ubcf4\uc548\ubd80\ud130 \uc2dc\uc791\ud558\uc138\uc694"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\uac00\uc7a5 \uc911\uc694\ud558\uace0 \uc989\uc2dc \uc801\uc6a9 \uac00\ub2a5\ud55c \ub0b4\uc6a9\uc785\ub2c8\ub2e4"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\uc2e4\uc81c \ud504\ub85c\uc81d\ud2b8\uc5d0 \uc801\uc6a9\ud558\uc138\uc694"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\uc774\ub860\ub9cc\uc73c\ub85c\ub294 \ubd80\uc871\ud569\ub2c8\ub2e4"}),"\n",(0,r.jsx)(e.li,{children:"\uc2e4\uc81c \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uba74\uc11c \ubc30\uc6b0\uc138\uc694"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\uc131\ub2a5 \uce21\uc815\uc744 \uc2b5\uad00\ud654\ud558\uc138\uc694"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\ucd5c\uc801\ud654 \uc804\ud6c4\ub97c \ud56d\uc0c1 \uce21\uc815\ud558\uc138\uc694"}),"\n",(0,r.jsx)(e.li,{children:"\ucd94\uce21\uc774 \uc544\ub2cc \ub370\uc774\ud130\ub85c \uacb0\uc815\ud558\uc138\uc694"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Jinja2 \uc18c\uc2a4\ucf54\ub4dc\ub97c \uc77d\uc5b4\ubcf4\uc138\uc694"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\uace0\uae09 \uae30\ub2a5\uc744 \uc774\ud574\ud558\ub294 \uac00\uc7a5 \uc88b\uc740 \ubc29\ubc95\uc785\ub2c8\ub2e4"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\ub2e4\uc74c-\ub2e8\uacc4",children:"\ub2e4\uc74c \ub2e8\uacc4"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.a,{href:"./extensions",children:"\ud655\uc7a5 \uac1c\ubc1c"}),"\ub85c Jinja2\uc758 \uae30\ub2a5\uc744 \ud655\uc7a5\ud574\ubd05\uc2dc\ub2e4!"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>l,x:()=>a});var s=t(6540);const r={},i=s.createContext(r);function l(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);