"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[756],{1959:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>s,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"alembic/intermediate/autogenerate","title":"\uc790\ub3d9 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131 (Autogenerate)","description":"SQLAlchemy \ubaa8\ub378\uc5d0\uc11c \uc790\ub3d9\uc73c\ub85c \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc744 \uc0dd\uc131\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6cc\ubd05\uc2dc\ub2e4!","source":"@site/docs/alembic/intermediate/autogenerate.md","sourceDirName":"alembic/intermediate","slug":"/alembic/intermediate/autogenerate","permalink":"/tobias-docs/comp-0/docs/alembic/intermediate/autogenerate","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/alembic/intermediate/autogenerate.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"alembicSidebar","previous":{"title":"\uc911\uae09\ud3b8 \uc18c\uac1c","permalink":"/tobias-docs/comp-0/docs/alembic/intermediate/intro"},"next":{"title":"\ub370\uc774\ud130 \ub9c8\uc774\uadf8\ub808\uc774\uc158","permalink":"/tobias-docs/comp-0/docs/alembic/intermediate/data-migration"}}');var r=a(4848),i=a(8453);const s={sidebar_position:2},t="\uc790\ub3d9 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131 (Autogenerate)",d={},o=[{value:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c",id:"-\ud559\uc2b5-\ubaa9\ud45c",level:2},{value:"\ud83d\ude80 Autogenerate \uc0ac\uc6a9\ud558\uae30",id:"-autogenerate-\uc0ac\uc6a9\ud558\uae30",level:2},{value:"\uae30\ubcf8 \uba85\ub839\uc5b4",id:"\uae30\ubcf8-\uba85\ub839\uc5b4",level:3},{value:"\uc124\uc815 \ud655\uc778",id:"\uc124\uc815-\ud655\uc778",level:3},{value:"\ud83d\udcdd \uc2e4\uc804 \uc608\uc81c",id:"-\uc2e4\uc804-\uc608\uc81c",level:2},{value:"1\ub2e8\uacc4: SQLAlchemy \ubaa8\ub378 \uc791\uc131",id:"1\ub2e8\uacc4-sqlalchemy-\ubaa8\ub378-\uc791\uc131",level:3},{value:"2\ub2e8\uacc4: \ucd08\uae30 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131",id:"2\ub2e8\uacc4-\ucd08\uae30-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc0dd\uc131",level:3},{value:"3\ub2e8\uacc4: \ubaa8\ub378 \uc218\uc815",id:"3\ub2e8\uacc4-\ubaa8\ub378-\uc218\uc815",level:3},{value:"4\ub2e8\uacc4: \ubcc0\uacbd\uc0ac\ud56d \uc790\ub3d9 \uac10\uc9c0",id:"4\ub2e8\uacc4-\ubcc0\uacbd\uc0ac\ud56d-\uc790\ub3d9-\uac10\uc9c0",level:3},{value:"\ud83c\udfa8 \ub2e4\uc591\ud55c \ubcc0\uacbd \uc0ac\ud56d \uac10\uc9c0",id:"-\ub2e4\uc591\ud55c-\ubcc0\uacbd-\uc0ac\ud56d-\uac10\uc9c0",level:2},{value:"\uceec\ub7fc \ucd94\uac00/\uc0ad\uc81c",id:"\uceec\ub7fc-\ucd94\uac00\uc0ad\uc81c",level:3},{value:"\uceec\ub7fc \ud0c0\uc785 \ubcc0\uacbd",id:"\uceec\ub7fc-\ud0c0\uc785-\ubcc0\uacbd",level:3},{value:"\uc81c\uc57d\uc870\uac74 \ubcc0\uacbd",id:"\uc81c\uc57d\uc870\uac74-\ubcc0\uacbd",level:3},{value:"\uc778\ub371\uc2a4 \ucd94\uac00",id:"\uc778\ub371\uc2a4-\ucd94\uac00",level:3},{value:"\ud83d\udd0d Autogenerate\uac00 \uac10\uc9c0\ud558\ub294 \uac83",id:"-autogenerate\uac00-\uac10\uc9c0\ud558\ub294-\uac83",level:2},{value:"\u26a0\ufe0f Autogenerate \ud55c\uacc4\uc640 \uc8fc\uc758\uc0ac\ud56d",id:"\ufe0f-autogenerate-\ud55c\uacc4\uc640-\uc8fc\uc758\uc0ac\ud56d",level:2},{value:"1. \uceec\ub7fc \uc774\ub984 \ubcc0\uacbd \ubb38\uc81c",id:"1-\uceec\ub7fc-\uc774\ub984-\ubcc0\uacbd-\ubb38\uc81c",level:3},{value:"2. \ub370\uc774\ud130 \uc190\uc2e4 \uc704\ud5d8",id:"2-\ub370\uc774\ud130-\uc190\uc2e4-\uc704\ud5d8",level:3},{value:"3. Check \uc81c\uc57d\uc870\uac74",id:"3-check-\uc81c\uc57d\uc870\uac74",level:3},{value:"\ud83d\udee0\ufe0f \uc2e4\uc804 \ud301",id:"\ufe0f-\uc2e4\uc804-\ud301",level:2},{value:"1. \ud56d\uc0c1 \uac80\ud1a0\ud558\uae30",id:"1-\ud56d\uc0c1-\uac80\ud1a0\ud558\uae30",level:3},{value:"2. \ubb34\uc2dc\ud560 \ud14c\uc774\ube14 \uc124\uc815",id:"2-\ubb34\uc2dc\ud560-\ud14c\uc774\ube14-\uc124\uc815",level:3},{value:"3. \ud0c0\uc785 \ube44\uad50 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5",id:"3-\ud0c0\uc785-\ube44\uad50-\ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5",level:3},{value:"\ud83d\udcca \uc644\uc804\ud55c \uc608\uc81c: \ube14\ub85c\uadf8 \uc2dc\uc2a4\ud15c",id:"-\uc644\uc804\ud55c-\uc608\uc81c-\ube14\ub85c\uadf8-\uc2dc\uc2a4\ud15c",level:2},{value:"1. \ucd08\uae30 \ubaa8\ub378",id:"1-\ucd08\uae30-\ubaa8\ub378",level:3},{value:"2. \uae30\ub2a5 \ucd94\uac00",id:"2-\uae30\ub2a5-\ucd94\uac00",level:3},{value:"3. \ud504\ub85c\ud544 \uae30\ub2a5",id:"3-\ud504\ub85c\ud544-\uae30\ub2a5",level:3},{value:"\u2705 \uc2e4\uc2b5 \uacfc\uc81c",id:"-\uc2e4\uc2b5-\uacfc\uc81c",level:2},{value:"\ud83d\udcda \ud575\uc2ec \uc815\ub9ac",id:"-\ud575\uc2ec-\uc815\ub9ac",level:2},{value:"\ud83d\udcda \ub2e4\uc74c \ub2e8\uacc4",id:"-\ub2e4\uc74c-\ub2e8\uacc4",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Details:a}=n;return a||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\uc790\ub3d9-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc0dd\uc131-autogenerate",children:"\uc790\ub3d9 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131 (Autogenerate)"})}),"\n",(0,r.jsx)(n.p,{children:"SQLAlchemy \ubaa8\ub378\uc5d0\uc11c \uc790\ub3d9\uc73c\ub85c \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc744 \uc0dd\uc131\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6cc\ubd05\uc2dc\ub2e4!"}),"\n",(0,r.jsx)(n.h2,{id:"-\ud559\uc2b5-\ubaa9\ud45c",children:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"autogenerate\ub85c \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc790\ub3d9 \uc0dd\uc131"}),"\n",(0,r.jsx)(n.li,{children:"\ubaa8\ub378 \ubcc0\uacbd \uc0ac\ud56d \uc790\ub3d9 \uac10\uc9c0"}),"\n",(0,r.jsx)(n.li,{children:"\uc790\ub3d9 \uc0dd\uc131\uc758 \ud55c\uacc4 \uc774\ud574"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-autogenerate-\uc0ac\uc6a9\ud558\uae30",children:"\ud83d\ude80 Autogenerate \uc0ac\uc6a9\ud558\uae30"}),"\n",(0,r.jsx)(n.h3,{id:"\uae30\ubcf8-\uba85\ub839\uc5b4",children:"\uae30\ubcf8 \uba85\ub839\uc5b4"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \uc790\ub3d9\uc73c\ub85c \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131\nalembic revision --autogenerate -m "add user profile fields"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\uc124\uc815-\ud655\uc778",children:"\uc124\uc815 \ud655\uc778"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"alembic/env.py"}),"\uc5d0\uc11c ",(0,r.jsx)(n.code,{children:"target_metadata"})," \uc124\uc815\uc774 \ud544\uc694\ud569\ub2c8\ub2e4:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# alembic/env.py\nfrom myapp.models import Base\n\n# \uc774 \ubd80\ubd84\uc774 \uc911\uc694!\ntarget_metadata = Base.metadata\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-\uc2e4\uc804-\uc608\uc81c",children:"\ud83d\udcdd \uc2e4\uc804 \uc608\uc81c"}),"\n",(0,r.jsx)(n.h3,{id:"1\ub2e8\uacc4-sqlalchemy-\ubaa8\ub378-\uc791\uc131",children:"1\ub2e8\uacc4: SQLAlchemy \ubaa8\ub378 \uc791\uc131"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# models.py\nfrom sqlalchemy import Column, Integer, String, DateTime\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom datetime import datetime\n\nBase = declarative_base()\n\nclass User(Base):\n    __tablename__ = 'users'\n\n    id = Column(Integer, primary_key=True)\n    username = Column(String(50), unique=True, nullable=False)\n    email = Column(String(100), unique=True, nullable=False)\n    created_at = Column(DateTime, default=datetime.utcnow)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2\ub2e8\uacc4-\ucd08\uae30-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc0dd\uc131",children:"2\ub2e8\uacc4: \ucd08\uae30 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'alembic revision --autogenerate -m "create users table"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\uc0dd\uc131\ub41c \ud30c\uc77c:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"\"\"\"create users table\n\nRevision ID: abc123\n\"\"\"\n\ndef upgrade():\n    op.create_table('users',\n    sa.Column('id', sa.Integer(), nullable=False),\n    sa.Column('username', sa.String(length=50), nullable=False),\n    sa.Column('email', sa.String(length=100), nullable=False),\n    sa.Column('created_at', sa.DateTime(), nullable=True),\n    sa.PrimaryKeyConstraint('id')\n    )\n    op.create_index(op.f('ix_users_email'), 'users', ['email'], unique=True)\n    op.create_index(op.f('ix_users_username'), 'users', ['username'], unique=True)\n\ndef downgrade():\n    op.drop_index(op.f('ix_users_username'), table_name='users')\n    op.drop_index(op.f('ix_users_email'), table_name='users')\n    op.drop_table('users')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3\ub2e8\uacc4-\ubaa8\ub378-\uc218\uc815",children:"3\ub2e8\uacc4: \ubaa8\ub378 \uc218\uc815"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# models.py - \ud544\ub4dc \ucd94\uac00\nclass User(Base):\n    __tablename__ = 'users'\n\n    id = Column(Integer, primary_key=True)\n    username = Column(String(50), unique=True, nullable=False)\n    email = Column(String(100), unique=True, nullable=False)\n    # \uc0c8\ub85c \ucd94\uac00\ub41c \ud544\ub4dc\ub4e4\n    first_name = Column(String(50))\n    last_name = Column(String(50))\n    bio = Column(Text())\n    avatar_url = Column(String(500))\n    created_at = Column(DateTime, default=datetime.utcnow)\n    updated_at = Column(DateTime, onupdate=datetime.utcnow)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4\ub2e8\uacc4-\ubcc0\uacbd\uc0ac\ud56d-\uc790\ub3d9-\uac10\uc9c0",children:"4\ub2e8\uacc4: \ubcc0\uacbd\uc0ac\ud56d \uc790\ub3d9 \uac10\uc9c0"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'alembic revision --autogenerate -m "add user profile fields"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\uc0dd\uc131\ub41c \ub9c8\uc774\uadf8\ub808\uc774\uc158:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"\"\"\"add user profile fields\n\nRevision ID: def456\nRevises: abc123\n\"\"\"\n\ndef upgrade():\n    op.add_column('users', sa.Column('avatar_url', sa.String(length=500), nullable=True))\n    op.add_column('users', sa.Column('bio', sa.Text(), nullable=True))\n    op.add_column('users', sa.Column('first_name', sa.String(length=50), nullable=True))\n    op.add_column('users', sa.Column('last_name', sa.String(length=50), nullable=True))\n    op.add_column('users', sa.Column('updated_at', sa.DateTime(), nullable=True))\n\ndef downgrade():\n    op.drop_column('users', 'updated_at')\n    op.drop_column('users', 'last_name')\n    op.drop_column('users', 'first_name')\n    op.drop_column('users', 'bio')\n    op.drop_column('users', 'avatar_url')\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-\ub2e4\uc591\ud55c-\ubcc0\uacbd-\uc0ac\ud56d-\uac10\uc9c0",children:"\ud83c\udfa8 \ub2e4\uc591\ud55c \ubcc0\uacbd \uc0ac\ud56d \uac10\uc9c0"}),"\n",(0,r.jsx)(n.h3,{id:"\uceec\ub7fc-\ucd94\uac00\uc0ad\uc81c",children:"\uceec\ub7fc \ucd94\uac00/\uc0ad\uc81c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# \ubaa8\ub378 \uc218\uc815\nclass Product(Base):\n    __tablename__ = 'products'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n    # price \uc0ad\uc81c, new_field \ucd94\uac00\n    new_field = Column(String(50))\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'alembic revision --autogenerate -m "update products"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\uceec\ub7fc-\ud0c0\uc785-\ubcc0\uacbd",children:"\uceec\ub7fc \ud0c0\uc785 \ubcc0\uacbd"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# \uc774\uc804\nprice = Column(Integer)\n\n# \uc774\ud6c4\nprice = Column(Numeric(10, 2))\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'alembic revision --autogenerate -m "change price to decimal"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\uc81c\uc57d\uc870\uac74-\ubcc0\uacbd",children:"\uc81c\uc57d\uc870\uac74 \ubcc0\uacbd"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"class User(Base):\n    __tablename__ = 'users'\n    id = Column(Integer, primary_key=True)\n    email = Column(String(100), unique=True)  # unique \ucd94\uac00\n    age = Column(Integer, CheckConstraint('age >= 0'))  # check \ucd94\uac00\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\uc778\ub371\uc2a4-\ucd94\uac00",children:"\uc778\ub371\uc2a4 \ucd94\uac00"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"class Post(Base):\n    __tablename__ = 'posts'\n    id = Column(Integer, primary_key=True)\n    title = Column(String(200), index=True)  # \uc778\ub371\uc2a4 \ucd94\uac00\n    created_at = Column(DateTime, index=True)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-autogenerate\uac00-\uac10\uc9c0\ud558\ub294-\uac83",children:"\ud83d\udd0d Autogenerate\uac00 \uac10\uc9c0\ud558\ub294 \uac83"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"\uac10\uc9c0\ub428"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud14c\uc774\ube14 \ucd94\uac00/\uc0ad\uc81c"}),"\n",(0,r.jsx)(n.li,{children:"\uceec\ub7fc \ucd94\uac00/\uc0ad\uc81c"}),"\n",(0,r.jsx)(n.li,{children:"\uceec\ub7fc \ud0c0\uc785 \ubcc0\uacbd (\ub300\ubd80\ubd84)"}),"\n",(0,r.jsx)(n.li,{children:"NULL \ud5c8\uc6a9 \uc5ec\ubd80 \ubcc0\uacbd"}),"\n",(0,r.jsx)(n.li,{children:"\uc778\ub371\uc2a4 \ucd94\uac00/\uc0ad\uc81c"}),"\n",(0,r.jsx)(n.li,{children:"\uc720\ub2c8\ud06c \uc81c\uc57d\uc870\uac74 \ucd94\uac00/\uc0ad\uc81c"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u274c ",(0,r.jsx)(n.strong,{children:"\uac10\uc9c0\ub418\uc9c0 \uc54a\uc74c"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uceec\ub7fc \uc774\ub984 \ubcc0\uacbd (\uc0ad\uc81c+\ucd94\uac00\ub85c \uc778\uc2dd)"}),"\n",(0,r.jsx)(n.li,{children:"\ud14c\uc774\ube14 \uc774\ub984 \ubcc0\uacbd"}),"\n",(0,r.jsx)(n.li,{children:"Check \uc81c\uc57d\uc870\uac74 \ubcc0\uacbd"}),"\n",(0,r.jsx)(n.li,{children:"\uc11c\ubc84 \uae30\ubcf8\uac12 \ubcc0\uacbd"}),"\n",(0,r.jsx)(n.li,{children:"\uc2dc\ud000\uc2a4 \ubcc0\uacbd"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-autogenerate-\ud55c\uacc4\uc640-\uc8fc\uc758\uc0ac\ud56d",children:"\u26a0\ufe0f Autogenerate \ud55c\uacc4\uc640 \uc8fc\uc758\uc0ac\ud56d"}),"\n",(0,r.jsx)(n.h3,{id:"1-\uceec\ub7fc-\uc774\ub984-\ubcc0\uacbd-\ubb38\uc81c",children:"1. \uceec\ub7fc \uc774\ub984 \ubcc0\uacbd \ubb38\uc81c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# \u274c Autogenerate \uacb0\uacfc (\uc798\ubabb\ub428)\ndef upgrade():\n    op.drop_column('users', 'username')\n    op.add_column('users', sa.Column('user_name', sa.String(50)))\n\n# \u2705 \uc218\ub3d9 \uc218\uc815 \ud544\uc694\ndef upgrade():\n    op.alter_column('users', 'username',\n        new_column_name='user_name')\n\ndef downgrade():\n    op.alter_column('users', 'user_name',\n        new_column_name='username')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-\ub370\uc774\ud130-\uc190\uc2e4-\uc704\ud5d8",children:"2. \ub370\uc774\ud130 \uc190\uc2e4 \uc704\ud5d8"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Autogenerate \uc0dd\uc131 (\uc704\ud5d8!)\ndef upgrade():\n    op.drop_column('users', 'old_field')  # \ub370\uc774\ud130 \uc190\uc2e4!\n\n# \u2705 \uc218\ub3d9\uc73c\ub85c \ubc31\uc5c5 \ucf54\ub4dc \ucd94\uac00\ndef upgrade():\n    # 1. \ubc31\uc5c5 \uceec\ub7fc \uc0dd\uc131\n    op.add_column('users', sa.Column('old_field_backup', sa.String(100)))\n\n    # 2. \ub370\uc774\ud130 \ubcf5\uc0ac\n    op.execute('UPDATE users SET old_field_backup = old_field')\n\n    # 3. \uc6d0\ubcf8 \uc0ad\uc81c\n    op.drop_column('users', 'old_field')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-check-\uc81c\uc57d\uc870\uac74",children:"3. Check \uc81c\uc57d\uc870\uac74"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# models.py\nage = Column(Integer, CheckConstraint('age >= 18'))\n\n# \u274c Autogenerate\ub294 \uac10\uc9c0 \ubabb\ud568\n# \u2705 \uc218\ub3d9\uc73c\ub85c \ucd94\uac00 \ud544\uc694\ndef upgrade():\n    op.add_column('users', sa.Column('age', sa.Integer()))\n    op.create_check_constraint('check_age', 'users', 'age >= 18')\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-\uc2e4\uc804-\ud301",children:"\ud83d\udee0\ufe0f \uc2e4\uc804 \ud301"}),"\n",(0,r.jsx)(n.h3,{id:"1-\ud56d\uc0c1-\uac80\ud1a0\ud558\uae30",children:"1. \ud56d\uc0c1 \uac80\ud1a0\ud558\uae30"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# 1. Autogenerate \uc2e4\ud589\nalembic revision --autogenerate -m "update schema"\n\n# 2. \uc0dd\uc131\ub41c \ud30c\uc77c \uac80\ud1a0\ncat alembic/versions/xxx_update_schema.py\n\n# 3. \ud544\uc694\ud558\uba74 \uc218\uc815\n\n# 4. \ud14c\uc2a4\ud2b8\nalembic upgrade head\nalembic downgrade -1\nalembic upgrade head\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-\ubb34\uc2dc\ud560-\ud14c\uc774\ube14-\uc124\uc815",children:"2. \ubb34\uc2dc\ud560 \ud14c\uc774\ube14 \uc124\uc815"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# alembic/env.py\ndef run_migrations_online():\n    # \ud2b9\uc815 \ud14c\uc774\ube14 \ubb34\uc2dc\n    connectable = engine_from_config(\n        config.get_section(config.config_ini_section),\n        prefix='sqlalchemy.',\n        poolclass=pool.NullPool,\n    )\n\n    with connectable.connect() as connection:\n        context.configure(\n            connection=connection,\n            target_metadata=target_metadata,\n            include_schemas=True,\n            # \uc784\uc2dc \ud14c\uc774\ube14 \ubb34\uc2dc\n            include_object=lambda obj, name, type_, reflected, compare_to:\n                not name.startswith('temp_')\n        )\n\n        with context.begin_transaction():\n            context.run_migrations()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-\ud0c0\uc785-\ube44\uad50-\ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5",children:"3. \ud0c0\uc785 \ube44\uad50 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# alembic/env.py\nfrom alembic.ddl import postgresql\n\ndef run_migrations_online():\n    context.configure(\n        connection=connection,\n        target_metadata=target_metadata,\n        # \ud0c0\uc785 \ube44\uad50 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\n        compare_type=True,\n        compare_server_default=True,\n    )\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-\uc644\uc804\ud55c-\uc608\uc81c-\ube14\ub85c\uadf8-\uc2dc\uc2a4\ud15c",children:"\ud83d\udcca \uc644\uc804\ud55c \uc608\uc81c: \ube14\ub85c\uadf8 \uc2dc\uc2a4\ud15c"}),"\n",(0,r.jsx)(n.h3,{id:"1-\ucd08\uae30-\ubaa8\ub378",children:"1. \ucd08\uae30 \ubaa8\ub378"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# models.py\nclass User(Base):\n    __tablename__ = 'users'\n    id = Column(Integer, primary_key=True)\n    username = Column(String(50), unique=True)\n    email = Column(String(100), unique=True)\n\nclass Post(Base):\n    __tablename__ = 'posts'\n    id = Column(Integer, primary_key=True)\n    title = Column(String(200))\n    content = Column(Text)\n    author_id = Column(Integer, ForeignKey('users.id'))\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'alembic revision --autogenerate -m "initial schema"\nalembic upgrade head\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-\uae30\ub2a5-\ucd94\uac00",children:"2. \uae30\ub2a5 \ucd94\uac00"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# models.py - \ub313\uae00 \uae30\ub2a5 \ucd94\uac00\nclass Comment(Base):\n    __tablename__ = 'comments'\n    id = Column(Integer, primary_key=True)\n    content = Column(Text, nullable=False)\n    post_id = Column(Integer, ForeignKey('posts.id', ondelete='CASCADE'))\n    author_id = Column(Integer, ForeignKey('users.id'))\n    created_at = Column(DateTime, default=datetime.utcnow)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'alembic revision --autogenerate -m "add comments"\nalembic upgrade head\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-\ud504\ub85c\ud544-\uae30\ub2a5",children:"3. \ud504\ub85c\ud544 \uae30\ub2a5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# models.py - User \ud655\uc7a5\nclass User(Base):\n    __tablename__ = 'users'\n    id = Column(Integer, primary_key=True)\n    username = Column(String(50), unique=True)\n    email = Column(String(100), unique=True)\n    # \uc0c8 \ud544\ub4dc\n    bio = Column(Text)\n    avatar_url = Column(String(500))\n    is_active = Column(Boolean, default=True)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'alembic revision --autogenerate -m "add user profile"\nalembic upgrade head\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-\uc2e4\uc2b5-\uacfc\uc81c",children:"\u2705 \uc2e4\uc2b5 \uacfc\uc81c"}),"\n",(0,r.jsx)(n.p,{children:"\ub2e4\uc74c SQLAlchemy \ubaa8\ub378\uc744 \ub9cc\ub4e4\uace0 autogenerate\ub85c \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc744 \uc0dd\uc131\ud558\uc138\uc694:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"class Product(Base):\n    __tablename__ = 'products'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100), nullable=False, index=True)\n    description = Column(Text)\n    price = Column(Numeric(10, 2), nullable=False)\n    stock = Column(Integer, default=0)\n    category_id = Column(Integer, ForeignKey('categories.id'))\n    is_active = Column(Boolean, default=True)\n    created_at = Column(DateTime, default=datetime.utcnow)\n\nclass Category(Base):\n    __tablename__ = 'categories'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(50), unique=True, nullable=False)\n    slug = Column(String(50), unique=True, nullable=False)\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"\uc815\ub2f5 \ud655\uc778"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# 1. \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131\nalembic revision --autogenerate -m "create products and categories"\n\n# 2. \uc0dd\uc131\ub41c \ud30c\uc77c \ud655\uc778\n# - categories \ud14c\uc774\ube14 \uba3c\uc800 \uc0dd\uc131 (products\uc758 \uc678\ub798 \ud0a4 \ub300\uc0c1)\n# - products \ud14c\uc774\ube14 \uc0dd\uc131\n# - \uc778\ub371\uc2a4 \uc0dd\uc131\n\n# 3. \uc2e4\ud589\nalembic upgrade head\n\n# 4. \ud655\uc778\nalembic current\n'})})]}),"\n",(0,r.jsx)(n.h2,{id:"-\ud575\uc2ec-\uc815\ub9ac",children:"\ud83d\udcda \ud575\uc2ec \uc815\ub9ac"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"alembic revision --autogenerate"}),": \uc790\ub3d9 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131"]}),"\n",(0,r.jsx)(n.li,{children:"SQLAlchemy \ubaa8\ub378 \ubcc0\uacbd \uc0ac\ud56d \uc790\ub3d9 \uac10\uc9c0"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\ud56d\uc0c1 \uc0dd\uc131\ub41c \ud30c\uc77c \uac80\ud1a0 \ud544\uc218"})}),"\n",(0,r.jsx)(n.li,{children:"\uceec\ub7fc \uc774\ub984 \ubcc0\uacbd, Check \uc81c\uc57d\uc870\uac74 \ub4f1\uc740 \uc218\ub3d9 \uc218\uc815 \ud544\uc694"}),"\n",(0,r.jsx)(n.li,{children:"\ub370\uc774\ud130 \uc190\uc2e4 \uc704\ud5d8\uc774 \uc788\ub294 \uc791\uc5c5\uc740 \ubc31\uc5c5 \ucf54\ub4dc \ucd94\uac00"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-\ub2e4\uc74c-\ub2e8\uacc4",children:"\ud83d\udcda \ub2e4\uc74c \ub2e8\uacc4"}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,r.jsx)(n.a,{href:"./data-migration",children:"\ub370\uc774\ud130 \ub9c8\uc774\uadf8\ub808\uc774\uc158"})]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>t});var l=a(6540);const r={},i=l.createContext(r);function s(e){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);