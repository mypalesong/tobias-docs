"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[7283],{8453:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>d});var s=a(6540);const r={},i=s.createContext(r);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(i.Provider,{value:n},e.children)}},9783:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"alembic/basic/first-migration","title":"\uccab \ubc88\uc9f8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ub9cc\ub4e4\uae30","description":"\uccab \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc744 \uc0dd\uc131\ud558\uace0 \uc2e4\ud589\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6cc\ubd05\uc2dc\ub2e4!","source":"@site/docs/alembic/basic/first-migration.md","sourceDirName":"alembic/basic","slug":"/alembic/basic/first-migration","permalink":"/docs/alembic/basic/first-migration","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/alembic/basic/first-migration.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"alembicSidebar","previous":{"title":"Alembic \uc124\uce58 \ubc0f \ucd08\uae30\ud654","permalink":"/docs/alembic/basic/installation"},"next":{"title":"Upgrade\uc640 Downgrade","permalink":"/docs/alembic/basic/upgrade-downgrade"}}');var r=a(4848),i=a(8453);const l={sidebar_position:3},d="\uccab \ubc88\uc9f8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ub9cc\ub4e4\uae30",o={},t=[{value:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c",id:"-\ud559\uc2b5-\ubaa9\ud45c",level:2},{value:"\ud83d\udcdd \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131",id:"-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc0dd\uc131",level:2},{value:"\uae30\ubcf8 \uba85\ub839\uc5b4",id:"\uae30\ubcf8-\uba85\ub839\uc5b4",level:3},{value:"\ud83d\udd27 \uc2e4\uc804 \uc608\uc81c: \uc0ac\uc6a9\uc790 \ud14c\uc774\ube14 \uc0dd\uc131",id:"-\uc2e4\uc804-\uc608\uc81c-\uc0ac\uc6a9\uc790-\ud14c\uc774\ube14-\uc0dd\uc131",level:2},{value:"1\ub2e8\uacc4: \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud30c\uc77c \uc0dd\uc131",id:"1\ub2e8\uacc4-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ud30c\uc77c-\uc0dd\uc131",level:3},{value:"2\ub2e8\uacc4: upgrade \ud568\uc218 \uc791\uc131",id:"2\ub2e8\uacc4-upgrade-\ud568\uc218-\uc791\uc131",level:3},{value:"3\ub2e8\uacc4: downgrade \ud568\uc218 \uc791\uc131",id:"3\ub2e8\uacc4-downgrade-\ud568\uc218-\uc791\uc131",level:3},{value:"\uc644\uc131\ub41c \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud30c\uc77c",id:"\uc644\uc131\ub41c-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ud30c\uc77c",level:3},{value:"\ud83d\ude80 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc2e4\ud589",id:"-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc2e4\ud589",level:2},{value:"upgrade \uc2e4\ud589",id:"upgrade-\uc2e4\ud589",level:3},{value:"\ub370\uc774\ud130\ubca0\uc774\uc2a4 \ud655\uc778",id:"\ub370\uc774\ud130\ubca0\uc774\uc2a4-\ud655\uc778",level:3},{value:"\ud83d\udcca \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud30c\uc77c \uad6c\uc870 \uc774\ud574",id:"-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ud30c\uc77c-\uad6c\uc870-\uc774\ud574",level:2},{value:"revision identifiers",id:"revision-identifiers",level:3},{value:"\ub9ac\ube44\uc804 \uccb4\uc778",id:"\ub9ac\ube44\uc804-\uccb4\uc778",level:3},{value:"\ud83c\udfa8 \ub2e4\uc591\ud55c \ud14c\uc774\ube14 \uc0dd\uc131 \uc608\uc81c",id:"-\ub2e4\uc591\ud55c-\ud14c\uc774\ube14-\uc0dd\uc131-\uc608\uc81c",level:2},{value:"\uc678\ub798 \ud0a4\uac00 \uc788\ub294 \ud14c\uc774\ube14",id:"\uc678\ub798-\ud0a4\uac00-\uc788\ub294-\ud14c\uc774\ube14",level:3},{value:"\uc778\ub371\uc2a4\uac00 \uc788\ub294 \ud14c\uc774\ube14",id:"\uc778\ub371\uc2a4\uac00-\uc788\ub294-\ud14c\uc774\ube14",level:3},{value:"\ubcf5\ud569 \ud0a4\uc640 \uccb4\ud06c \uc81c\uc57d\uc870\uac74",id:"\ubcf5\ud569-\ud0a4\uc640-\uccb4\ud06c-\uc81c\uc57d\uc870\uac74",level:3},{value:"\ud83d\udd0d Operations (op) \uc8fc\uc694 \uba54\uc11c\ub4dc",id:"-operations-op-\uc8fc\uc694-\uba54\uc11c\ub4dc",level:2},{value:"\ud14c\uc774\ube14 \uad00\ub828",id:"\ud14c\uc774\ube14-\uad00\ub828",level:3},{value:"\uceec\ub7fc \uad00\ub828",id:"\uceec\ub7fc-\uad00\ub828",level:3},{value:"\uc81c\uc57d\uc870\uac74 \uad00\ub828",id:"\uc81c\uc57d\uc870\uac74-\uad00\ub828",level:3},{value:"\uc778\ub371\uc2a4 \uad00\ub828",id:"\uc778\ub371\uc2a4-\uad00\ub828",level:3},{value:"\u2705 \uc2e4\uc2b5 \uacfc\uc81c",id:"-\uc2e4\uc2b5-\uacfc\uc81c",level:2},{value:"\uacfc\uc81c 1: \uce74\ud14c\uace0\ub9ac \ud14c\uc774\ube14",id:"\uacfc\uc81c-1-\uce74\ud14c\uace0\ub9ac-\ud14c\uc774\ube14",level:3},{value:"\uacfc\uc81c 2: \uc8fc\ubb38 \ud14c\uc774\ube14",id:"\uacfc\uc81c-2-\uc8fc\ubb38-\ud14c\uc774\ube14",level:3},{value:"\ud83c\udfaf \ud575\uc2ec \uc815\ub9ac",id:"-\ud575\uc2ec-\uc815\ub9ac",level:2},{value:"\ud83d\udea8 \uc8fc\uc758\uc0ac\ud56d",id:"-\uc8fc\uc758\uc0ac\ud56d",level:2},{value:"\ud83d\udcda \ub2e4\uc74c \ub2e8\uacc4",id:"-\ub2e4\uc74c-\ub2e8\uacc4",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Details:a}=n;return a||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\uccab-\ubc88\uc9f8-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ub9cc\ub4e4\uae30",children:"\uccab \ubc88\uc9f8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ub9cc\ub4e4\uae30"})}),"\n",(0,r.jsx)(n.p,{children:"\uccab \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc744 \uc0dd\uc131\ud558\uace0 \uc2e4\ud589\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6cc\ubd05\uc2dc\ub2e4!"}),"\n",(0,r.jsx)(n.h2,{id:"-\ud559\uc2b5-\ubaa9\ud45c",children:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud30c\uc77c \uc0dd\uc131 \ubc29\ubc95"}),"\n",(0,r.jsx)(n.li,{children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud30c\uc77c \uad6c\uc870 \uc774\ud574"}),"\n",(0,r.jsx)(n.li,{children:"upgrade\uc640 downgrade \ud568\uc218 \uc791\uc131"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc0dd\uc131",children:"\ud83d\udcdd \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131"}),"\n",(0,r.jsx)(n.h3,{id:"\uae30\ubcf8-\uba85\ub839\uc5b4",children:"\uae30\ubcf8 \uba85\ub839\uc5b4"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \ube48 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud30c\uc77c \uc0dd\uc131\nalembic revision -m "create users table"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\uc2e4\ud589 \uacb0\uacfc:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Generating /path/to/alembic/versions/xxxxx_create_users_table.py ... done\n"})}),"\n",(0,r.jsx)(n.p,{children:"\uc0dd\uc131\ub41c \ud30c\uc77c \uc608\uc2dc:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# alembic/versions/xxxxx_create_users_table.py\n"""create users table\n\nRevision ID: 2f8b9c3d1a5e\nRevises:\nCreate Date: 2024-01-15 10:30:45.123456\n\n"""\nfrom typing import Sequence, Union\nfrom alembic import op\nimport sqlalchemy as sa\n\n# revision identifiers, used by Alembic.\nrevision: str = \'2f8b9c3d1a5e\'\ndown_revision: Union[str, None] = None\nbranch_labels: Union[str, Sequence[str], None] = None\ndepends_on: Union[str, Sequence[str], None] = None\n\ndef upgrade() -> None:\n    # \uc5ec\uae30\uc5d0 \uc5c5\uadf8\ub808\uc774\ub4dc \ub85c\uc9c1 \uc791\uc131\n    pass\n\ndef downgrade() -> None:\n    # \uc5ec\uae30\uc5d0 \ub2e4\uc6b4\uadf8\ub808\uc774\ub4dc \ub85c\uc9c1 \uc791\uc131\n    pass\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-\uc2e4\uc804-\uc608\uc81c-\uc0ac\uc6a9\uc790-\ud14c\uc774\ube14-\uc0dd\uc131",children:"\ud83d\udd27 \uc2e4\uc804 \uc608\uc81c: \uc0ac\uc6a9\uc790 \ud14c\uc774\ube14 \uc0dd\uc131"}),"\n",(0,r.jsx)(n.h3,{id:"1\ub2e8\uacc4-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ud30c\uc77c-\uc0dd\uc131",children:"1\ub2e8\uacc4: \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud30c\uc77c \uc0dd\uc131"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'alembic revision -m "create users table"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2\ub2e8\uacc4-upgrade-\ud568\uc218-\uc791\uc131",children:"2\ub2e8\uacc4: upgrade \ud568\uc218 \uc791\uc131"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def upgrade() -> None:\n    op.create_table(\n        'users',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('username', sa.String(50), unique=True, nullable=False),\n        sa.Column('email', sa.String(100), unique=True, nullable=False),\n        sa.Column('password_hash', sa.String(255), nullable=False),\n        sa.Column('created_at', sa.DateTime(), server_default=sa.func.now()),\n        sa.Column('updated_at', sa.DateTime(), onupdate=sa.func.now())\n    )\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3\ub2e8\uacc4-downgrade-\ud568\uc218-\uc791\uc131",children:"3\ub2e8\uacc4: downgrade \ud568\uc218 \uc791\uc131"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def downgrade() -> None:\n    op.drop_table('users')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\uc644\uc131\ub41c-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ud30c\uc77c",children:"\uc644\uc131\ub41c \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud30c\uc77c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"\"\"\"create users table\n\nRevision ID: 2f8b9c3d1a5e\nRevises:\nCreate Date: 2024-01-15 10:30:45.123456\n\"\"\"\nfrom typing import Sequence, Union\nfrom alembic import op\nimport sqlalchemy as sa\n\nrevision: str = '2f8b9c3d1a5e'\ndown_revision: Union[str, None] = None\nbranch_labels: Union[str, Sequence[str], None] = None\ndepends_on: Union[str, Sequence[str], None] = None\n\ndef upgrade() -> None:\n    op.create_table(\n        'users',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('username', sa.String(50), unique=True, nullable=False),\n        sa.Column('email', sa.String(100), unique=True, nullable=False),\n        sa.Column('password_hash', sa.String(255), nullable=False),\n        sa.Column('created_at', sa.DateTime(), server_default=sa.func.now()),\n        sa.Column('updated_at', sa.DateTime(), onupdate=sa.func.now())\n    )\n\ndef downgrade() -> None:\n    op.drop_table('users')\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc2e4\ud589",children:"\ud83d\ude80 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc2e4\ud589"}),"\n",(0,r.jsx)(n.h3,{id:"upgrade-\uc2e4\ud589",children:"upgrade \uc2e4\ud589"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \ucd5c\uc2e0 \ubc84\uc804\uc73c\ub85c \uc5c5\uadf8\ub808\uc774\ub4dc\nalembic upgrade head\n\n# \ucd9c\ub825 \uc608\uc2dc:\n# INFO  [alembic.runtime.migration] Context impl SQLiteImpl.\n# INFO  [alembic.runtime.migration] Will assume non-transactional DDL.\n# INFO  [alembic.runtime.migration] Running upgrade  -> 2f8b9c3d1a5e, create users table\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\ub370\uc774\ud130\ubca0\uc774\uc2a4-\ud655\uc778",children:"\ub370\uc774\ud130\ubca0\uc774\uc2a4 \ud655\uc778"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# SQLite\uc758 \uacbd\uc6b0\nsqlite3 blog.db \"SELECT name FROM sqlite_master WHERE type='table';\"\n\n# \ucd9c\ub825:\n# alembic_version\n# users\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \ud14c\uc774\ube14 \uad6c\uc870 \ud655\uc778\nsqlite3 blog.db ".schema users"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\ud30c\uc77c-\uad6c\uc870-\uc774\ud574",children:"\ud83d\udcca \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud30c\uc77c \uad6c\uc870 \uc774\ud574"}),"\n",(0,r.jsx)(n.h3,{id:"revision-identifiers",children:"revision identifiers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"revision: str = '2f8b9c3d1a5e'        # \ud604\uc7ac \ub9ac\ube44\uc804\uc758 \uace0\uc720 ID\ndown_revision: Union[str, None] = None  # \uc774\uc804 \ub9ac\ube44\uc804 ID (\uccab \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc774\ub77c None)\nbranch_labels: Union[str, Sequence[str], None] = None  # \ube0c\ub79c\uce58 \ub77c\ubca8 (\uace0\uae09 \uae30\ub2a5)\ndepends_on: Union[str, Sequence[str], None] = None     # \uc758\uc874\uc131 (\uace0\uae09 \uae30\ub2a5)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\ub9ac\ube44\uc804-\uccb4\uc778",children:"\ub9ac\ube44\uc804 \uccb4\uc778"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"None -> 2f8b9c3d1a5e (create users table)\n"})}),"\n",(0,r.jsx)(n.p,{children:"\ub2e4\uc74c \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc744 \ub9cc\ub4e4\uba74:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"None -> 2f8b9c3d1a5e -> 3a7c4e8f2b1d (\ub2e4\uc74c \ub9c8\uc774\uadf8\ub808\uc774\uc158)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-\ub2e4\uc591\ud55c-\ud14c\uc774\ube14-\uc0dd\uc131-\uc608\uc81c",children:"\ud83c\udfa8 \ub2e4\uc591\ud55c \ud14c\uc774\ube14 \uc0dd\uc131 \uc608\uc81c"}),"\n",(0,r.jsx)(n.h3,{id:"\uc678\ub798-\ud0a4\uac00-\uc788\ub294-\ud14c\uc774\ube14",children:"\uc678\ub798 \ud0a4\uac00 \uc788\ub294 \ud14c\uc774\ube14"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def upgrade() -> None:\n    op.create_table(\n        'posts',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('title', sa.String(200), nullable=False),\n        sa.Column('content', sa.Text(), nullable=False),\n        sa.Column('author_id', sa.Integer(), nullable=False),\n        sa.Column('created_at', sa.DateTime(), server_default=sa.func.now()),\n        sa.ForeignKeyConstraint(['author_id'], ['users.id'], ondelete='CASCADE')\n    )\n\ndef downgrade() -> None:\n    op.drop_table('posts')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\uc778\ub371\uc2a4\uac00-\uc788\ub294-\ud14c\uc774\ube14",children:"\uc778\ub371\uc2a4\uac00 \uc788\ub294 \ud14c\uc774\ube14"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def upgrade() -> None:\n    op.create_table(\n        'products',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('name', sa.String(100), nullable=False),\n        sa.Column('price', sa.Numeric(10, 2), nullable=False),\n        sa.Column('category', sa.String(50)),\n        sa.Column('created_at', sa.DateTime(), server_default=sa.func.now())\n    )\n\n    # \uc778\ub371\uc2a4 \uc0dd\uc131\n    op.create_index('idx_product_name', 'products', ['name'])\n    op.create_index('idx_product_category', 'products', ['category'])\n\ndef downgrade() -> None:\n    # \uc778\ub371\uc2a4\ub294 \ud14c\uc774\ube14 \uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc0ad\uc81c\ub428\n    op.drop_table('products')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\ubcf5\ud569-\ud0a4\uc640-\uccb4\ud06c-\uc81c\uc57d\uc870\uac74",children:"\ubcf5\ud569 \ud0a4\uc640 \uccb4\ud06c \uc81c\uc57d\uc870\uac74"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def upgrade() -> None:\n    op.create_table(\n        'order_items',\n        sa.Column('order_id', sa.Integer(), nullable=False),\n        sa.Column('product_id', sa.Integer(), nullable=False),\n        sa.Column('quantity', sa.Integer(), nullable=False),\n        sa.Column('price', sa.Numeric(10, 2), nullable=False),\n        sa.PrimaryKeyConstraint('order_id', 'product_id'),\n        sa.CheckConstraint('quantity > 0', name='check_positive_quantity'),\n        sa.CheckConstraint('price >= 0', name='check_non_negative_price')\n    )\n\ndef downgrade() -> None:\n    op.drop_table('order_items')\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-operations-op-\uc8fc\uc694-\uba54\uc11c\ub4dc",children:"\ud83d\udd0d Operations (op) \uc8fc\uc694 \uba54\uc11c\ub4dc"}),"\n",(0,r.jsxs)(n.p,{children:["Alembic\uc758 ",(0,r.jsx)(n.code,{children:"op"})," \uac1d\uccb4\uac00 \uc81c\uacf5\ud558\ub294 \uc8fc\uc694 \uba54\uc11c\ub4dc\ub4e4:"]}),"\n",(0,r.jsx)(n.h3,{id:"\ud14c\uc774\ube14-\uad00\ub828",children:"\ud14c\uc774\ube14 \uad00\ub828"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"op.create_table()        # \ud14c\uc774\ube14 \uc0dd\uc131\nop.drop_table()          # \ud14c\uc774\ube14 \uc0ad\uc81c\nop.rename_table()        # \ud14c\uc774\ube14 \uc774\ub984 \ubcc0\uacbd\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\uceec\ub7fc-\uad00\ub828",children:"\uceec\ub7fc \uad00\ub828"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"op.add_column()          # \uceec\ub7fc \ucd94\uac00\nop.drop_column()         # \uceec\ub7fc \uc0ad\uc81c\nop.alter_column()        # \uceec\ub7fc \uc218\uc815\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\uc81c\uc57d\uc870\uac74-\uad00\ub828",children:"\uc81c\uc57d\uc870\uac74 \uad00\ub828"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"op.create_primary_key()      # \uae30\ubcf8 \ud0a4 \uc0dd\uc131\nop.create_foreign_key()      # \uc678\ub798 \ud0a4 \uc0dd\uc131\nop.create_unique_constraint() # \uc720\ub2c8\ud06c \uc81c\uc57d\uc870\uac74\nop.create_check_constraint()  # \uccb4\ud06c \uc81c\uc57d\uc870\uac74\nop.drop_constraint()         # \uc81c\uc57d\uc870\uac74 \uc0ad\uc81c\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\uc778\ub371\uc2a4-\uad00\ub828",children:"\uc778\ub371\uc2a4 \uad00\ub828"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"op.create_index()        # \uc778\ub371\uc2a4 \uc0dd\uc131\nop.drop_index()          # \uc778\ub371\uc2a4 \uc0ad\uc81c\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-\uc2e4\uc2b5-\uacfc\uc81c",children:"\u2705 \uc2e4\uc2b5 \uacfc\uc81c"}),"\n",(0,r.jsx)(n.p,{children:"\ub2e4\uc74c \uc694\uad6c\uc0ac\ud56d\uc5d0 \ub9de\ub294 \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc744 \ub9cc\ub4e4\uc5b4\ubcf4\uc138\uc694:"}),"\n",(0,r.jsx)(n.h3,{id:"\uacfc\uc81c-1-\uce74\ud14c\uace0\ub9ac-\ud14c\uc774\ube14",children:"\uacfc\uc81c 1: \uce74\ud14c\uace0\ub9ac \ud14c\uc774\ube14"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# \uc694\uad6c\uc0ac\ud56d:\n# - id: \uc815\uc218, \uae30\ubcf8 \ud0a4\n# - name: \ubb38\uc790\uc5f4(50), \ud544\uc218, \uc720\ub2c8\ud06c\n# - description: \ud14d\uc2a4\ud2b8, \uc120\ud0dd\n# - parent_id: \uc815\uc218, \uc120\ud0dd (\uc790\uae30 \ucc38\uc870 \uc678\ub798 \ud0a4)\n# - created_at: \ub0a0\uc9dc\uc2dc\uac04, \uae30\ubcf8\uac12 \ud604\uc7ac \uc2dc\uac04\n\nalembic revision -m "create categories table"\n'})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"\uc815\ub2f5 \ubcf4\uae30"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def upgrade() -> None:\n    op.create_table(\n        'categories',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('name', sa.String(50), unique=True, nullable=False),\n        sa.Column('description', sa.Text()),\n        sa.Column('parent_id', sa.Integer()),\n        sa.Column('created_at', sa.DateTime(), server_default=sa.func.now()),\n        sa.ForeignKeyConstraint(['parent_id'], ['categories.id'])\n    )\n\ndef downgrade() -> None:\n    op.drop_table('categories')\n"})})]}),"\n",(0,r.jsx)(n.h3,{id:"\uacfc\uc81c-2-\uc8fc\ubb38-\ud14c\uc774\ube14",children:"\uacfc\uc81c 2: \uc8fc\ubb38 \ud14c\uc774\ube14"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# \uc694\uad6c\uc0ac\ud56d:\n# - id: \uc815\uc218, \uae30\ubcf8 \ud0a4\n# - user_id: \uc815\uc218, \ud544\uc218, \uc678\ub798 \ud0a4 (users.id)\n# - status: \ubb38\uc790\uc5f4(20), \uae30\ubcf8\uac12 'pending'\n# - total_amount: \uc22b\uc790(10,2), 0 \uc774\uc0c1\n# - order_date: \ub0a0\uc9dc\uc2dc\uac04, \uae30\ubcf8\uac12 \ud604\uc7ac \uc2dc\uac04\n# - \uc778\ub371\uc2a4: user_id, status\n\nalembic revision -m \"create orders table\"\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"\uc815\ub2f5 \ubcf4\uae30"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def upgrade() -> None:\n    op.create_table(\n        'orders',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('user_id', sa.Integer(), nullable=False),\n        sa.Column('status', sa.String(20), server_default='pending'),\n        sa.Column('total_amount', sa.Numeric(10, 2)),\n        sa.Column('order_date', sa.DateTime(), server_default=sa.func.now()),\n        sa.ForeignKeyConstraint(['user_id'], ['users.id']),\n        sa.CheckConstraint('total_amount >= 0', name='check_total_amount')\n    )\n\n    op.create_index('idx_orders_user_id', 'orders', ['user_id'])\n    op.create_index('idx_orders_status', 'orders', ['status'])\n\ndef downgrade() -> None:\n    op.drop_table('orders')\n"})})]}),"\n",(0,r.jsx)(n.h2,{id:"-\ud575\uc2ec-\uc815\ub9ac",children:"\ud83c\udfaf \ud575\uc2ec \uc815\ub9ac"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc0dd\uc131"}),": ",(0,r.jsx)(n.code,{children:'alembic revision -m "\uba54\uc2dc\uc9c0"'})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"upgrade \ud568\uc218"}),": \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \ub2e4\uc74c \ubc84\uc804\uc73c\ub85c \ubcc0\uacbd"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"downgrade \ud568\uc218"}),": \uc774\uc804 \ubc84\uc804\uc73c\ub85c \ub864\ubc31"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"op \uac1d\uccb4"}),": \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc2a4\ud0a4\ub9c8 \ubcc0\uacbd \uc791\uc5c5 \uc218\ud589"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-\uc8fc\uc758\uc0ac\ud56d",children:"\ud83d\udea8 \uc8fc\uc758\uc0ac\ud56d"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud56d\uc0c1 downgrade \ud568\uc218 \uc791\uc131"}),": \ub864\ubc31\uc774 \ud544\uc694\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\uc6d0\uc790\uc131 \uc720\uc9c0"}),": \ud558\ub098\uc758 \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc740 \ud558\ub098\uc758 \ub17c\ub9ac\uc801 \ubcc0\uacbd\ub9cc"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud14c\uc2a4\ud2b8"}),": \ud504\ub85c\ub355\uc158 \uc801\uc6a9 \uc804 \ubc18\ub4dc\uc2dc \ud14c\uc2a4\ud2b8"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud30c\uc77c \uc774\ub984"}),": \uc790\ub3d9 \uc0dd\uc131\ub41c \uc774\ub984 \uadf8\ub300\ub85c \uc0ac\uc6a9 (\ubcc0\uacbd\ud558\uc9c0 \ub9d0 \uac83)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-\ub2e4\uc74c-\ub2e8\uacc4",children:"\ud83d\udcda \ub2e4\uc74c \ub2e8\uacc4"}),"\n",(0,r.jsx)(n.p,{children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158\uc744 \uc0dd\uc131\ud588\ub2e4\uba74, \uc774\uc81c \uc2e4\ud589\ud558\uace0 \uad00\ub9ac\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6cc\ubd05\uc2dc\ub2e4!"}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,r.jsx)(n.a,{href:"./upgrade-downgrade",children:"Upgrade\uc640 Downgrade"})]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);