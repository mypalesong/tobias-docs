"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[9211],{8059:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"github/examples/scenario-12-multi-env","title":"\uc2dc\ub098\ub9ac\uc624 12: \uc5ec\ub7ec \ud658\uacbd \ubc30\ud3ec \uad00\ub9ac","description":"Dev, Staging, Production \ud658\uacbd\uc744 Git \ube0c\ub79c\uce58\ub85c \uad00\ub9ac\ud569\ub2c8\ub2e4.","source":"@site/docs/github/examples/scenario-12-multi-env.md","sourceDirName":"github/examples","slug":"/github/examples/scenario-12-multi-env","permalink":"/tobias-docs/comp-2/docs/github/examples/scenario-12-multi-env","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/github/examples/scenario-12-multi-env.md","tags":[],"version":"current","sidebarPosition":13,"frontMatter":{"sidebar_position":13},"sidebar":"githubSidebar","previous":{"title":"\uc2dc\ub098\ub9ac\uc624 11: Code Review \ubb38\ud654 \ub9cc\ub4e4\uae30","permalink":"/tobias-docs/comp-2/docs/github/examples/scenario-11-code-review"},"next":{"title":"\uc2dc\ub098\ub9ac\uc624 13: Git Worktree \ud65c\uc6a9","permalink":"/tobias-docs/comp-2/docs/github/examples/scenario-13-worktree"}}');var s=t(4848),r=t(8453);const o={sidebar_position:13},l="\uc2dc\ub098\ub9ac\uc624 12: \uc5ec\ub7ec \ud658\uacbd \ubc30\ud3ec \uad00\ub9ac",a={},c=[{value:"\ud83d\udccc \uc0c1\ud669",id:"-\uc0c1\ud669",level:2},{value:"\ud83c\udfaf \ubaa9\ud45c",id:"-\ubaa9\ud45c",level:2},{value:"\u26a1 \uc2e4\uc2b5",id:"-\uc2e4\uc2b5",level:2},{value:"1\ub2e8\uacc4: \ube0c\ub79c\uce58 \uc804\ub7b5",id:"1\ub2e8\uacc4-\ube0c\ub79c\uce58-\uc804\ub7b5",level:3},{value:"2\ub2e8\uacc4: \ud658\uacbd\ubcc4 \uc790\ub3d9 \ubc30\ud3ec",id:"2\ub2e8\uacc4-\ud658\uacbd\ubcc4-\uc790\ub3d9-\ubc30\ud3ec",level:3},{value:"3\ub2e8\uacc4: \ud658\uacbd\ubcc4 Secrets \uad00\ub9ac",id:"3\ub2e8\uacc4-\ud658\uacbd\ubcc4-secrets-\uad00\ub9ac",level:3},{value:"4\ub2e8\uacc4: \ubc30\ud3ec \uc2b9\uc778 \ud504\ub85c\uc138\uc2a4",id:"4\ub2e8\uacc4-\ubc30\ud3ec-\uc2b9\uc778-\ud504\ub85c\uc138\uc2a4",level:3},{value:"5\ub2e8\uacc4: Rollback \uc804\ub7b5",id:"5\ub2e8\uacc4-rollback-\uc804\ub7b5",level:3},{value:"\ud83c\udf93 \ubc30\uc6b4 \ub0b4\uc6a9",id:"-\ubc30\uc6b4-\ub0b4\uc6a9",level:2},{value:"\ud658\uacbd\ubcc4 \ube0c\ub79c\uce58 \uc804\ub7b5",id:"\ud658\uacbd\ubcc4-\ube0c\ub79c\uce58-\uc804\ub7b5",level:3},{value:"\ubc30\ud3ec \ud0dc\uadf8 \uaddc\uce59",id:"\ubc30\ud3ec-\ud0dc\uadf8-\uaddc\uce59",level:3},{value:"\ud83c\udfaf \ub2e4\uc74c \uc2dc\ub098\ub9ac\uc624",id:"-\ub2e4\uc74c-\uc2dc\ub098\ub9ac\uc624",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\uc2dc\ub098\ub9ac\uc624-12-\uc5ec\ub7ec-\ud658\uacbd-\ubc30\ud3ec-\uad00\ub9ac",children:"\uc2dc\ub098\ub9ac\uc624 12: \uc5ec\ub7ec \ud658\uacbd \ubc30\ud3ec \uad00\ub9ac"})}),"\n",(0,s.jsx)(n.p,{children:"Dev, Staging, Production \ud658\uacbd\uc744 Git \ube0c\ub79c\uce58\ub85c \uad00\ub9ac\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h2,{id:"-\uc0c1\ud669",children:"\ud83d\udccc \uc0c1\ud669"}),"\n",(0,s.jsx)(n.p,{children:"3\uac1c \ud658\uacbd(Dev, Staging, Prod)\uc744 \ud6a8\uc728\uc801\uc73c\ub85c \uad00\ub9ac\ud558\uace0 \ubc30\ud3ec\ud574\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h2,{id:"-\ubaa9\ud45c",children:"\ud83c\udfaf \ubaa9\ud45c"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\ud658\uacbd\ubcc4 \ube0c\ub79c\uce58 \uc804\ub7b5"}),"\n",(0,s.jsx)(n.li,{children:"\uc790\ub3d9\ud654\ub41c \ubc30\ud3ec \ud30c\uc774\ud504\ub77c\uc778"}),"\n",(0,s.jsx)(n.li,{children:"\ud658\uacbd\ubcc4 \uc124\uc815 \uad00\ub9ac"}),"\n",(0,s.jsx)(n.li,{children:"Rollback \uc804\ub7b5"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"-\uc2e4\uc2b5",children:"\u26a1 \uc2e4\uc2b5"}),"\n",(0,s.jsx)(n.h3,{id:"1\ub2e8\uacc4-\ube0c\ub79c\uce58-\uc804\ub7b5",children:"1\ub2e8\uacc4: \ube0c\ub79c\uce58 \uc804\ub7b5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"main (production)\n  \u2191\nstaging\n  \u2191\ndevelop\n  \u2191\nfeature/* branches\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2\ub2e8\uacc4-\ud658\uacbd\ubcc4-\uc790\ub3d9-\ubc30\ud3ec",children:"2\ub2e8\uacc4: \ud658\uacbd\ubcc4 \uc790\ub3d9 \ubc30\ud3ec"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# .github/workflows/deploy.yml\nname: Deploy\n\non:\n  push:\n    branches:\n      - develop  # \u2192 Dev\n      - staging  # \u2192 Staging\n      - main     # \u2192 Production\n\njobs:\n  deploy-dev:\n    if: github.ref == 'refs/heads/develop'\n    runs-on: ubuntu-latest\n    environment: development\n    steps:\n      - uses: actions/checkout@v3\n      - name: Deploy to Dev\n        run: |\n          npm run build:dev\n          npm run deploy:dev\n        env:\n          ENV: development\n          API_URL: ${{ secrets.DEV_API_URL }}\n\n  deploy-staging:\n    if: github.ref == 'refs/heads/staging'\n    runs-on: ubuntu-latest\n    environment: staging\n    steps:\n      - uses: actions/checkout@v3\n      - name: Deploy to Staging\n        run: |\n          npm run build:staging\n          npm run deploy:staging\n        env:\n          ENV: staging\n          API_URL: ${{ secrets.STAGING_API_URL }}\n\n  deploy-production:\n    if: github.ref == 'refs/heads/main'\n    runs-on: ubuntu-latest\n    environment:\n      name: production\n      url: https://shop.example.com\n    steps:\n      - uses: actions/checkout@v3\n      - name: Deploy to Production\n        run: |\n          npm run build:prod\n          npm run deploy:prod\n        env:\n          ENV: production\n          API_URL: ${{ secrets.PROD_API_URL }}\n      - name: Create deployment tag\n        run: |\n          git tag \"deploy-$(date +%Y%m%d-%H%M%S)\"\n          git push --tags\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3\ub2e8\uacc4-\ud658\uacbd\ubcc4-secrets-\uad00\ub9ac",children:"3\ub2e8\uacc4: \ud658\uacbd\ubcc4 Secrets \uad00\ub9ac"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# GitHub Secrets \uc124\uc815\ngh secret set DEV_API_URL --env development\ngh secret set STAGING_API_URL --env staging\ngh secret set PROD_API_URL --env production\n\n# AWS Secrets Manager \uc5f0\ub3d9\naws secretsmanager get-secret-value --secret-id prod/api-key\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4\ub2e8\uacc4-\ubc30\ud3ec-\uc2b9\uc778-\ud504\ub85c\uc138\uc2a4",children:"4\ub2e8\uacc4: \ubc30\ud3ec \uc2b9\uc778 \ud504\ub85c\uc138\uc2a4"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# Production\uc740 \uc218\ub3d9 \uc2b9\uc778 \ud544\uc694\nenvironment:\n  name: production\n  url: https://shop.example.com\n  # GitHub\uc5d0\uc11c \uc2b9\uc778 \uc124\uc815:\n  # Settings \u2192 Environments \u2192 production \u2192 Required reviewers\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5\ub2e8\uacc4-rollback-\uc804\ub7b5",children:"5\ub2e8\uacc4: Rollback \uc804\ub7b5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \ud604\uc7ac \ud504\ub85c\ub355\uc158 \ud0dc\uadf8\ngit tag\n# deploy-20240115-143000\n\n# Rollback\ngit checkout deploy-20240115-120000\ngit checkout -b hotfix/rollback\ngit push origin hotfix/rollback\n\n# \ub610\ub294 \uc9c1\uc811 \ubc30\ud3ec\ngit checkout deploy-20240115-120000\nnpm run deploy:prod\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-\ubc30\uc6b4-\ub0b4\uc6a9",children:"\ud83c\udf93 \ubc30\uc6b4 \ub0b4\uc6a9"}),"\n",(0,s.jsx)(n.h3,{id:"\ud658\uacbd\ubcc4-\ube0c\ub79c\uce58-\uc804\ub7b5",children:"\ud658\uacbd\ubcc4 \ube0c\ub79c\uce58 \uc804\ub7b5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"feature \u2192 develop \u2192 staging \u2192 main\n  (Dev)    (Dev)    (Staging)  (Prod)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\ubc30\ud3ec-\ud0dc\uadf8-\uaddc\uce59",children:"\ubc30\ud3ec \ud0dc\uadf8 \uaddc\uce59"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"deploy-YYYYMMDD-HHMMSS\nv1.2.3-rc.1  # Release Candidate\nv1.2.3       # Production\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-\ub2e4\uc74c-\uc2dc\ub098\ub9ac\uc624",children:"\ud83c\udfaf \ub2e4\uc74c \uc2dc\ub098\ub9ac\uc624"}),"\n",(0,s.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,s.jsx)(n.a,{href:"./scenario-13-worktree",children:"\uc2dc\ub098\ub9ac\uc624 13: Git Worktree \ud65c\uc6a9"}),"\uc5d0\uc11c \uacc4\uc18d\ub429\ub2c8\ub2e4."]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var i=t(6540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);