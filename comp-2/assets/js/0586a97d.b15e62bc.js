"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[11],{5416:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>c,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"alembic/basic/tables","title":"\ud14c\uc774\ube14 \uc791\uc5c5","description":"Alembic\uc73c\ub85c \ud14c\uc774\ube14\uc744 \uc0dd\uc131, \uc218\uc815, \uc0ad\uc81c\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6cc\ubd05\uc2dc\ub2e4!","source":"@site/docs/alembic/basic/tables.md","sourceDirName":"alembic/basic","slug":"/alembic/basic/tables","permalink":"/tobias-docs/comp-2/docs/alembic/basic/tables","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/alembic/basic/tables.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"alembicSidebar","previous":{"title":"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud788\uc2a4\ud1a0\ub9ac","permalink":"/tobias-docs/comp-2/docs/alembic/basic/history"},"next":{"title":"\uceec\ub7fc \uc791\uc5c5","permalink":"/tobias-docs/comp-2/docs/alembic/basic/columns"}}');var l=a(4848),r=a(8453);const t={sidebar_position:6},i="\ud14c\uc774\ube14 \uc791\uc5c5",o={},d=[{value:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c",id:"-\ud559\uc2b5-\ubaa9\ud45c",level:2},{value:"\ud83d\udcdd create_table: \ud14c\uc774\ube14 \uc0dd\uc131",id:"-create_table-\ud14c\uc774\ube14-\uc0dd\uc131",level:2},{value:"\uae30\ubcf8 \ubb38\ubc95",id:"\uae30\ubcf8-\ubb38\ubc95",level:3},{value:"\uac04\ub2e8\ud55c \uc608\uc81c",id:"\uac04\ub2e8\ud55c-\uc608\uc81c",level:3},{value:"\ud83d\udd27 \ub2e4\uc591\ud55c \ud14c\uc774\ube14 \uc0dd\uc131 \uc608\uc81c",id:"-\ub2e4\uc591\ud55c-\ud14c\uc774\ube14-\uc0dd\uc131-\uc608\uc81c",level:2},{value:"\uc608\uc81c 1: \uae30\ubcf8 \ud0a4\uac00 \uc788\ub294 \ud14c\uc774\ube14",id:"\uc608\uc81c-1-\uae30\ubcf8-\ud0a4\uac00-\uc788\ub294-\ud14c\uc774\ube14",level:3},{value:"\uc608\uc81c 2: \uc678\ub798 \ud0a4\uac00 \uc788\ub294 \ud14c\uc774\ube14",id:"\uc608\uc81c-2-\uc678\ub798-\ud0a4\uac00-\uc788\ub294-\ud14c\uc774\ube14",level:3},{value:"\uc608\uc81c 3: \ubcf5\ud569 \uae30\ubcf8 \ud0a4",id:"\uc608\uc81c-3-\ubcf5\ud569-\uae30\ubcf8-\ud0a4",level:3},{value:"\uc608\uc81c 4: \uccb4\ud06c \uc81c\uc57d\uc870\uac74",id:"\uc608\uc81c-4-\uccb4\ud06c-\uc81c\uc57d\uc870\uac74",level:3},{value:"\ud83d\uddd1\ufe0f drop_table: \ud14c\uc774\ube14 \uc0ad\uc81c",id:"\ufe0f-drop_table-\ud14c\uc774\ube14-\uc0ad\uc81c",level:2},{value:"\uae30\ubcf8 \uc0ac\uc6a9\ubc95",id:"\uae30\ubcf8-\uc0ac\uc6a9\ubc95",level:3},{value:"\uc870\uac74\ubd80 \uc0ad\uc81c (if exists)",id:"\uc870\uac74\ubd80-\uc0ad\uc81c-if-exists",level:3},{value:"\ud83d\udd04 rename_table: \ud14c\uc774\ube14 \uc774\ub984 \ubcc0\uacbd",id:"-rename_table-\ud14c\uc774\ube14-\uc774\ub984-\ubcc0\uacbd",level:2},{value:"\uae30\ubcf8 \uc0ac\uc6a9\ubc95",id:"\uae30\ubcf8-\uc0ac\uc6a9\ubc95-1",level:3},{value:"\uc2e4\uc804 \uc608\uc81c",id:"\uc2e4\uc804-\uc608\uc81c",level:3},{value:"\ud83c\udfa8 \ubcf5\uc7a1\ud55c \uc2e4\uc804 \uc608\uc81c",id:"-\ubcf5\uc7a1\ud55c-\uc2e4\uc804-\uc608\uc81c",level:2},{value:"\uc608\uc81c 1: \uc804\uc790\uc0c1\uac70\ub798 \uc8fc\ubb38 \uc2dc\uc2a4\ud15c",id:"\uc608\uc81c-1-\uc804\uc790\uc0c1\uac70\ub798-\uc8fc\ubb38-\uc2dc\uc2a4\ud15c",level:3},{value:"\uc608\uc81c 2: \uc18c\uc15c \ubbf8\ub514\uc5b4 \uc2a4\ud0a4\ub9c8",id:"\uc608\uc81c-2-\uc18c\uc15c-\ubbf8\ub514\uc5b4-\uc2a4\ud0a4\ub9c8",level:3},{value:"\ud83d\udcca \ud14c\uc774\ube14 \uc2a4\ud0a4\ub9c8 \ubcf5\uc0ac",id:"-\ud14c\uc774\ube14-\uc2a4\ud0a4\ub9c8-\ubcf5\uc0ac",level:2},{value:"\ud83d\udd0d \ub370\uc774\ud130\ubca0\uc774\uc2a4\ubcc4 \uace0\ub824\uc0ac\ud56d",id:"-\ub370\uc774\ud130\ubca0\uc774\uc2a4\ubcc4-\uace0\ub824\uc0ac\ud56d",level:2},{value:"PostgreSQL",id:"postgresql",level:3},{value:"MySQL",id:"mysql",level:3},{value:"SQLite",id:"sqlite",level:3},{value:"\u26a0\ufe0f \uc8fc\uc758\uc0ac\ud56d",id:"\ufe0f-\uc8fc\uc758\uc0ac\ud56d",level:2},{value:"1. \ud14c\uc774\ube14 \uc0ad\uc81c \uc2dc \ub370\uc774\ud130 \uc190\uc2e4",id:"1-\ud14c\uc774\ube14-\uc0ad\uc81c-\uc2dc-\ub370\uc774\ud130-\uc190\uc2e4",level:3},{value:"2. \uc678\ub798 \ud0a4 \uc21c\uc11c",id:"2-\uc678\ub798-\ud0a4-\uc21c\uc11c",level:3},{value:"\u2705 \uc2e4\uc2b5 \uacfc\uc81c",id:"-\uc2e4\uc2b5-\uacfc\uc81c",level:2},{value:"\uacfc\uc81c 1: \ube14\ub85c\uadf8 \uc2dc\uc2a4\ud15c",id:"\uacfc\uc81c-1-\ube14\ub85c\uadf8-\uc2dc\uc2a4\ud15c",level:3},{value:"\ud83d\udcda \ud575\uc2ec \uc815\ub9ac",id:"-\ud575\uc2ec-\uc815\ub9ac",level:2},{value:"\ud83d\udcda \ub2e4\uc74c \ub2e8\uacc4",id:"-\ub2e4\uc74c-\ub2e8\uacc4",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Details:a}=n;return a||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"\ud14c\uc774\ube14-\uc791\uc5c5",children:"\ud14c\uc774\ube14 \uc791\uc5c5"})}),"\n",(0,l.jsx)(n.p,{children:"Alembic\uc73c\ub85c \ud14c\uc774\ube14\uc744 \uc0dd\uc131, \uc218\uc815, \uc0ad\uc81c\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6cc\ubd05\uc2dc\ub2e4!"}),"\n",(0,l.jsx)(n.h2,{id:"-\ud559\uc2b5-\ubaa9\ud45c",children:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"create_table\ub85c \ud14c\uc774\ube14 \uc0dd\uc131"}),"\n",(0,l.jsx)(n.li,{children:"drop_table\ub85c \ud14c\uc774\ube14 \uc0ad\uc81c"}),"\n",(0,l.jsx)(n.li,{children:"rename_table\ub85c \ud14c\uc774\ube14 \uc774\ub984 \ubcc0\uacbd"}),"\n",(0,l.jsx)(n.li,{children:"\uc678\ub798 \ud0a4\uc640 \uc81c\uc57d\uc870\uac74 \ucd94\uac00"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"-create_table-\ud14c\uc774\ube14-\uc0dd\uc131",children:"\ud83d\udcdd create_table: \ud14c\uc774\ube14 \uc0dd\uc131"}),"\n",(0,l.jsx)(n.h3,{id:"\uae30\ubcf8-\ubb38\ubc95",children:"\uae30\ubcf8 \ubb38\ubc95"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"from alembic import op\nimport sqlalchemy as sa\n\ndef upgrade():\n    op.create_table(\n        'table_name',\n        sa.Column('column1', sa.Type(), ...),\n        sa.Column('column2', sa.Type(), ...),\n        # \uc81c\uc57d\uc870\uac74\ub4e4...\n    )\n\ndef downgrade():\n    op.drop_table('table_name')\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\uac04\ub2e8\ud55c-\uc608\uc81c",children:"\uac04\ub2e8\ud55c \uc608\uc81c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def upgrade():\n    op.create_table(\n        'products',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('name', sa.String(100), nullable=False),\n        sa.Column('price', sa.Numeric(10, 2), nullable=False)\n    )\n\ndef downgrade():\n    op.drop_table('products')\n"})}),"\n",(0,l.jsx)(n.h2,{id:"-\ub2e4\uc591\ud55c-\ud14c\uc774\ube14-\uc0dd\uc131-\uc608\uc81c",children:"\ud83d\udd27 \ub2e4\uc591\ud55c \ud14c\uc774\ube14 \uc0dd\uc131 \uc608\uc81c"}),"\n",(0,l.jsx)(n.h3,{id:"\uc608\uc81c-1-\uae30\ubcf8-\ud0a4\uac00-\uc788\ub294-\ud14c\uc774\ube14",children:"\uc608\uc81c 1: \uae30\ubcf8 \ud0a4\uac00 \uc788\ub294 \ud14c\uc774\ube14"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def upgrade():\n    op.create_table(\n        'users',\n        sa.Column('id', sa.Integer(), primary_key=True, autoincrement=True),\n        sa.Column('username', sa.String(50), unique=True, nullable=False),\n        sa.Column('email', sa.String(100), unique=True, nullable=False),\n        sa.Column('created_at', sa.DateTime(), server_default=sa.func.now())\n    )\n\ndef downgrade():\n    op.drop_table('users')\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\uc608\uc81c-2-\uc678\ub798-\ud0a4\uac00-\uc788\ub294-\ud14c\uc774\ube14",children:"\uc608\uc81c 2: \uc678\ub798 \ud0a4\uac00 \uc788\ub294 \ud14c\uc774\ube14"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def upgrade():\n    op.create_table(\n        'posts',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('title', sa.String(200), nullable=False),\n        sa.Column('content', sa.Text(), nullable=False),\n        sa.Column('author_id', sa.Integer(), nullable=False),\n        sa.Column('created_at', sa.DateTime(), server_default=sa.func.now()),\n        sa.ForeignKeyConstraint(\n            ['author_id'],\n            ['users.id'],\n            name='fk_posts_author',\n            ondelete='CASCADE'\n        )\n    )\n\ndef downgrade():\n    op.drop_table('posts')\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\uc608\uc81c-3-\ubcf5\ud569-\uae30\ubcf8-\ud0a4",children:"\uc608\uc81c 3: \ubcf5\ud569 \uae30\ubcf8 \ud0a4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def upgrade():\n    op.create_table(\n        'post_tags',\n        sa.Column('post_id', sa.Integer(), nullable=False),\n        sa.Column('tag_id', sa.Integer(), nullable=False),\n        sa.Column('created_at', sa.DateTime(), server_default=sa.func.now()),\n        sa.PrimaryKeyConstraint('post_id', 'tag_id', name='pk_post_tags'),\n        sa.ForeignKeyConstraint(['post_id'], ['posts.id'], ondelete='CASCADE'),\n        sa.ForeignKeyConstraint(['tag_id'], ['tags.id'], ondelete='CASCADE')\n    )\n\ndef downgrade():\n    op.drop_table('post_tags')\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\uc608\uc81c-4-\uccb4\ud06c-\uc81c\uc57d\uc870\uac74",children:"\uc608\uc81c 4: \uccb4\ud06c \uc81c\uc57d\uc870\uac74"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def upgrade():\n    op.create_table(\n        'products',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('name', sa.String(100), nullable=False),\n        sa.Column('price', sa.Numeric(10, 2), nullable=False),\n        sa.Column('stock', sa.Integer(), default=0),\n        sa.Column('rating', sa.Float()),\n        sa.CheckConstraint('price > 0', name='check_positive_price'),\n        sa.CheckConstraint('stock >= 0', name='check_non_negative_stock'),\n        sa.CheckConstraint('rating >= 0 AND rating <= 5', name='check_rating_range')\n    )\n\ndef downgrade():\n    op.drop_table('products')\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\ufe0f-drop_table-\ud14c\uc774\ube14-\uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f drop_table: \ud14c\uc774\ube14 \uc0ad\uc81c"}),"\n",(0,l.jsx)(n.h3,{id:"\uae30\ubcf8-\uc0ac\uc6a9\ubc95",children:"\uae30\ubcf8 \uc0ac\uc6a9\ubc95"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def upgrade():\n    op.drop_table('old_table')\n\ndef downgrade():\n    # \ub864\ubc31 \uc2dc \ud14c\uc774\ube14 \uc7ac\uc0dd\uc131\n    op.create_table(\n        'old_table',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        # \uc6d0\ub798 \uceec\ub7fc\ub4e4...\n    )\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\uc870\uac74\ubd80-\uc0ad\uc81c-if-exists",children:"\uc870\uac74\ubd80 \uc0ad\uc81c (if exists)"}),"\n",(0,l.jsx)(n.p,{children:"Alembic\uc740 \uae30\ubcf8\uc801\uc73c\ub85c if_exists\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc9c0\ub9cc, \uc9c1\uc811 SQL\ub85c \uac00\ub2a5:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def upgrade():\n    # PostgreSQL\n    op.execute('DROP TABLE IF EXISTS old_table')\n\n    # \ub610\ub294 try-catch\n    try:\n        op.drop_table('old_table')\n    except:\n        pass\n\ndef downgrade():\n    op.create_table('old_table', ...)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"-rename_table-\ud14c\uc774\ube14-\uc774\ub984-\ubcc0\uacbd",children:"\ud83d\udd04 rename_table: \ud14c\uc774\ube14 \uc774\ub984 \ubcc0\uacbd"}),"\n",(0,l.jsx)(n.h3,{id:"\uae30\ubcf8-\uc0ac\uc6a9\ubc95-1",children:"\uae30\ubcf8 \uc0ac\uc6a9\ubc95"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def upgrade():\n    op.rename_table('old_name', 'new_name')\n\ndef downgrade():\n    op.rename_table('new_name', 'old_name')\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\uc2e4\uc804-\uc608\uc81c",children:"\uc2e4\uc804 \uc608\uc81c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"\"\"\"rename user table to users\n\nRevision ID: abc123\nRevises: xyz789\n\"\"\"\n\ndef upgrade():\n    # 1. \ud14c\uc774\ube14 \uc774\ub984 \ubcc0\uacbd\n    op.rename_table('user', 'users')\n\n    # 2. \uc678\ub798 \ud0a4\uac00 \uc788\ub294 \uacbd\uc6b0 \uc81c\uc57d\uc870\uac74 \uc774\ub984\ub3c4 \uc5c5\ub370\uc774\ud2b8\n    op.drop_constraint('fk_post_user', 'posts', type_='foreignkey')\n    op.create_foreign_key(\n        'fk_post_users',\n        'posts', 'users',\n        ['user_id'], ['id']\n    )\n\ndef downgrade():\n    op.rename_table('users', 'user')\n    op.drop_constraint('fk_post_users', 'posts', type_='foreignkey')\n    op.create_foreign_key(\n        'fk_post_user',\n        'posts', 'user',\n        ['user_id'], ['id']\n    )\n"})}),"\n",(0,l.jsx)(n.h2,{id:"-\ubcf5\uc7a1\ud55c-\uc2e4\uc804-\uc608\uc81c",children:"\ud83c\udfa8 \ubcf5\uc7a1\ud55c \uc2e4\uc804 \uc608\uc81c"}),"\n",(0,l.jsx)(n.h3,{id:"\uc608\uc81c-1-\uc804\uc790\uc0c1\uac70\ub798-\uc8fc\ubb38-\uc2dc\uc2a4\ud15c",children:"\uc608\uc81c 1: \uc804\uc790\uc0c1\uac70\ub798 \uc8fc\ubb38 \uc2dc\uc2a4\ud15c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"\"\"\"create order tables\n\nRevision ID: ecommerce001\n\"\"\"\n\ndef upgrade():\n    # \uc8fc\ubb38 \ud14c\uc774\ube14\n    op.create_table(\n        'orders',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('user_id', sa.Integer(), nullable=False),\n        sa.Column('status', sa.String(20), default='pending'),\n        sa.Column('total_amount', sa.Numeric(12, 2), nullable=False),\n        sa.Column('shipping_address', sa.Text()),\n        sa.Column('created_at', sa.DateTime(), server_default=sa.func.now()),\n        sa.Column('updated_at', sa.DateTime(), onupdate=sa.func.now()),\n        sa.ForeignKeyConstraint(['user_id'], ['users.id']),\n        sa.CheckConstraint('total_amount >= 0', name='check_total_amount')\n    )\n\n    # \uc8fc\ubb38 \uc0c1\ud488 \ud14c\uc774\ube14\n    op.create_table(\n        'order_items',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('order_id', sa.Integer(), nullable=False),\n        sa.Column('product_id', sa.Integer(), nullable=False),\n        sa.Column('quantity', sa.Integer(), nullable=False),\n        sa.Column('unit_price', sa.Numeric(10, 2), nullable=False),\n        sa.Column('subtotal', sa.Numeric(12, 2), nullable=False),\n        sa.ForeignKeyConstraint(['order_id'], ['orders.id'], ondelete='CASCADE'),\n        sa.ForeignKeyConstraint(['product_id'], ['products.id']),\n        sa.CheckConstraint('quantity > 0', name='check_positive_quantity'),\n        sa.CheckConstraint('unit_price >= 0', name='check_price'),\n        sa.CheckConstraint('subtotal >= 0', name='check_subtotal')\n    )\n\ndef downgrade():\n    op.drop_table('order_items')\n    op.drop_table('orders')\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\uc608\uc81c-2-\uc18c\uc15c-\ubbf8\ub514\uc5b4-\uc2a4\ud0a4\ub9c8",children:"\uc608\uc81c 2: \uc18c\uc15c \ubbf8\ub514\uc5b4 \uc2a4\ud0a4\ub9c8"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"\"\"\"create social media tables\n\nRevision ID: social001\n\"\"\"\n\ndef upgrade():\n    # \ud504\ub85c\ud544 \ud14c\uc774\ube14\n    op.create_table(\n        'profiles',\n        sa.Column('user_id', sa.Integer(), primary_key=True),\n        sa.Column('bio', sa.Text()),\n        sa.Column('avatar_url', sa.String(500)),\n        sa.Column('followers_count', sa.Integer(), default=0),\n        sa.Column('following_count', sa.Integer(), default=0),\n        sa.ForeignKeyConstraint(['user_id'], ['users.id'], ondelete='CASCADE')\n    )\n\n    # \ud314\ub85c\uc6b0 \uad00\uacc4 \ud14c\uc774\ube14\n    op.create_table(\n        'follows',\n        sa.Column('follower_id', sa.Integer(), nullable=False),\n        sa.Column('following_id', sa.Integer(), nullable=False),\n        sa.Column('created_at', sa.DateTime(), server_default=sa.func.now()),\n        sa.PrimaryKeyConstraint('follower_id', 'following_id'),\n        sa.ForeignKeyConstraint(['follower_id'], ['users.id'], ondelete='CASCADE'),\n        sa.ForeignKeyConstraint(['following_id'], ['users.id'], ondelete='CASCADE'),\n        sa.CheckConstraint('follower_id != following_id', name='check_no_self_follow')\n    )\n\ndef downgrade():\n    op.drop_table('follows')\n    op.drop_table('profiles')\n"})}),"\n",(0,l.jsx)(n.h2,{id:"-\ud14c\uc774\ube14-\uc2a4\ud0a4\ub9c8-\ubcf5\uc0ac",children:"\ud83d\udcca \ud14c\uc774\ube14 \uc2a4\ud0a4\ub9c8 \ubcf5\uc0ac"}),"\n",(0,l.jsx)(n.p,{children:"\uae30\uc874 \ud14c\uc774\ube14\uacfc \ub3d9\uc77c\ud55c \uad6c\uc870\uc758 \uc0c8 \ud14c\uc774\ube14 \uc0dd\uc131:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def upgrade():\n    # \uae30\uc874 \ud14c\uc774\ube14 \uad6c\uc870 \ubcf5\uc0ac\n    op.create_table(\n        'users_backup',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('username', sa.String(50), nullable=False),\n        sa.Column('email', sa.String(100), nullable=False),\n        # ... \uae30\uc874 users \ud14c\uc774\ube14\uacfc \ub3d9\uc77c\ud55c \uad6c\uc870\n    )\n\n    # \ub370\uc774\ud130 \ubcf5\uc0ac\n    op.execute('''\n        INSERT INTO users_backup\n        SELECT * FROM users\n    ''')\n\ndef downgrade():\n    op.drop_table('users_backup')\n"})}),"\n",(0,l.jsx)(n.h2,{id:"-\ub370\uc774\ud130\ubca0\uc774\uc2a4\ubcc4-\uace0\ub824\uc0ac\ud56d",children:"\ud83d\udd0d \ub370\uc774\ud130\ubca0\uc774\uc2a4\ubcc4 \uace0\ub824\uc0ac\ud56d"}),"\n",(0,l.jsx)(n.h3,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def upgrade():\n    op.create_table(\n        'users',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('data', sa.JSON()),  # JSON \ud0c0\uc785\n        sa.Column('metadata', postgresql.JSONB()),  # JSONB \ud0c0\uc785\n        sa.Column('tags', postgresql.ARRAY(sa.String)),  # \ubc30\uc5f4\n        schema='public'  # \uc2a4\ud0a4\ub9c8 \uc9c0\uc815\n    )\n"})}),"\n",(0,l.jsx)(n.h3,{id:"mysql",children:"MySQL"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def upgrade():\n    op.create_table(\n        'users',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('name', sa.String(50)),\n        mysql_engine='InnoDB',  # \uc2a4\ud1a0\ub9ac\uc9c0 \uc5d4\uc9c4\n        mysql_charset='utf8mb4'  # \ubb38\uc790\uc14b\n    )\n"})}),"\n",(0,l.jsx)(n.h3,{id:"sqlite",children:"SQLite"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# SQLite\ub294 \uc77c\ubd80 ALTER TABLE \uc81c\uc57d\uc774 \uc788\uc74c\ndef upgrade():\n    op.create_table(\n        'users',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('name', sa.String(50))\n    )\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\ufe0f-\uc8fc\uc758\uc0ac\ud56d",children:"\u26a0\ufe0f \uc8fc\uc758\uc0ac\ud56d"}),"\n",(0,l.jsx)(n.h3,{id:"1-\ud14c\uc774\ube14-\uc0ad\uc81c-\uc2dc-\ub370\uc774\ud130-\uc190\uc2e4",children:"1. \ud14c\uc774\ube14 \uc0ad\uc81c \uc2dc \ub370\uc774\ud130 \uc190\uc2e4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# \u274c \uc704\ud5d8: \ub370\uc774\ud130 \uc190\uc2e4\ndef downgrade():\n    op.drop_table('users')  # \ubaa8\ub4e0 \uc0ac\uc6a9\uc790 \ub370\uc774\ud130 \uc0ad\uc81c!\n\n# \u2705 \uc548\uc804: \ubc31\uc5c5 \uba3c\uc800\ndef upgrade():\n    # \ubc31\uc5c5 \ud14c\uc774\ube14 \uc0dd\uc131\n    op.execute('CREATE TABLE users_backup AS SELECT * FROM users')\n    # \uc791\uc5c5 \uc218\ud589\n    op.drop_table('users')\n\ndef downgrade():\n    # \ubc31\uc5c5\uc5d0\uc11c \ubcf5\uc6d0\n    op.execute('CREATE TABLE users AS SELECT * FROM users_backup')\n    op.drop_table('users_backup')\n"})}),"\n",(0,l.jsx)(n.h3,{id:"2-\uc678\ub798-\ud0a4-\uc21c\uc11c",children:"2. \uc678\ub798 \ud0a4 \uc21c\uc11c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# \u2705 \uc62c\ubc14\ub978 \uc21c\uc11c: \ubd80\ubaa8 \ud14c\uc774\ube14 \uba3c\uc800\ndef upgrade():\n    op.create_table('users', ...)  # \uba3c\uc800\n    op.create_table('posts', ...)  # \ub098\uc911\n\ndef downgrade():\n    op.drop_table('posts')   # \uba3c\uc800 (\uc790\uc2dd)\n    op.drop_table('users')   # \ub098\uc911 (\ubd80\ubaa8)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"-\uc2e4\uc2b5-\uacfc\uc81c",children:"\u2705 \uc2e4\uc2b5 \uacfc\uc81c"}),"\n",(0,l.jsx)(n.h3,{id:"\uacfc\uc81c-1-\ube14\ub85c\uadf8-\uc2dc\uc2a4\ud15c",children:"\uacfc\uc81c 1: \ube14\ub85c\uadf8 \uc2dc\uc2a4\ud15c"}),"\n",(0,l.jsx)(n.p,{children:"\ub2e4\uc74c \uc694\uad6c\uc0ac\ud56d\uc5d0 \ub9de\ub294 \ud14c\uc774\ube14\ub4e4\uc744 \uc0dd\uc131\ud558\uc138\uc694:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"categories \ud14c\uc774\ube14"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"id, name, slug, description"}),"\n",(0,l.jsx)(n.li,{children:"parent_id (\uc790\uae30 \ucc38\uc870)"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"posts \ud14c\uc774\ube14"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"id, title, slug, content, author_id, category_id"}),"\n",(0,l.jsx)(n.li,{children:"published_at, view_count"}),"\n",(0,l.jsx)(n.li,{children:"\uc678\ub798 \ud0a4: users.id, categories.id"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"comments \ud14c\uc774\ube14"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"id, post_id, user_id, content, parent_id"}),"\n",(0,l.jsx)(n.li,{children:"created_at"}),"\n",(0,l.jsx)(n.li,{children:"\uc678\ub798 \ud0a4\uc640 \uc790\uae30 \ucc38\uc870"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(a,{children:[(0,l.jsx)("summary",{children:"\uc815\ub2f5 \ubcf4\uae30"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def upgrade():\n    # 1. Categories\n    op.create_table(\n        'categories',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('name', sa.String(50), unique=True, nullable=False),\n        sa.Column('slug', sa.String(50), unique=True, nullable=False),\n        sa.Column('description', sa.Text()),\n        sa.Column('parent_id', sa.Integer()),\n        sa.ForeignKeyConstraint(['parent_id'], ['categories.id'])\n    )\n\n    # 2. Posts\n    op.create_table(\n        'posts',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('title', sa.String(200), nullable=False),\n        sa.Column('slug', sa.String(200), unique=True, nullable=False),\n        sa.Column('content', sa.Text(), nullable=False),\n        sa.Column('author_id', sa.Integer(), nullable=False),\n        sa.Column('category_id', sa.Integer()),\n        sa.Column('published_at', sa.DateTime()),\n        sa.Column('view_count', sa.Integer(), default=0),\n        sa.ForeignKeyConstraint(['author_id'], ['users.id']),\n        sa.ForeignKeyConstraint(['category_id'], ['categories.id'])\n    )\n\n    # 3. Comments\n    op.create_table(\n        'comments',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('post_id', sa.Integer(), nullable=False),\n        sa.Column('user_id', sa.Integer(), nullable=False),\n        sa.Column('content', sa.Text(), nullable=False),\n        sa.Column('parent_id', sa.Integer()),\n        sa.Column('created_at', sa.DateTime(), server_default=sa.func.now()),\n        sa.ForeignKeyConstraint(['post_id'], ['posts.id'], ondelete='CASCADE'),\n        sa.ForeignKeyConstraint(['user_id'], ['users.id']),\n        sa.ForeignKeyConstraint(['parent_id'], ['comments.id'])\n    )\n\ndef downgrade():\n    op.drop_table('comments')\n    op.drop_table('posts')\n    op.drop_table('categories')\n"})})]}),"\n",(0,l.jsx)(n.h2,{id:"-\ud575\uc2ec-\uc815\ub9ac",children:"\ud83d\udcda \ud575\uc2ec \uc815\ub9ac"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"op.create_table()"}),": \ud14c\uc774\ube14 \uc0dd\uc131"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"op.drop_table()"}),": \ud14c\uc774\ube14 \uc0ad\uc81c"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"op.rename_table()"}),": \ud14c\uc774\ube14 \uc774\ub984 \ubcc0\uacbd"]}),"\n",(0,l.jsx)(n.li,{children:"\uc678\ub798 \ud0a4 \uc21c\uc11c: \ubd80\ubaa8 \ud14c\uc774\ube14 \uba3c\uc800 \uc0dd\uc131, \uc790\uc2dd \ud14c\uc774\ube14 \uba3c\uc800 \uc0ad\uc81c"}),"\n",(0,l.jsx)(n.li,{children:"downgrade \ud568\uc218\ub294 upgrade\uc758 \uc5ed\uc21c\uc73c\ub85c \uc791\uc131"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"-\ub2e4\uc74c-\ub2e8\uacc4",children:"\ud83d\udcda \ub2e4\uc74c \ub2e8\uacc4"}),"\n",(0,l.jsx)(n.p,{children:"\ud14c\uc774\ube14 \uc791\uc5c5\uc744 \ubc30\uc6e0\uc73c\ub2c8, \uc774\uc81c \uceec\ub7fc \uad00\ub9ac\ub97c \uc54c\uc544\ubd05\uc2dc\ub2e4!"}),"\n",(0,l.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,l.jsx)(n.a,{href:"./columns",children:"\uceec\ub7fc \uc791\uc5c5"})]})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(u,{...e})}):u(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>t,x:()=>i});var s=a(6540);const l={},r=s.createContext(l);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);