"use strict";(globalThis.webpackChunkgithub_docs=globalThis.webpackChunkgithub_docs||[]).push([[2749],{8453:(n,e,l)=>{l.d(e,{R:()=>o,x:()=>d});var s=l(6540);const r={},a=s.createContext(r);function o(n){const e=s.useContext(a);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),s.createElement(a.Provider,{value:e},n.children)}},9721:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>u,contentTitle:()=>d,default:()=>t,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"alembic/basic/columns","title":"\uceec\ub7fc \uc791\uc5c5","description":"\ud14c\uc774\ube14\uc758 \uceec\ub7fc\uc744 \ucd94\uac00, \uc218\uc815, \uc0ad\uc81c\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6cc\ubd05\uc2dc\ub2e4!","source":"@site/docs/alembic/basic/columns.md","sourceDirName":"alembic/basic","slug":"/alembic/basic/columns","permalink":"/tobias-docs/comp-2/docs/alembic/basic/columns","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/alembic/basic/columns.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"alembicSidebar","previous":{"title":"\ud14c\uc774\ube14 \uc791\uc5c5","permalink":"/tobias-docs/comp-2/docs/alembic/basic/tables"},"next":{"title":"\uc81c\uc57d\uc870\uac74\uacfc \uc778\ub371\uc2a4","permalink":"/tobias-docs/comp-2/docs/alembic/basic/constraints"}}');var r=l(4848),a=l(8453);const o={sidebar_position:7},d="\uceec\ub7fc \uc791\uc5c5",u={},c=[{value:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c",id:"-\ud559\uc2b5-\ubaa9\ud45c",level:2},{value:"\u2795 add_column: \uceec\ub7fc \ucd94\uac00",id:"-add_column-\uceec\ub7fc-\ucd94\uac00",level:2},{value:"\uae30\ubcf8 \ubb38\ubc95",id:"\uae30\ubcf8-\ubb38\ubc95",level:3},{value:"\uac04\ub2e8\ud55c \uc608\uc81c",id:"\uac04\ub2e8\ud55c-\uc608\uc81c",level:3},{value:"\ud83d\udd27 \ub2e4\uc591\ud55c \uceec\ub7fc \ucd94\uac00 \uc608\uc81c",id:"-\ub2e4\uc591\ud55c-\uceec\ub7fc-\ucd94\uac00-\uc608\uc81c",level:2},{value:"\uc608\uc81c 1: NULL \uac00\ub2a5\ud55c \uceec\ub7fc",id:"\uc608\uc81c-1-null-\uac00\ub2a5\ud55c-\uceec\ub7fc",level:3},{value:"\uc608\uc81c 2: \uae30\ubcf8\uac12\uc774 \uc788\ub294 \uceec\ub7fc",id:"\uc608\uc81c-2-\uae30\ubcf8\uac12\uc774-\uc788\ub294-\uceec\ub7fc",level:3},{value:"\uc608\uc81c 3: NOT NULL \uceec\ub7fc (\uae30\uc874 \ub370\uc774\ud130 \uc788\uc744 \ub54c)",id:"\uc608\uc81c-3-not-null-\uceec\ub7fc-\uae30\uc874-\ub370\uc774\ud130-\uc788\uc744-\ub54c",level:3},{value:"\uc608\uc81c 4: \uc5ec\ub7ec \uceec\ub7fc \ub3d9\uc2dc \ucd94\uac00",id:"\uc608\uc81c-4-\uc5ec\ub7ec-\uceec\ub7fc-\ub3d9\uc2dc-\ucd94\uac00",level:3},{value:"\u2796 drop_column: \uceec\ub7fc \uc0ad\uc81c",id:"-drop_column-\uceec\ub7fc-\uc0ad\uc81c",level:2},{value:"\uae30\ubcf8 \uc0ac\uc6a9\ubc95",id:"\uae30\ubcf8-\uc0ac\uc6a9\ubc95",level:3},{value:"\uc5ec\ub7ec \uceec\ub7fc \uc0ad\uc81c",id:"\uc5ec\ub7ec-\uceec\ub7fc-\uc0ad\uc81c",level:3},{value:"\ud83d\udd04 alter_column: \uceec\ub7fc \uc218\uc815",id:"-alter_column-\uceec\ub7fc-\uc218\uc815",level:2},{value:"\uae30\ubcf8 \ubb38\ubc95",id:"\uae30\ubcf8-\ubb38\ubc95-1",level:3},{value:"\uc608\uc81c 1: \uceec\ub7fc \ud0c0\uc785 \ubcc0\uacbd",id:"\uc608\uc81c-1-\uceec\ub7fc-\ud0c0\uc785-\ubcc0\uacbd",level:3},{value:"\uc608\uc81c 2: NULL \ud5c8\uc6a9 \uc5ec\ubd80 \ubcc0\uacbd",id:"\uc608\uc81c-2-null-\ud5c8\uc6a9-\uc5ec\ubd80-\ubcc0\uacbd",level:3},{value:"\uc608\uc81c 3: \uceec\ub7fc \uc774\ub984 \ubcc0\uacbd",id:"\uc608\uc81c-3-\uceec\ub7fc-\uc774\ub984-\ubcc0\uacbd",level:3},{value:"\uc608\uc81c 4: \uae30\ubcf8\uac12 \ubcc0\uacbd",id:"\uc608\uc81c-4-\uae30\ubcf8\uac12-\ubcc0\uacbd",level:3},{value:"\uc608\uc81c 5: \uc5ec\ub7ec \uc18d\uc131 \ub3d9\uc2dc \ubcc0\uacbd",id:"\uc608\uc81c-5-\uc5ec\ub7ec-\uc18d\uc131-\ub3d9\uc2dc-\ubcc0\uacbd",level:3},{value:"\ud83c\udfa8 \uc2e4\uc804 \uc608\uc81c",id:"-\uc2e4\uc804-\uc608\uc81c",level:2},{value:"\uc608\uc81c 1: \uc0ac\uc6a9\uc790 \ud14c\uc774\ube14 \ud655\uc7a5",id:"\uc608\uc81c-1-\uc0ac\uc6a9\uc790-\ud14c\uc774\ube14-\ud655\uc7a5",level:3},{value:"\uc608\uc81c 2: \ub370\uc774\ud130 \ud0c0\uc785 \ub9c8\uc774\uadf8\ub808\uc774\uc158",id:"\uc608\uc81c-2-\ub370\uc774\ud130-\ud0c0\uc785-\ub9c8\uc774\uadf8\ub808\uc774\uc158",level:3},{value:"\uc608\uc81c 3: \uceec\ub7fc \ubd84\ub9ac",id:"\uc608\uc81c-3-\uceec\ub7fc-\ubd84\ub9ac",level:3},{value:"\ud83d\udcca \ub370\uc774\ud130\ubca0\uc774\uc2a4\ubcc4 \ucc28\uc774\uc810",id:"-\ub370\uc774\ud130\ubca0\uc774\uc2a4\ubcc4-\ucc28\uc774\uc810",level:2},{value:"PostgreSQL",id:"postgresql",level:3},{value:"MySQL",id:"mysql",level:3},{value:"SQLite",id:"sqlite",level:3},{value:"\u26a0\ufe0f \uc8fc\uc758\uc0ac\ud56d",id:"\ufe0f-\uc8fc\uc758\uc0ac\ud56d",level:2},{value:"1. NOT NULL \uceec\ub7fc \ucd94\uac00",id:"1-not-null-\uceec\ub7fc-\ucd94\uac00",level:3},{value:"2. \uceec\ub7fc \uc0ad\uc81c \uc2dc \ub370\uc774\ud130 \uc190\uc2e4",id:"2-\uceec\ub7fc-\uc0ad\uc81c-\uc2dc-\ub370\uc774\ud130-\uc190\uc2e4",level:3},{value:"3. \ud0c0\uc785 \ubcc0\uacbd \uc2dc \ub370\uc774\ud130 \ud638\ud658\uc131",id:"3-\ud0c0\uc785-\ubcc0\uacbd-\uc2dc-\ub370\uc774\ud130-\ud638\ud658\uc131",level:3},{value:"\u2705 \uc2e4\uc2b5 \uacfc\uc81c",id:"-\uc2e4\uc2b5-\uacfc\uc81c",level:2},{value:"\uacfc\uc81c: \uc774\ucee4\uba38\uc2a4 \uc81c\ud488 \ud14c\uc774\ube14 \uac1c\uc120",id:"\uacfc\uc81c-\uc774\ucee4\uba38\uc2a4-\uc81c\ud488-\ud14c\uc774\ube14-\uac1c\uc120",level:3},{value:"\ud83d\udcda \ud575\uc2ec \uc815\ub9ac",id:"-\ud575\uc2ec-\uc815\ub9ac",level:2},{value:"\ud83d\udcda \ub2e4\uc74c \ub2e8\uacc4",id:"-\ub2e4\uc74c-\ub2e8\uacc4",level:2}];function i(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...n.components},{Details:l}=e;return l||function(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\uceec\ub7fc-\uc791\uc5c5",children:"\uceec\ub7fc \uc791\uc5c5"})}),"\n",(0,r.jsx)(e.p,{children:"\ud14c\uc774\ube14\uc758 \uceec\ub7fc\uc744 \ucd94\uac00, \uc218\uc815, \uc0ad\uc81c\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6cc\ubd05\uc2dc\ub2e4!"}),"\n",(0,r.jsx)(e.h2,{id:"-\ud559\uc2b5-\ubaa9\ud45c",children:"\ud83c\udfaf \ud559\uc2b5 \ubaa9\ud45c"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"add_column\uc73c\ub85c \uceec\ub7fc \ucd94\uac00"}),"\n",(0,r.jsx)(e.li,{children:"drop_column\uc73c\ub85c \uceec\ub7fc \uc0ad\uc81c"}),"\n",(0,r.jsx)(e.li,{children:"alter_column\uc73c\ub85c \uceec\ub7fc \uc218\uc815"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"-add_column-\uceec\ub7fc-\ucd94\uac00",children:"\u2795 add_column: \uceec\ub7fc \ucd94\uac00"}),"\n",(0,r.jsx)(e.h3,{id:"\uae30\ubcf8-\ubb38\ubc95",children:"\uae30\ubcf8 \ubb38\ubc95"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"from alembic import op\nimport sqlalchemy as sa\n\ndef upgrade():\n    op.add_column('table_name',\n        sa.Column('column_name', sa.Type(), ...)\n    )\n\ndef downgrade():\n    op.drop_column('table_name', 'column_name')\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uac04\ub2e8\ud55c-\uc608\uc81c",children:"\uac04\ub2e8\ud55c \uc608\uc81c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def upgrade():\n    op.add_column('users', sa.Column('phone', sa.String(20)))\n\ndef downgrade():\n    op.drop_column('users', 'phone')\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-\ub2e4\uc591\ud55c-\uceec\ub7fc-\ucd94\uac00-\uc608\uc81c",children:"\ud83d\udd27 \ub2e4\uc591\ud55c \uceec\ub7fc \ucd94\uac00 \uc608\uc81c"}),"\n",(0,r.jsx)(e.h3,{id:"\uc608\uc81c-1-null-\uac00\ub2a5\ud55c-\uceec\ub7fc",children:"\uc608\uc81c 1: NULL \uac00\ub2a5\ud55c \uceec\ub7fc"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def upgrade():\n    op.add_column('users',\n        sa.Column('bio', sa.Text(), nullable=True)\n    )\n\ndef downgrade():\n    op.drop_column('users', 'bio')\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc608\uc81c-2-\uae30\ubcf8\uac12\uc774-\uc788\ub294-\uceec\ub7fc",children:"\uc608\uc81c 2: \uae30\ubcf8\uac12\uc774 \uc788\ub294 \uceec\ub7fc"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def upgrade():\n    op.add_column('posts',\n        sa.Column('view_count', sa.Integer(), default=0, server_default='0')\n    )\n\ndef downgrade():\n    op.drop_column('posts', 'view_count')\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc608\uc81c-3-not-null-\uceec\ub7fc-\uae30\uc874-\ub370\uc774\ud130-\uc788\uc744-\ub54c",children:"\uc608\uc81c 3: NOT NULL \uceec\ub7fc (\uae30\uc874 \ub370\uc774\ud130 \uc788\uc744 \ub54c)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def upgrade():\n    # 1. NULL \uac00\ub2a5\ud55c \uc0c1\ud0dc\ub85c \ucd94\uac00\n    op.add_column('users',\n        sa.Column('email', sa.String(100))\n    )\n\n    # 2. \uae30\uc874 \ud589\ub4e4\uc5d0 \uae30\ubcf8\uac12 \uc124\uc815\n    op.execute(\"UPDATE users SET email = username || '@example.com' WHERE email IS NULL\")\n\n    # 3. NOT NULL \uc81c\uc57d\uc870\uac74 \ucd94\uac00\n    op.alter_column('users', 'email', nullable=False)\n\ndef downgrade():\n    op.drop_column('users', 'email')\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc608\uc81c-4-\uc5ec\ub7ec-\uceec\ub7fc-\ub3d9\uc2dc-\ucd94\uac00",children:"\uc608\uc81c 4: \uc5ec\ub7ec \uceec\ub7fc \ub3d9\uc2dc \ucd94\uac00"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def upgrade():\n    op.add_column('products', sa.Column('brand', sa.String(50)))\n    op.add_column('products', sa.Column('model', sa.String(50)))\n    op.add_column('products', sa.Column('year', sa.Integer()))\n\ndef downgrade():\n    op.drop_column('products', 'year')\n    op.drop_column('products', 'model')\n    op.drop_column('products', 'brand')\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-drop_column-\uceec\ub7fc-\uc0ad\uc81c",children:"\u2796 drop_column: \uceec\ub7fc \uc0ad\uc81c"}),"\n",(0,r.jsx)(e.h3,{id:"\uae30\ubcf8-\uc0ac\uc6a9\ubc95",children:"\uae30\ubcf8 \uc0ac\uc6a9\ubc95"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def upgrade():\n    op.drop_column('users', 'old_column')\n\ndef downgrade():\n    # \ub864\ubc31 \uc2dc \uceec\ub7fc \uc7ac\uc0dd\uc131\n    op.add_column('users',\n        sa.Column('old_column', sa.String(50))\n    )\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc5ec\ub7ec-\uceec\ub7fc-\uc0ad\uc81c",children:"\uc5ec\ub7ec \uceec\ub7fc \uc0ad\uc81c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def upgrade():\n    op.drop_column('users', 'old_field1')\n    op.drop_column('users', 'old_field2')\n    op.drop_column('users', 'old_field3')\n\ndef downgrade():\n    op.add_column('users', sa.Column('old_field3', sa.String(50)))\n    op.add_column('users', sa.Column('old_field2', sa.String(50)))\n    op.add_column('users', sa.Column('old_field1', sa.String(50)))\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-alter_column-\uceec\ub7fc-\uc218\uc815",children:"\ud83d\udd04 alter_column: \uceec\ub7fc \uc218\uc815"}),"\n",(0,r.jsx)(e.h3,{id:"\uae30\ubcf8-\ubb38\ubc95-1",children:"\uae30\ubcf8 \ubb38\ubc95"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"op.alter_column(\n    'table_name',\n    'column_name',\n    type_=sa.NewType(),           # \ud0c0\uc785 \ubcc0\uacbd\n    nullable=True/False,          # NULL \ud5c8\uc6a9 \uc5ec\ubd80\n    server_default='value',       # \uae30\ubcf8\uac12\n    new_column_name='new_name'    # \uc774\ub984 \ubcc0\uacbd\n)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc608\uc81c-1-\uceec\ub7fc-\ud0c0\uc785-\ubcc0\uacbd",children:"\uc608\uc81c 1: \uceec\ub7fc \ud0c0\uc785 \ubcc0\uacbd"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def upgrade():\n    # VARCHAR(50) -> VARCHAR(100)\n    op.alter_column('users', 'username',\n        type_=sa.String(100),\n        existing_type=sa.String(50)\n    )\n\ndef downgrade():\n    op.alter_column('users', 'username',\n        type_=sa.String(50),\n        existing_type=sa.String(100)\n    )\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc608\uc81c-2-null-\ud5c8\uc6a9-\uc5ec\ubd80-\ubcc0\uacbd",children:"\uc608\uc81c 2: NULL \ud5c8\uc6a9 \uc5ec\ubd80 \ubcc0\uacbd"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def upgrade():\n    # NULL \ubd88\uac00 -> NULL \uac00\ub2a5\n    op.alter_column('users', 'phone',\n        nullable=True,\n        existing_type=sa.String(20)\n    )\n\ndef downgrade():\n    # NULL \uac00\ub2a5 -> NULL \ubd88\uac00\n    # \uc8fc\uc758: \uba3c\uc800 NULL \uac12 \ucc98\ub9ac \ud544\uc694\n    op.execute(\"UPDATE users SET phone = '' WHERE phone IS NULL\")\n    op.alter_column('users', 'phone',\n        nullable=False,\n        existing_type=sa.String(20)\n    )\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc608\uc81c-3-\uceec\ub7fc-\uc774\ub984-\ubcc0\uacbd",children:"\uc608\uc81c 3: \uceec\ub7fc \uc774\ub984 \ubcc0\uacbd"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def upgrade():\n    op.alter_column('users', 'username',\n        new_column_name='user_name'\n    )\n\ndef downgrade():\n    op.alter_column('users', 'user_name',\n        new_column_name='username'\n    )\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc608\uc81c-4-\uae30\ubcf8\uac12-\ubcc0\uacbd",children:"\uc608\uc81c 4: \uae30\ubcf8\uac12 \ubcc0\uacbd"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def upgrade():\n    op.alter_column('posts', 'status',\n        server_default='draft',\n        existing_type=sa.String(20)\n    )\n\ndef downgrade():\n    op.alter_column('posts', 'status',\n        server_default='published',\n        existing_type=sa.String(20)\n    )\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc608\uc81c-5-\uc5ec\ub7ec-\uc18d\uc131-\ub3d9\uc2dc-\ubcc0\uacbd",children:"\uc608\uc81c 5: \uc5ec\ub7ec \uc18d\uc131 \ub3d9\uc2dc \ubcc0\uacbd"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def upgrade():\n    op.alter_column('users', 'email',\n        type_=sa.String(200),        # \uae38\uc774 \uc99d\uac00\n        nullable=False,              # NOT NULL \ucd94\uac00\n        new_column_name='email_address',  # \uc774\ub984 \ubcc0\uacbd\n        existing_type=sa.String(100)\n    )\n\ndef downgrade():\n    op.alter_column('users', 'email_address',\n        type_=sa.String(100),\n        nullable=True,\n        new_column_name='email',\n        existing_type=sa.String(200)\n    )\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-\uc2e4\uc804-\uc608\uc81c",children:"\ud83c\udfa8 \uc2e4\uc804 \uc608\uc81c"}),"\n",(0,r.jsx)(e.h3,{id:"\uc608\uc81c-1-\uc0ac\uc6a9\uc790-\ud14c\uc774\ube14-\ud655\uc7a5",children:"\uc608\uc81c 1: \uc0ac\uc6a9\uc790 \ud14c\uc774\ube14 \ud655\uc7a5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"\"\"\"add user profile fields\n\nRevision ID: profile001\n\"\"\"\n\ndef upgrade():\n    # \ud504\ub85c\ud544 \ud544\ub4dc \ucd94\uac00\n    op.add_column('users', sa.Column('first_name', sa.String(50)))\n    op.add_column('users', sa.Column('last_name', sa.String(50)))\n    op.add_column('users', sa.Column('birth_date', sa.Date()))\n    op.add_column('users', sa.Column('avatar_url', sa.String(500)))\n    op.add_column('users', sa.Column('bio', sa.Text()))\n    op.add_column('users', sa.Column('is_verified', sa.Boolean(), server_default='false'))\n\ndef downgrade():\n    op.drop_column('users', 'is_verified')\n    op.drop_column('users', 'bio')\n    op.drop_column('users', 'avatar_url')\n    op.drop_column('users', 'birth_date')\n    op.drop_column('users', 'last_name')\n    op.drop_column('users', 'first_name')\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc608\uc81c-2-\ub370\uc774\ud130-\ud0c0\uc785-\ub9c8\uc774\uadf8\ub808\uc774\uc158",children:"\uc608\uc81c 2: \ub370\uc774\ud130 \ud0c0\uc785 \ub9c8\uc774\uadf8\ub808\uc774\uc158"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"\"\"\"change price column from integer to decimal\n\nRevision ID: price001\n\"\"\"\n\ndef upgrade():\n    # Integer -> Decimal(10,2)\n    # 1. \uc784\uc2dc \uceec\ub7fc \ucd94\uac00\n    op.add_column('products',\n        sa.Column('price_new', sa.Numeric(10, 2))\n    )\n\n    # 2. \ub370\uc774\ud130 \ubcf5\uc0ac \ubc0f \ubcc0\ud658\n    op.execute('''\n        UPDATE products\n        SET price_new = price / 100.0\n    ''')\n\n    # 3. \uae30\uc874 \uceec\ub7fc \uc0ad\uc81c\n    op.drop_column('products', 'price')\n\n    # 4. \uc0c8 \uceec\ub7fc \uc774\ub984 \ubcc0\uacbd\n    op.alter_column('products', 'price_new',\n        new_column_name='price'\n    )\n\ndef downgrade():\n    op.add_column('products', sa.Column('price_old', sa.Integer()))\n    op.execute('UPDATE products SET price_old = price * 100')\n    op.drop_column('products', 'price')\n    op.alter_column('products', 'price_old',\n        new_column_name='price'\n    )\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\uc608\uc81c-3-\uceec\ub7fc-\ubd84\ub9ac",children:"\uc608\uc81c 3: \uceec\ub7fc \ubd84\ub9ac"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"\"\"\"split fullname into first_name and last_name\n\nRevision ID: name001\n\"\"\"\n\ndef upgrade():\n    # 1. \uc0c8 \uceec\ub7fc \ucd94\uac00\n    op.add_column('users', sa.Column('first_name', sa.String(50)))\n    op.add_column('users', sa.Column('last_name', sa.String(50)))\n\n    # 2. \ub370\uc774\ud130 \ubd84\ub9ac\n    op.execute('''\n        UPDATE users\n        SET first_name = SPLIT_PART(fullname, ' ', 1),\n            last_name = SPLIT_PART(fullname, ' ', 2)\n    ''')\n\n    # 3. \uae30\uc874 \uceec\ub7fc \uc0ad\uc81c\n    op.drop_column('users', 'fullname')\n\ndef downgrade():\n    op.add_column('users', sa.Column('fullname', sa.String(100)))\n    op.execute(\"UPDATE users SET fullname = first_name || ' ' || last_name\")\n    op.drop_column('users', 'last_name')\n    op.drop_column('users', 'first_name')\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-\ub370\uc774\ud130\ubca0\uc774\uc2a4\ubcc4-\ucc28\uc774\uc810",children:"\ud83d\udcca \ub370\uc774\ud130\ubca0\uc774\uc2a4\ubcc4 \ucc28\uc774\uc810"}),"\n",(0,r.jsx)(e.h3,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"# \ud0c0\uc785 \ubcc0\uacbd\uc774 \uc790\uc720\ub85c\uc6c0\nop.alter_column('users', 'age',\n    type_=sa.String(10),  # Integer -> String \uac00\ub2a5\n    postgresql_using='age::text'  # \uba85\uc2dc\uc801 \uce90\uc2a4\ud305\n)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"mysql",children:"MySQL"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"# MODIFY\ub97c \uc0ac\uc6a9\nop.alter_column('users', 'age',\n    type_=sa.Integer(),\n    existing_type=sa.String(10)\n)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"sqlite",children:"SQLite"}),"\n",(0,r.jsx)(e.p,{children:"SQLite\ub294 ALTER COLUMN\uc744 \uc9c1\uc811 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc73c\ubbc0\ub85c \uc7ac\uc0dd\uc131 \ud544\uc694:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def upgrade():\n    # 1. \uc0c8 \ud14c\uc774\ube14 \uc0dd\uc131\n    op.create_table('users_new',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('username', sa.String(100)),  # \ud0c0\uc785 \ubcc0\uacbd\ub428\n        # ... \uae30\ud0c0 \uceec\ub7fc\n    )\n\n    # 2. \ub370\uc774\ud130 \ubcf5\uc0ac\n    op.execute('INSERT INTO users_new SELECT * FROM users')\n\n    # 3. \uae30\uc874 \ud14c\uc774\ube14 \uc0ad\uc81c\n    op.drop_table('users')\n\n    # 4. \ud14c\uc774\ube14 \uc774\ub984 \ubcc0\uacbd\n    op.rename_table('users_new', 'users')\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\ufe0f-\uc8fc\uc758\uc0ac\ud56d",children:"\u26a0\ufe0f \uc8fc\uc758\uc0ac\ud56d"}),"\n",(0,r.jsx)(e.h3,{id:"1-not-null-\uceec\ub7fc-\ucd94\uac00",children:"1. NOT NULL \uceec\ub7fc \ucd94\uac00"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"# \u274c \uc2e4\ud328: \uae30\uc874 \ud589\uc774 \uc788\uc73c\uba74 \uc5d0\ub7ec\ndef upgrade():\n    op.add_column('users',\n        sa.Column('required_field', sa.String(50), nullable=False)\n    )\n\n# \u2705 \uc62c\ubc14\ub978 \ubc29\ubc95\ndef upgrade():\n    # 1. NULL \uac00\ub2a5\ud558\uac8c \ucd94\uac00\n    op.add_column('users',\n        sa.Column('required_field', sa.String(50), nullable=True)\n    )\n\n    # 2. \uae30\ubcf8\uac12 \uc124\uc815\n    op.execute(\"UPDATE users SET required_field = 'default'\")\n\n    # 3. NOT NULL \uc81c\uc57d\uc870\uac74 \ucd94\uac00\n    op.alter_column('users', 'required_field', nullable=False)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"2-\uceec\ub7fc-\uc0ad\uc81c-\uc2dc-\ub370\uc774\ud130-\uc190\uc2e4",children:"2. \uceec\ub7fc \uc0ad\uc81c \uc2dc \ub370\uc774\ud130 \uc190\uc2e4"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"# \u26a0\ufe0f \uc8fc\uc758: \ub370\uc774\ud130\uac00 \uc601\uad6c \uc0ad\uc81c\ub428\ndef upgrade():\n    # \uc911\uc694\ud55c \ub370\uc774\ud130\ub77c\uba74 \ubc31\uc5c5 \uba3c\uc800\n    op.execute('''\n        CREATE TABLE users_backup AS\n        SELECT id, important_column FROM users\n    ''')\n\n    op.drop_column('users', 'important_column')\n\ndef downgrade():\n    op.add_column('users', sa.Column('important_column', sa.String(100)))\n    op.execute('''\n        UPDATE users u\n        SET important_column = b.important_column\n        FROM users_backup b\n        WHERE u.id = b.id\n    ''')\n"})}),"\n",(0,r.jsx)(e.h3,{id:"3-\ud0c0\uc785-\ubcc0\uacbd-\uc2dc-\ub370\uc774\ud130-\ud638\ud658\uc131",children:"3. \ud0c0\uc785 \ubcc0\uacbd \uc2dc \ub370\uc774\ud130 \ud638\ud658\uc131"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"# \u274c \uc704\ud5d8: \ub370\uc774\ud130 \uc190\uc2e4 \uac00\ub2a5\nop.alter_column('users', 'age',\n    type_=sa.String(10),  # \"30\" -> \"30\"\n    existing_type=sa.Integer()\n)\n\n# \ub2e4\uc2dc Integer\ub85c \ubcc0\uacbd \uc2dc\nop.alter_column('users', 'age',\n    type_=sa.Integer(),  # \"30a\" -> \uc5d0\ub7ec!\n    existing_type=sa.String(10)\n)\n\n# \u2705 \uc548\uc804: \ub370\uc774\ud130 \uac80\uc99d\ndef upgrade():\n    # \uba3c\uc800 \ub370\uc774\ud130 \uc815\ub9ac\n    op.execute(\"UPDATE users SET age = NULL WHERE age !~ '^[0-9]+$'\")\n\n    op.alter_column('users', 'age',\n        type_=sa.Integer(),\n        postgresql_using='age::integer'\n    )\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-\uc2e4\uc2b5-\uacfc\uc81c",children:"\u2705 \uc2e4\uc2b5 \uacfc\uc81c"}),"\n",(0,r.jsx)(e.h3,{id:"\uacfc\uc81c-\uc774\ucee4\uba38\uc2a4-\uc81c\ud488-\ud14c\uc774\ube14-\uac1c\uc120",children:"\uacfc\uc81c: \uc774\ucee4\uba38\uc2a4 \uc81c\ud488 \ud14c\uc774\ube14 \uac1c\uc120"}),"\n",(0,r.jsx)(e.p,{children:"\uae30\uc874 products \ud14c\uc774\ube14:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE products (\n    id INTEGER PRIMARY KEY,\n    name VARCHAR(50),\n    price INTEGER\n);\n"})}),"\n",(0,r.jsx)(e.p,{children:"\ub2e4\uc74c \ubcc0\uacbd\uc0ac\ud56d\uc744 \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc73c\ub85c \uad6c\ud604\ud558\uc138\uc694:"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"name \uceec\ub7fc \uae38\uc774\ub97c 100\uc73c\ub85c \uc99d\uac00"}),"\n",(0,r.jsx)(e.li,{children:"price\ub97c Decimal(10,2)\ub85c \ubcc0\uacbd"}),"\n",(0,r.jsx)(e.li,{children:"description (Text), stock (Integer), is_active (Boolean) \uceec\ub7fc \ucd94\uac00"}),"\n",(0,r.jsx)(e.li,{children:"created_at, updated_at \ud0c0\uc784\uc2a4\ud0ec\ud504 \ucd94\uac00"}),"\n"]}),"\n",(0,r.jsxs)(l,{children:[(0,r.jsx)("summary",{children:"\uc815\ub2f5 \ubcf4\uae30"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"\"\"\"improve products table\n\nRevision ID: products001\n\"\"\"\n\ndef upgrade():\n    # 1. name \uae38\uc774 \uc99d\uac00\n    op.alter_column('products', 'name',\n        type_=sa.String(100),\n        existing_type=sa.String(50)\n    )\n\n    # 2. price \ud0c0\uc785 \ubcc0\uacbd\n    op.add_column('products', sa.Column('price_new', sa.Numeric(10, 2)))\n    op.execute('UPDATE products SET price_new = price / 100.0')\n    op.drop_column('products', 'price')\n    op.alter_column('products', 'price_new', new_column_name='price')\n\n    # 3. \uc0c8 \uceec\ub7fc\ub4e4 \ucd94\uac00\n    op.add_column('products', sa.Column('description', sa.Text()))\n    op.add_column('products', sa.Column('stock', sa.Integer(), server_default='0'))\n    op.add_column('products', sa.Column('is_active', sa.Boolean(), server_default='true'))\n    op.add_column('products', sa.Column('created_at', sa.DateTime(), server_default=sa.func.now()))\n    op.add_column('products', sa.Column('updated_at', sa.DateTime(), onupdate=sa.func.now()))\n\ndef downgrade():\n    op.drop_column('products', 'updated_at')\n    op.drop_column('products', 'created_at')\n    op.drop_column('products', 'is_active')\n    op.drop_column('products', 'stock')\n    op.drop_column('products', 'description')\n\n    op.add_column('products', sa.Column('price_old', sa.Integer()))\n    op.execute('UPDATE products SET price_old = price * 100')\n    op.drop_column('products', 'price')\n    op.alter_column('products', 'price_old', new_column_name='price')\n\n    op.alter_column('products', 'name',\n        type_=sa.String(50),\n        existing_type=sa.String(100)\n    )\n"})})]}),"\n",(0,r.jsx)(e.h2,{id:"-\ud575\uc2ec-\uc815\ub9ac",children:"\ud83d\udcda \ud575\uc2ec \uc815\ub9ac"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"op.add_column()"}),": \uceec\ub7fc \ucd94\uac00"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"op.drop_column()"}),": \uceec\ub7fc \uc0ad\uc81c"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"op.alter_column()"}),": \uceec\ub7fc \uc218\uc815 (\ud0c0\uc785, NULL, \uc774\ub984, \uae30\ubcf8\uac12)"]}),"\n",(0,r.jsx)(e.li,{children:"NOT NULL \ucd94\uac00 \uc2dc: NULL\ub85c \ucd94\uac00 \u2192 \ub370\uc774\ud130 \uc785\ub825 \u2192 NOT NULL \ubcc0\uacbd"}),"\n",(0,r.jsx)(e.li,{children:"\ub370\uc774\ud130 \ud0c0\uc785 \ubcc0\uacbd \uc2dc: \ud638\ud658\uc131 \uac80\uc99d \ud544\uc218"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"-\ub2e4\uc74c-\ub2e8\uacc4",children:"\ud83d\udcda \ub2e4\uc74c \ub2e8\uacc4"}),"\n",(0,r.jsxs)(e.p,{children:["\ud83d\udc49 ",(0,r.jsx)(e.a,{href:"./constraints",children:"\uc81c\uc57d\uc870\uac74\uacfc \uc778\ub371\uc2a4"})]})]})}function t(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(i,{...n})}):i(n)}}}]);